(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();/**
* @vue/shared v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ed(n,e){const t=new Set(n.split(","));return i=>t.has(i)}const ft={},zs=[],_n=()=>{},Bb=()=>!1,Kc=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),td=n=>n.startsWith("onUpdate:"),zt=Object.assign,nd=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},zb=Object.prototype.hasOwnProperty,Xe=(n,e)=>zb.call(n,e),Ie=Array.isArray,Hs=n=>Xo(n)==="[object Map]",Zc=n=>Xo(n)==="[object Set]",Fp=n=>Xo(n)==="[object Date]",Be=n=>typeof n=="function",Lt=n=>typeof n=="string",Mi=n=>typeof n=="symbol",lt=n=>n!==null&&typeof n=="object",uy=n=>(lt(n)||Be(n))&&Be(n.then)&&Be(n.catch),fy=Object.prototype.toString,Xo=n=>fy.call(n),Hb=n=>Xo(n).slice(8,-1),hy=n=>Xo(n)==="[object Object]",id=n=>Lt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Za=ed(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Jc=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Vb=/-(\w)/g,Kn=Jc(n=>n.replace(Vb,(e,t)=>t?t.toUpperCase():"")),Gb=/\B([A-Z])/g,ha=Jc(n=>n.replace(Gb,"-$1").toLowerCase()),Qc=Jc(n=>n.charAt(0).toUpperCase()+n.slice(1)),ju=Jc(n=>n?`on${Qc(n)}`:""),lr=(n,e)=>!Object.is(n,e),dc=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},dy=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},Ac=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let kp;const py=()=>kp||(kp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rd(n){if(Ie(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=Lt(i)?qb(i):rd(i);if(r)for(const s in r)e[s]=r[s]}return e}else if(Lt(n)||lt(n))return n}const Wb=/;(?![^(]*\))/g,jb=/:([^]+)/,$b=/\/\*[^]*?\*\//g;function qb(n){const e={};return n.replace($b,"").split(Wb).forEach(t=>{if(t){const i=t.split(jb);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function eu(n){let e="";if(Lt(n))e=n;else if(Ie(n))for(let t=0;t<n.length;t++){const i=eu(n[t]);i&&(e+=i+" ")}else if(lt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const Xb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Yb=ed(Xb);function my(n){return!!n||n===""}function Kb(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=Ys(n[i],e[i]);return t}function Ys(n,e){if(n===e)return!0;let t=Fp(n),i=Fp(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=Mi(n),i=Mi(e),t||i)return n===e;if(t=Ie(n),i=Ie(e),t||i)return t&&i?Kb(n,e):!1;if(t=lt(n),i=lt(e),t||i){if(!t||!i)return!1;const r=Object.keys(n).length,s=Object.keys(e).length;if(r!==s)return!1;for(const a in n){const o=n.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!Ys(n[a],e[a]))return!1}}return String(n)===String(e)}function Zb(n,e){return n.findIndex(t=>Ys(t,e))}const Ye=n=>Lt(n)?n:n==null?"":Ie(n)||lt(n)&&(n.toString===fy||!Be(n.toString))?JSON.stringify(n,gy,2):String(n),gy=(n,e)=>e&&e.__v_isRef?gy(n,e.value):Hs(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r],s)=>(t[$u(i,s)+" =>"]=r,t),{})}:Zc(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>$u(t))}:Mi(e)?$u(e):lt(e)&&!Ie(e)&&!hy(e)?String(e):e,$u=(n,e="")=>{var t;return Mi(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nn;class Jb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Nn,!e&&Nn&&(this.index=(Nn.scopes||(Nn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Nn;try{return Nn=this,e()}finally{Nn=t}}}on(){Nn=this}off(){Nn=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Qb(n,e=Nn){e&&e.active&&e.effects.push(n)}function ew(){return Nn}let Vr;class sd{constructor(e,t,i,r){this.fn=e,this.trigger=t,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,Qb(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,yr();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(tw(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),_r()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=tr,t=Vr;try{return tr=!0,Vr=this,this._runnings++,Up(this),this.fn()}finally{Bp(this),this._runnings--,Vr=t,tr=e}}stop(){this.active&&(Up(this),Bp(this),this.onStop&&this.onStop(),this.active=!1)}}function tw(n){return n.value}function Up(n){n._trackId++,n._depsLength=0}function Bp(n){if(n.deps.length>n._depsLength){for(let e=n._depsLength;e<n.deps.length;e++)vy(n.deps[e],n);n.deps.length=n._depsLength}}function vy(n,e){const t=n.get(e);t!==void 0&&e._trackId!==t&&(n.delete(e),n.size===0&&n.cleanup())}let tr=!0,eh=0;const yy=[];function yr(){yy.push(tr),tr=!1}function _r(){const n=yy.pop();tr=n===void 0?!0:n}function ad(){eh++}function od(){for(eh--;!eh&&th.length;)th.shift()()}function _y(n,e,t){if(e.get(n)!==n._trackId){e.set(n,n._trackId);const i=n.deps[n._depsLength];i!==e?(i&&vy(i,n),n.deps[n._depsLength++]=e):n._depsLength++}}const th=[];function xy(n,e,t){ad();for(const i of n.keys()){let r;i._dirtyLevel<e&&(r??(r=n.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(r??(r=n.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&th.push(i.scheduler)))}od()}const by=(n,e)=>{const t=new Map;return t.cleanup=n,t.computed=e,t},Rc=new WeakMap,Gr=Symbol(""),nh=Symbol("");function fn(n,e,t){if(tr&&Vr){let i=Rc.get(n);i||Rc.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=by(()=>i.delete(t))),_y(Vr,r)}}function xi(n,e,t,i,r,s){const a=Rc.get(n);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&Ie(n)){const l=Number(i);a.forEach((c,u)=>{(u==="length"||!Mi(u)&&u>=l)&&o.push(c)})}else switch(t!==void 0&&o.push(a.get(t)),e){case"add":Ie(n)?id(t)&&o.push(a.get("length")):(o.push(a.get(Gr)),Hs(n)&&o.push(a.get(nh)));break;case"delete":Ie(n)||(o.push(a.get(Gr)),Hs(n)&&o.push(a.get(nh)));break;case"set":Hs(n)&&o.push(a.get(Gr));break}ad();for(const l of o)l&&xy(l,4);od()}function nw(n,e){const t=Rc.get(n);return t&&t.get(e)}const iw=ed("__proto__,__v_isRef,__isVue"),wy=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Mi)),zp=rw();function rw(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=Qe(this);for(let s=0,a=this.length;s<a;s++)fn(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(Qe)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){yr(),ad();const i=Qe(this)[e].apply(this,t);return od(),_r(),i}}),n}function sw(n){Mi(n)||(n=String(n));const e=Qe(this);return fn(e,"has",n),e.hasOwnProperty(n)}class My{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){const r=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return s;if(t==="__v_raw")return i===(r?s?yw:Ay:s?Ty:Ey).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const a=Ie(e);if(!r){if(a&&Xe(zp,t))return Reflect.get(zp,t,i);if(t==="hasOwnProperty")return sw}const o=Reflect.get(e,t,i);return(Mi(t)?wy.has(t):iw(t))||(r||fn(e,"get",t),s)?o:nn(o)?a&&id(t)?o:o.value:lt(o)?r?Ly(o):Yo(o):o}}class Sy extends My{constructor(e=!1){super(!1,e)}set(e,t,i,r){let s=e[t];if(!this._isShallow){const l=vo(s);if(!Lc(i)&&!vo(i)&&(s=Qe(s),i=Qe(i)),!Ie(e)&&nn(s)&&!nn(i))return l?!1:(s.value=i,!0)}const a=Ie(e)&&id(t)?Number(t)<e.length:Xe(e,t),o=Reflect.set(e,t,i,r);return e===Qe(r)&&(a?lr(i,s)&&xi(e,"set",t,i):xi(e,"add",t,i)),o}deleteProperty(e,t){const i=Xe(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&i&&xi(e,"delete",t,void 0),r}has(e,t){const i=Reflect.has(e,t);return(!Mi(t)||!wy.has(t))&&fn(e,"has",t),i}ownKeys(e){return fn(e,"iterate",Ie(e)?"length":Gr),Reflect.ownKeys(e)}}class aw extends My{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const ow=new Sy,lw=new aw,cw=new Sy(!0);const ld=n=>n,tu=n=>Reflect.getPrototypeOf(n);function yl(n,e,t=!1,i=!1){n=n.__v_raw;const r=Qe(n),s=Qe(e);t||(lr(e,s)&&fn(r,"get",e),fn(r,"get",s));const{has:a}=tu(r),o=i?ld:t?fd:yo;if(a.call(r,e))return o(n.get(e));if(a.call(r,s))return o(n.get(s));n!==r&&n.get(e)}function _l(n,e=!1){const t=this.__v_raw,i=Qe(t),r=Qe(n);return e||(lr(n,r)&&fn(i,"has",n),fn(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function xl(n,e=!1){return n=n.__v_raw,!e&&fn(Qe(n),"iterate",Gr),Reflect.get(n,"size",n)}function Hp(n){n=Qe(n);const e=Qe(this);return tu(e).has.call(e,n)||(e.add(n),xi(e,"add",n,n)),this}function Vp(n,e){e=Qe(e);const t=Qe(this),{has:i,get:r}=tu(t);let s=i.call(t,n);s||(n=Qe(n),s=i.call(t,n));const a=r.call(t,n);return t.set(n,e),s?lr(e,a)&&xi(t,"set",n,e):xi(t,"add",n,e),this}function Gp(n){const e=Qe(this),{has:t,get:i}=tu(e);let r=t.call(e,n);r||(n=Qe(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&xi(e,"delete",n,void 0),s}function Wp(){const n=Qe(this),e=n.size!==0,t=n.clear();return e&&xi(n,"clear",void 0,void 0),t}function bl(n,e){return function(i,r){const s=this,a=s.__v_raw,o=Qe(a),l=e?ld:n?fd:yo;return!n&&fn(o,"iterate",Gr),a.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function wl(n,e,t){return function(...i){const r=this.__v_raw,s=Qe(r),a=Hs(s),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,c=r[n](...i),u=t?ld:e?fd:yo;return!e&&fn(s,"iterate",l?nh:Gr),{next(){const{value:f,done:h}=c.next();return h?{value:f,done:h}:{value:o?[u(f[0]),u(f[1])]:u(f),done:h}},[Symbol.iterator](){return this}}}}function Di(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function uw(){const n={get(s){return yl(this,s)},get size(){return xl(this)},has:_l,add:Hp,set:Vp,delete:Gp,clear:Wp,forEach:bl(!1,!1)},e={get(s){return yl(this,s,!1,!0)},get size(){return xl(this)},has:_l,add:Hp,set:Vp,delete:Gp,clear:Wp,forEach:bl(!1,!0)},t={get(s){return yl(this,s,!0)},get size(){return xl(this,!0)},has(s){return _l.call(this,s,!0)},add:Di("add"),set:Di("set"),delete:Di("delete"),clear:Di("clear"),forEach:bl(!0,!1)},i={get(s){return yl(this,s,!0,!0)},get size(){return xl(this,!0)},has(s){return _l.call(this,s,!0)},add:Di("add"),set:Di("set"),delete:Di("delete"),clear:Di("clear"),forEach:bl(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=wl(s,!1,!1),t[s]=wl(s,!0,!1),e[s]=wl(s,!1,!0),i[s]=wl(s,!0,!0)}),[n,t,e,i]}const[fw,hw,dw,pw]=uw();function cd(n,e){const t=e?n?pw:dw:n?hw:fw;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(Xe(t,r)&&r in i?t:i,r,s)}const mw={get:cd(!1,!1)},gw={get:cd(!1,!0)},vw={get:cd(!0,!1)};const Ey=new WeakMap,Ty=new WeakMap,Ay=new WeakMap,yw=new WeakMap;function _w(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xw(n){return n.__v_skip||!Object.isExtensible(n)?0:_w(Hb(n))}function Yo(n){return vo(n)?n:ud(n,!1,ow,mw,Ey)}function Ry(n){return ud(n,!1,cw,gw,Ty)}function Ly(n){return ud(n,!0,lw,vw,Ay)}function ud(n,e,t,i,r){if(!lt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const a=xw(n);if(a===0)return n;const o=new Proxy(n,a===2?i:t);return r.set(n,o),o}function Ja(n){return vo(n)?Ja(n.__v_raw):!!(n&&n.__v_isReactive)}function vo(n){return!!(n&&n.__v_isReadonly)}function Lc(n){return!!(n&&n.__v_isShallow)}function Cy(n){return n?!!n.__v_raw:!1}function Qe(n){const e=n&&n.__v_raw;return e?Qe(e):n}function bw(n){return Object.isExtensible(n)&&dy(n,"__v_skip",!0),n}const yo=n=>lt(n)?Yo(n):n,fd=n=>lt(n)?Ly(n):n;class Py{constructor(e,t,i,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new sd(()=>e(this._value),()=>pc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=Qe(this);return(!e._cacheable||e.effect.dirty)&&lr(e._value,e._value=e.effect.run())&&pc(e,4),Iy(e),e.effect._dirtyLevel>=2&&pc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function ww(n,e,t=!1){let i,r;const s=Be(n);return s?(i=n,r=_n):(i=n.get,r=n.set),new Py(i,r,s||!r,t)}function Iy(n){var e;tr&&Vr&&(n=Qe(n),_y(Vr,(e=n.dep)!=null?e:n.dep=by(()=>n.dep=void 0,n instanceof Py?n:void 0)))}function pc(n,e=4,t){n=Qe(n);const i=n.dep;i&&xy(i,e)}function nn(n){return!!(n&&n.__v_isRef===!0)}function Fe(n){return Ny(n,!1)}function Mw(n){return Ny(n,!0)}function Ny(n,e){return nn(n)?n:new Sw(n,e)}class Sw{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Qe(e),this._value=t?e:yo(e)}get value(){return Iy(this),this._value}set value(e){const t=this.__v_isShallow||Lc(e)||vo(e);e=t?e:Qe(e),lr(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:yo(e),pc(this,4))}}function Oe(n){return nn(n)?n.value:n}const Ew={get:(n,e,t)=>Oe(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return nn(r)&&!nn(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function Dy(n){return Ja(n)?n:new Proxy(n,Ew)}function Tw(n){const e=Ie(n)?new Array(n.length):{};for(const t in n)e[t]=Rw(n,t);return e}class Aw{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return nw(Qe(this._object),this._key)}}function Rw(n,e,t){const i=n[e];return nn(i)?i:new Aw(n,e,t)}/**
* @vue/runtime-core v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nr(n,e,t,i){try{return i?n(...i):n()}catch(r){nu(r,e,t)}}function Bn(n,e,t,i){if(Be(n)){const r=nr(n,e,t,i);return r&&uy(r)&&r.catch(s=>{nu(s,e,t)}),r}if(Ie(n)){const r=[];for(let s=0;s<n.length;s++)r.push(Bn(n[s],e,t,i));return r}}function nu(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){yr(),nr(l,null,10,[n,a,o]),_r();return}}Lw(n,t,r,i)}function Lw(n,e,t,i=!0){console.error(n)}let _o=!1,ih=!1;const Xt=[];let $n=0;const Vs=[];let qi=null,Ur=0;const Oy=Promise.resolve();let hd=null;function dd(n){const e=hd||Oy;return n?e.then(this?n.bind(this):n):e}function Cw(n){let e=$n+1,t=Xt.length;for(;e<t;){const i=e+t>>>1,r=Xt[i],s=xo(r);s<n||s===n&&r.pre?e=i+1:t=i}return e}function pd(n){(!Xt.length||!Xt.includes(n,_o&&n.allowRecurse?$n+1:$n))&&(n.id==null?Xt.push(n):Xt.splice(Cw(n.id),0,n),Fy())}function Fy(){!_o&&!ih&&(ih=!0,hd=Oy.then(Uy))}function Pw(n){const e=Xt.indexOf(n);e>$n&&Xt.splice(e,1)}function Iw(n){Ie(n)?Vs.push(...n):(!qi||!qi.includes(n,n.allowRecurse?Ur+1:Ur))&&Vs.push(n),Fy()}function jp(n,e,t=_o?$n+1:0){for(;t<Xt.length;t++){const i=Xt[t];if(i&&i.pre){if(n&&i.id!==n.uid)continue;Xt.splice(t,1),t--,i()}}}function ky(n){if(Vs.length){const e=[...new Set(Vs)].sort((t,i)=>xo(t)-xo(i));if(Vs.length=0,qi){qi.push(...e);return}for(qi=e,Ur=0;Ur<qi.length;Ur++)qi[Ur]();qi=null,Ur=0}}const xo=n=>n.id==null?1/0:n.id,Nw=(n,e)=>{const t=xo(n)-xo(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function Uy(n){ih=!1,_o=!0,Xt.sort(Nw);try{for($n=0;$n<Xt.length;$n++){const e=Xt[$n];e&&e.active!==!1&&nr(e,null,14)}}finally{$n=0,Xt.length=0,ky(),_o=!1,hd=null,(Xt.length||Vs.length)&&Uy()}}function Dw(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||ft;let r=t;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in i){const u=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=i[u]||ft;h&&(r=t.map(d=>Lt(d)?d.trim():d)),f&&(r=t.map(Ac))}let o,l=i[o=ju(e)]||i[o=ju(Kn(e))];!l&&s&&(l=i[o=ju(ha(e))]),l&&Bn(l,n,6,r);const c=i[o+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,Bn(c,n,6,r)}}function By(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let a={},o=!1;if(!Be(n)){const l=c=>{const u=By(c,e,!0);u&&(o=!0,zt(a,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!o?(lt(n)&&i.set(n,null),null):(Ie(s)?s.forEach(l=>a[l]=null):zt(a,s),lt(n)&&i.set(n,a),a)}function iu(n,e){return!n||!Kc(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xe(n,e[0].toLowerCase()+e.slice(1))||Xe(n,ha(e))||Xe(n,e))}let Ut=null,zy=null;function Cc(n){const e=Ut;return Ut=n,zy=n&&n.type.__scopeId||null,e}function Gt(n,e=Ut,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&nm(-1);const s=Cc(e);let a;try{a=n(...r)}finally{Cc(s),i._d&&nm(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function qu(n){const{type:e,vnode:t,proxy:i,withProxy:r,propsOptions:[s],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:f,data:h,setupState:d,ctx:g,inheritAttrs:v}=n,y=Cc(n);let p,m;try{if(t.shapeFlag&4){const w=r||i,E=w;p=Wn(c.call(E,w,u,f,d,h,g)),m=o}else{const w=e;p=Wn(w.length>1?w(f,{attrs:o,slots:a,emit:l}):w(f,null)),m=e.props?o:Ow(o)}}catch(w){io.length=0,nu(w,n,1),p=Re(cr)}let _=p;if(m&&v!==!1){const w=Object.keys(m),{shapeFlag:E}=_;w.length&&E&7&&(s&&w.some(td)&&(m=Fw(m,s)),_=Zs(_,m,!1,!0))}return t.dirs&&(_=Zs(_,null,!1,!0),_.dirs=_.dirs?_.dirs.concat(t.dirs):t.dirs),t.transition&&(_.transition=t.transition),p=_,Cc(y),p}const Ow=n=>{let e;for(const t in n)(t==="class"||t==="style"||Kc(t))&&((e||(e={}))[t]=n[t]);return e},Fw=(n,e)=>{const t={};for(const i in n)(!td(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function kw(n,e,t){const{props:i,children:r,component:s}=n,{props:a,children:o,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?$p(i,a,c):!!a;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const h=u[f];if(a[h]!==i[h]&&!iu(c,h))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?$p(i,a,c):!0:!!a;return!1}function $p(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!iu(t,s))return!0}return!1}function Uw({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const md="components";function is(n,e){return Vy(md,n,!0,e)||n}const Hy=Symbol.for("v-ndc");function Bw(n){return Lt(n)?Vy(md,n,!1)||n:n||Hy}function Vy(n,e,t=!0,i=!1){const r=Ut||Yt;if(r){const s=r.type;if(n===md){const o=CM(s,!1);if(o&&(o===e||o===Kn(e)||o===Qc(Kn(e))))return s}const a=qp(r[n]||s[n],e)||qp(r.appContext[n],e);return!a&&i?s:a}}function qp(n,e){return n&&(n[e]||n[Kn(e)]||n[Qc(Kn(e))])}const zw=n=>n.__isSuspense;function Hw(n,e){e&&e.pendingBranch?Ie(n)?e.effects.push(...n):e.effects.push(n):Iw(n)}const Vw=Symbol.for("v-scx"),Gw=()=>wn(Vw),Ml={};function Wr(n,e,t){return Gy(n,e,t)}function Gy(n,e,{immediate:t,deep:i,flush:r,once:s,onTrack:a,onTrigger:o}=ft){if(e&&s){const A=e;e=(...b)=>{A(...b),E()}}const l=Yt,c=A=>i===!0?A:Br(A,i===!1?1:void 0);let u,f=!1,h=!1;if(nn(n)?(u=()=>n.value,f=Lc(n)):Ja(n)?(u=()=>c(n),f=!0):Ie(n)?(h=!0,f=n.some(A=>Ja(A)||Lc(A)),u=()=>n.map(A=>{if(nn(A))return A.value;if(Ja(A))return c(A);if(Be(A))return nr(A,l,2)})):Be(n)?e?u=()=>nr(n,l,2):u=()=>(d&&d(),Bn(n,l,3,[g])):u=_n,e&&i){const A=u;u=()=>Br(A())}let d,g=A=>{d=_.onStop=()=>{nr(A,l,4),d=_.onStop=void 0}},v;if(au)if(g=_n,e?t&&Bn(e,l,3,[u(),h?[]:void 0,g]):u(),r==="sync"){const A=Gw();v=A.__watcherHandles||(A.__watcherHandles=[])}else return _n;let y=h?new Array(n.length).fill(Ml):Ml;const p=()=>{if(!(!_.active||!_.dirty))if(e){const A=_.run();(i||f||(h?A.some((b,N)=>lr(b,y[N])):lr(A,y)))&&(d&&d(),Bn(e,l,3,[A,y===Ml?void 0:h&&y[0]===Ml?[]:y,g]),y=A)}else _.run()};p.allowRecurse=!!e;let m;r==="sync"?m=p:r==="post"?m=()=>on(p,l&&l.suspense):(p.pre=!0,l&&(p.id=l.uid),m=()=>pd(p));const _=new sd(u,_n,m),w=ew(),E=()=>{_.stop(),w&&nd(w.effects,_)};return e?t?p():y=_.run():r==="post"?on(_.run.bind(_),l&&l.suspense):_.run(),v&&v.push(E),E}function Ww(n,e,t){const i=this.proxy,r=Lt(n)?n.includes(".")?Wy(i,n):()=>i[n]:n.bind(i,i);let s;Be(e)?s=e:(s=e.handler,t=e);const a=Ko(this),o=Gy(r,s.bind(i),t);return a(),o}function Wy(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function Br(n,e=1/0,t){if(e<=0||!lt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,nn(n))Br(n.value,e,t);else if(Ie(n))for(let i=0;i<n.length;i++)Br(n[i],e,t);else if(Zc(n)||Hs(n))n.forEach(i=>{Br(i,e,t)});else if(hy(n))for(const i in n)Br(n[i],e,t);return n}function vt(n,e){if(Ut===null)return n;const t=ou(Ut)||Ut.proxy,i=n.dirs||(n.dirs=[]);for(let r=0;r<e.length;r++){let[s,a,o,l=ft]=e[r];s&&(Be(s)&&(s={mounted:s,updated:s}),s.deep&&Br(a),i.push({dir:s,instance:t,value:a,oldValue:void 0,arg:o,modifiers:l}))}return n}function Cr(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(yr(),Bn(l,t,8,[n.el,o,n,e]),_r())}}/*! #__NO_SIDE_EFFECTS__ */function da(n,e){return Be(n)?zt({name:n.name},e,{setup:n}):n}const Qa=n=>!!n.type.__asyncLoader,jy=n=>n.type.__isKeepAlive;function jw(n,e){$y(n,"a",e)}function $w(n,e){$y(n,"da",e)}function $y(n,e,t=Yt){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(ru(e,i,t),t){let r=t.parent;for(;r&&r.parent;)jy(r.parent.vnode)&&qw(i,e,t,r),r=r.parent}}function qw(n,e,t,i){const r=ru(e,n,i,!0);Yy(()=>{nd(i[e],r)},t)}function ru(n,e,t=Yt,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;yr();const o=Ko(t),l=Bn(e,t,n,a);return o(),_r(),l});return i?r.unshift(s):r.push(s),s}}const Ci=n=>(e,t=Yt)=>(!au||n==="sp")&&ru(n,(...i)=>e(...i),t),Xw=Ci("bm"),ti=Ci("m"),Yw=Ci("bu"),qy=Ci("u"),Xy=Ci("bum"),Yy=Ci("um"),Kw=Ci("sp"),Zw=Ci("rtg"),Jw=Ci("rtc");function Qw(n,e=Yt){ru("ec",n,e)}function Ks(n,e,t,i){let r;const s=t;if(Ie(n)||Lt(n)){r=new Array(n.length);for(let a=0,o=n.length;a<o;a++)r[a]=e(n[a],a,void 0,s)}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,s)}else if(lt(n))if(n[Symbol.iterator])r=Array.from(n,(a,o)=>e(a,o,void 0,s));else{const a=Object.keys(n);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const c=a[o];r[o]=e(n[c],c,o,s)}}else r=[];return r}function Pc(n,e,t={},i,r){if(Ut.isCE||Ut.parent&&Qa(Ut.parent)&&Ut.parent.isCE)return Re("slot",t,i);let s=n[e];s&&s._c&&(s._d=!1),Me();const a=s&&Ky(s(t)),o=Rt(dt,{key:t.key||a&&a.key||`_${e}`},a||[],a&&n._===1?64:-2);return o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function Ky(n){return n.some(e=>Nc(e)?!(e.type===cr||e.type===dt&&!Ky(e.children)):!0)?n:null}const rh=n=>n?f_(n)?ou(n)||n.proxy:rh(n.parent):null,eo=zt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>rh(n.parent),$root:n=>rh(n.root),$emit:n=>n.emit,$options:n=>gd(n),$forceUpdate:n=>n.f||(n.f=()=>{n.effect.dirty=!0,pd(n.update)}),$nextTick:n=>n.n||(n.n=dd.bind(n.proxy)),$watch:n=>Ww.bind(n)}),Xu=(n,e)=>n!==ft&&!n.__isScriptSetup&&Xe(n,e),eM={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:r,props:s,accessCache:a,type:o,appContext:l}=n;let c;if(e[0]!=="$"){const d=a[e];if(d!==void 0)switch(d){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(Xu(i,e))return a[e]=1,i[e];if(r!==ft&&Xe(r,e))return a[e]=2,r[e];if((c=n.propsOptions[0])&&Xe(c,e))return a[e]=3,s[e];if(t!==ft&&Xe(t,e))return a[e]=4,t[e];sh&&(a[e]=0)}}const u=eo[e];let f,h;if(u)return e==="$attrs"&&fn(n.attrs,"get",""),u(n);if((f=o.__cssModules)&&(f=f[e]))return f;if(t!==ft&&Xe(t,e))return a[e]=4,t[e];if(h=l.config.globalProperties,Xe(h,e))return h[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return Xu(r,e)?(r[e]=t,!0):i!==ft&&Xe(i,e)?(i[e]=t,!0):Xe(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},a){let o;return!!t[a]||n!==ft&&Xe(n,a)||Xu(e,a)||(o=s[0])&&Xe(o,a)||Xe(i,a)||Xe(eo,a)||Xe(r.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Xe(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Xp(n){return Ie(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let sh=!0;function tM(n){const e=gd(n),t=n.proxy,i=n.ctx;sh=!1,e.beforeCreate&&Yp(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:f,mounted:h,beforeUpdate:d,updated:g,activated:v,deactivated:y,beforeDestroy:p,beforeUnmount:m,destroyed:_,unmounted:w,render:E,renderTracked:A,renderTriggered:b,errorCaptured:N,serverPrefetch:K,expose:H,inheritAttrs:R,components:J,directives:P,filters:z}=e;if(c&&nM(c,i,null),a)for(const V in a){const Y=a[V];Be(Y)&&(i[V]=Y.bind(t))}if(r){const V=r.call(t,t);lt(V)&&(n.data=Yo(V))}if(sh=!0,s)for(const V in s){const Y=s[V],oe=Be(Y)?Y.bind(t,t):Be(Y.get)?Y.get.bind(t,t):_n,te=!Be(Y)&&Be(Y.set)?Y.set.bind(t):_n,ie=Tt({get:oe,set:te});Object.defineProperty(i,V,{enumerable:!0,configurable:!0,get:()=>ie.value,set:_e=>ie.value=_e})}if(o)for(const V in o)Zy(o[V],i,t,V);if(l){const V=Be(l)?l.call(t):l;Reflect.ownKeys(V).forEach(Y=>{no(Y,V[Y])})}u&&Yp(u,n,"c");function W(V,Y){Ie(Y)?Y.forEach(oe=>V(oe.bind(t))):Y&&V(Y.bind(t))}if(W(Xw,f),W(ti,h),W(Yw,d),W(qy,g),W(jw,v),W($w,y),W(Qw,N),W(Jw,A),W(Zw,b),W(Xy,m),W(Yy,w),W(Kw,K),Ie(H))if(H.length){const V=n.exposed||(n.exposed={});H.forEach(Y=>{Object.defineProperty(V,Y,{get:()=>t[Y],set:oe=>t[Y]=oe})})}else n.exposed||(n.exposed={});E&&n.render===_n&&(n.render=E),R!=null&&(n.inheritAttrs=R),J&&(n.components=J),P&&(n.directives=P)}function nM(n,e,t=_n){Ie(n)&&(n=ah(n));for(const i in n){const r=n[i];let s;lt(r)?"default"in r?s=wn(r.from||i,r.default,!0):s=wn(r.from||i):s=wn(r),nn(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[i]=s}}function Yp(n,e,t){Bn(Ie(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function Zy(n,e,t,i){const r=i.includes(".")?Wy(t,i):()=>t[i];if(Lt(n)){const s=e[n];Be(s)&&Wr(r,s)}else if(Be(n))Wr(r,n.bind(t));else if(lt(n))if(Ie(n))n.forEach(s=>Zy(s,e,t,i));else{const s=Be(n.handler)?n.handler.bind(t):e[n.handler];Be(s)&&Wr(r,s,n)}}function gd(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(c=>Ic(l,c,a,!0)),Ic(l,e,a)),lt(e)&&s.set(e,l),l}function Ic(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&Ic(n,s,t,!0),r&&r.forEach(a=>Ic(n,a,t,!0));for(const a in e)if(!(i&&a==="expose")){const o=iM[a]||t&&t[a];n[a]=o?o(n[a],e[a]):e[a]}return n}const iM={data:Kp,props:Zp,emits:Zp,methods:$a,computed:$a,beforeCreate:Qt,created:Qt,beforeMount:Qt,mounted:Qt,beforeUpdate:Qt,updated:Qt,beforeDestroy:Qt,beforeUnmount:Qt,destroyed:Qt,unmounted:Qt,activated:Qt,deactivated:Qt,errorCaptured:Qt,serverPrefetch:Qt,components:$a,directives:$a,watch:sM,provide:Kp,inject:rM};function Kp(n,e){return e?n?function(){return zt(Be(n)?n.call(this,this):n,Be(e)?e.call(this,this):e)}:e:n}function rM(n,e){return $a(ah(n),ah(e))}function ah(n){if(Ie(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Qt(n,e){return n?[...new Set([].concat(n,e))]:e}function $a(n,e){return n?zt(Object.create(null),n,e):e}function Zp(n,e){return n?Ie(n)&&Ie(e)?[...new Set([...n,...e])]:zt(Object.create(null),Xp(n),Xp(e??{})):e}function sM(n,e){if(!n)return e;if(!e)return n;const t=zt(Object.create(null),n);for(const i in e)t[i]=Qt(n[i],e[i]);return t}function Jy(){return{app:null,config:{isNativeTag:Bb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let aM=0;function oM(n,e){return function(i,r=null){Be(i)||(i=zt({},i)),r!=null&&!lt(r)&&(r=null);const s=Jy(),a=new WeakSet;let o=!1;const l=s.app={_uid:aM++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:IM,get config(){return s.config},set config(c){},use(c,...u){return a.has(c)||(c&&Be(c.install)?(a.add(c),c.install(l,...u)):Be(c)&&(a.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!o){const h=Re(i,r);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),u&&e?e(h,c):n(h,c,f),o=!0,l._container=c,c.__vue_app__=l,ou(h.component)||h.component.proxy}},unmount(){o&&(n(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=to;to=l;try{return c()}finally{to=u}}};return l}}let to=null;function no(n,e){if(Yt){let t=Yt.provides;const i=Yt.parent&&Yt.parent.provides;i===t&&(t=Yt.provides=Object.create(i)),t[n]=e}}function wn(n,e,t=!1){const i=Yt||Ut;if(i||to){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:to._context.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&Be(e)?e.call(i&&i.proxy):e}}const Qy={},e_=()=>Object.create(Qy),t_=n=>Object.getPrototypeOf(n)===Qy;function lM(n,e,t,i=!1){const r={},s=e_();n.propsDefaults=Object.create(null),n_(n,e,r,s);for(const a in n.propsOptions[0])a in r||(r[a]=void 0);t?n.props=i?r:Ry(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function cM(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=n,o=Qe(r),[l]=n.propsOptions;let c=!1;if((i||a>0)&&!(a&16)){if(a&8){const u=n.vnode.dynamicProps;for(let f=0;f<u.length;f++){let h=u[f];if(iu(n.emitsOptions,h))continue;const d=e[h];if(l)if(Xe(s,h))d!==s[h]&&(s[h]=d,c=!0);else{const g=Kn(h);r[g]=oh(l,o,g,d,n,!1)}else d!==s[h]&&(s[h]=d,c=!0)}}}else{n_(n,e,r,s)&&(c=!0);let u;for(const f in o)(!e||!Xe(e,f)&&((u=ha(f))===f||!Xe(e,u)))&&(l?t&&(t[f]!==void 0||t[u]!==void 0)&&(r[f]=oh(l,o,f,void 0,n,!0)):delete r[f]);if(s!==o)for(const f in s)(!e||!Xe(e,f))&&(delete s[f],c=!0)}c&&xi(n.attrs,"set","")}function n_(n,e,t,i){const[r,s]=n.propsOptions;let a=!1,o;if(e)for(let l in e){if(Za(l))continue;const c=e[l];let u;r&&Xe(r,u=Kn(l))?!s||!s.includes(u)?t[u]=c:(o||(o={}))[u]=c:iu(n.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,a=!0)}if(s){const l=Qe(t),c=o||ft;for(let u=0;u<s.length;u++){const f=s[u];t[f]=oh(r,l,f,c[f],n,!Xe(c,f))}}return a}function oh(n,e,t,i,r,s){const a=n[t];if(a!=null){const o=Xe(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Be(l)){const{propsDefaults:c}=r;if(t in c)i=c[t];else{const u=Ko(r);i=c[t]=l.call(null,e),u()}}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===ha(t))&&(i=!0))}return i}function i_(n,e,t=!1){const i=e.propsCache,r=i.get(n);if(r)return r;const s=n.props,a={},o=[];let l=!1;if(!Be(n)){const u=f=>{l=!0;const[h,d]=i_(f,e,!0);zt(a,h),d&&o.push(...d)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!s&&!l)return lt(n)&&i.set(n,zs),zs;if(Ie(s))for(let u=0;u<s.length;u++){const f=Kn(s[u]);Jp(f)&&(a[f]=ft)}else if(s)for(const u in s){const f=Kn(u);if(Jp(f)){const h=s[u],d=a[f]=Ie(h)||Be(h)?{type:h}:zt({},h);if(d){const g=tm(Boolean,d.type),v=tm(String,d.type);d[0]=g>-1,d[1]=v<0||g<v,(g>-1||Xe(d,"default"))&&o.push(f)}}}const c=[a,o];return lt(n)&&i.set(n,c),c}function Jp(n){return n[0]!=="$"&&!Za(n)}function Qp(n){return n===null?"null":typeof n=="function"?n.name||"":typeof n=="object"&&n.constructor&&n.constructor.name||""}function em(n,e){return Qp(n)===Qp(e)}function tm(n,e){return Ie(e)?e.findIndex(t=>em(t,n)):Be(e)&&em(e,n)?0:-1}const r_=n=>n[0]==="_"||n==="$stable",vd=n=>Ie(n)?n.map(Wn):[Wn(n)],uM=(n,e,t)=>{if(e._n)return e;const i=Gt((...r)=>vd(e(...r)),t);return i._c=!1,i},s_=(n,e,t)=>{const i=n._ctx;for(const r in n){if(r_(r))continue;const s=n[r];if(Be(s))e[r]=uM(r,s,i);else if(s!=null){const a=vd(s);e[r]=()=>a}}},a_=(n,e)=>{const t=vd(e);n.slots.default=()=>t},fM=(n,e)=>{const t=n.slots=e_();if(n.vnode.shapeFlag&32){const i=e._;i?(zt(t,e),dy(t,"_",i,!0)):s_(e,t)}else e&&a_(n,e)},hM=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,a=ft;if(i.shapeFlag&32){const o=e._;o?t&&o===1?s=!1:(zt(r,e),!t&&o===1&&delete r._):(s=!e.$stable,s_(e,r)),a=e}else e&&(a_(n,e),a={default:1});if(s)for(const o in r)!r_(o)&&a[o]==null&&delete r[o]};function lh(n,e,t,i,r=!1){if(Ie(n)){n.forEach((h,d)=>lh(h,e&&(Ie(e)?e[d]:e),t,i,r));return}if(Qa(i)&&!r)return;const s=i.shapeFlag&4?ou(i.component)||i.component.proxy:i.el,a=r?null:s,{i:o,r:l}=n,c=e&&e.r,u=o.refs===ft?o.refs={}:o.refs,f=o.setupState;if(c!=null&&c!==l&&(Lt(c)?(u[c]=null,Xe(f,c)&&(f[c]=null)):nn(c)&&(c.value=null)),Be(l))nr(l,o,12,[a,u]);else{const h=Lt(l),d=nn(l);if(h||d){const g=()=>{if(n.f){const v=h?Xe(f,l)?f[l]:u[l]:l.value;r?Ie(v)&&nd(v,s):Ie(v)?v.includes(s)||v.push(s):h?(u[l]=[s],Xe(f,l)&&(f[l]=u[l])):(l.value=[s],n.k&&(u[n.k]=l.value))}else h?(u[l]=a,Xe(f,l)&&(f[l]=a)):d&&(l.value=a,n.k&&(u[n.k]=a))};a?(g.id=-1,on(g,t)):g()}}}const on=Hw;function dM(n){return pM(n)}function pM(n,e){const t=py();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:h,setScopeId:d=_n,insertStaticContent:g}=n,v=(x,T,O,B=null,M=null,S=null,k=void 0,j=null,$=!!T.dynamicChildren)=>{if(x===T)return;x&&!Pa(x,T)&&(B=U(x),_e(x,M,S,!0),x=null),T.patchFlag===-2&&($=!1,T.dynamicChildren=null);const{type:q,ref:ue,shapeFlag:de}=T;switch(q){case su:y(x,T,O,B);break;case cr:p(x,T,O,B);break;case mc:x==null&&m(T,O,B,k);break;case dt:J(x,T,O,B,M,S,k,j,$);break;default:de&1?E(x,T,O,B,M,S,k,j,$):de&6?P(x,T,O,B,M,S,k,j,$):(de&64||de&128)&&q.process(x,T,O,B,M,S,k,j,$,ne)}ue!=null&&M&&lh(ue,x&&x.ref,S,T||x,!T)},y=(x,T,O,B)=>{if(x==null)i(T.el=o(T.children),O,B);else{const M=T.el=x.el;T.children!==x.children&&c(M,T.children)}},p=(x,T,O,B)=>{x==null?i(T.el=l(T.children||""),O,B):T.el=x.el},m=(x,T,O,B)=>{[x.el,x.anchor]=g(x.children,T,O,B,x.el,x.anchor)},_=({el:x,anchor:T},O,B)=>{let M;for(;x&&x!==T;)M=h(x),i(x,O,B),x=M;i(T,O,B)},w=({el:x,anchor:T})=>{let O;for(;x&&x!==T;)O=h(x),r(x),x=O;r(T)},E=(x,T,O,B,M,S,k,j,$)=>{T.type==="svg"?k="svg":T.type==="math"&&(k="mathml"),x==null?A(T,O,B,M,S,k,j,$):K(x,T,M,S,k,j,$)},A=(x,T,O,B,M,S,k,j)=>{let $,q;const{props:ue,shapeFlag:de,transition:ge,dirs:me}=x;if($=x.el=a(x.type,S,ue&&ue.is,ue),de&8?u($,x.children):de&16&&N(x.children,$,null,B,M,Yu(x,S),k,j),me&&Cr(x,null,B,"created"),b($,x,x.scopeId,k,B),ue){for(const ve in ue)ve!=="value"&&!Za(ve)&&s($,ve,null,ue[ve],S,x.children,B,M,F);"value"in ue&&s($,"value",null,ue.value,S),(q=ue.onVnodeBeforeMount)&&Vn(q,B,x)}me&&Cr(x,null,B,"beforeMount");const D=mM(M,ge);D&&ge.beforeEnter($),i($,T,O),((q=ue&&ue.onVnodeMounted)||D||me)&&on(()=>{q&&Vn(q,B,x),D&&ge.enter($),me&&Cr(x,null,B,"mounted")},M)},b=(x,T,O,B,M)=>{if(O&&d(x,O),B)for(let S=0;S<B.length;S++)d(x,B[S]);if(M){let S=M.subTree;if(T===S){const k=M.vnode;b(x,k,k.scopeId,k.slotScopeIds,M.parent)}}},N=(x,T,O,B,M,S,k,j,$=0)=>{for(let q=$;q<x.length;q++){const ue=x[q]=j?Xi(x[q]):Wn(x[q]);v(null,ue,T,O,B,M,S,k,j)}},K=(x,T,O,B,M,S,k)=>{const j=T.el=x.el;let{patchFlag:$,dynamicChildren:q,dirs:ue}=T;$|=x.patchFlag&16;const de=x.props||ft,ge=T.props||ft;let me;if(O&&Pr(O,!1),(me=ge.onVnodeBeforeUpdate)&&Vn(me,O,T,x),ue&&Cr(T,x,O,"beforeUpdate"),O&&Pr(O,!0),q?H(x.dynamicChildren,q,j,O,B,Yu(T,M),S):k||Y(x,T,j,null,O,B,Yu(T,M),S,!1),$>0){if($&16)R(j,T,de,ge,O,B,M);else if($&2&&de.class!==ge.class&&s(j,"class",null,ge.class,M),$&4&&s(j,"style",de.style,ge.style,M),$&8){const D=T.dynamicProps;for(let ve=0;ve<D.length;ve++){const re=D[ve],be=de[re],I=ge[re];(I!==be||re==="value")&&s(j,re,be,I,M,x.children,O,B,F)}}$&1&&x.children!==T.children&&u(j,T.children)}else!k&&q==null&&R(j,T,de,ge,O,B,M);((me=ge.onVnodeUpdated)||ue)&&on(()=>{me&&Vn(me,O,T,x),ue&&Cr(T,x,O,"updated")},B)},H=(x,T,O,B,M,S,k)=>{for(let j=0;j<T.length;j++){const $=x[j],q=T[j],ue=$.el&&($.type===dt||!Pa($,q)||$.shapeFlag&70)?f($.el):O;v($,q,ue,null,B,M,S,k,!0)}},R=(x,T,O,B,M,S,k)=>{if(O!==B){if(O!==ft)for(const j in O)!Za(j)&&!(j in B)&&s(x,j,O[j],null,k,T.children,M,S,F);for(const j in B){if(Za(j))continue;const $=B[j],q=O[j];$!==q&&j!=="value"&&s(x,j,q,$,k,T.children,M,S,F)}"value"in B&&s(x,"value",O.value,B.value,k)}},J=(x,T,O,B,M,S,k,j,$)=>{const q=T.el=x?x.el:o(""),ue=T.anchor=x?x.anchor:o("");let{patchFlag:de,dynamicChildren:ge,slotScopeIds:me}=T;me&&(j=j?j.concat(me):me),x==null?(i(q,O,B),i(ue,O,B),N(T.children||[],O,ue,M,S,k,j,$)):de>0&&de&64&&ge&&x.dynamicChildren?(H(x.dynamicChildren,ge,O,M,S,k,j),(T.key!=null||M&&T===M.subTree)&&o_(x,T,!0)):Y(x,T,O,ue,M,S,k,j,$)},P=(x,T,O,B,M,S,k,j,$)=>{T.slotScopeIds=j,x==null?T.shapeFlag&512?M.ctx.activate(T,O,B,k,$):z(T,O,B,M,S,k,$):G(x,T,$)},z=(x,T,O,B,M,S,k)=>{const j=x.component=EM(x,B,M);if(jy(x)&&(j.ctx.renderer=ne),TM(j),j.asyncDep){if(M&&M.registerDep(j,W),!x.el){const $=j.subTree=Re(cr);p(null,$,T,O)}}else W(j,x,T,O,M,S,k)},G=(x,T,O)=>{const B=T.component=x.component;if(kw(x,T,O))if(B.asyncDep&&!B.asyncResolved){V(B,T,O);return}else B.next=T,Pw(B.update),B.effect.dirty=!0,B.update();else T.el=x.el,B.vnode=T},W=(x,T,O,B,M,S,k)=>{const j=()=>{if(x.isMounted){let{next:ue,bu:de,u:ge,parent:me,vnode:D}=x;{const xe=l_(x);if(xe){ue&&(ue.el=D.el,V(x,ue,k)),xe.asyncDep.then(()=>{x.isUnmounted||j()});return}}let ve=ue,re;Pr(x,!1),ue?(ue.el=D.el,V(x,ue,k)):ue=D,de&&dc(de),(re=ue.props&&ue.props.onVnodeBeforeUpdate)&&Vn(re,me,ue,D),Pr(x,!0);const be=qu(x),I=x.subTree;x.subTree=be,v(I,be,f(I.el),U(I),x,M,S),ue.el=be.el,ve===null&&Uw(x,be.el),ge&&on(ge,M),(re=ue.props&&ue.props.onVnodeUpdated)&&on(()=>Vn(re,me,ue,D),M)}else{let ue;const{el:de,props:ge}=T,{bm:me,m:D,parent:ve}=x,re=Qa(T);if(Pr(x,!1),me&&dc(me),!re&&(ue=ge&&ge.onVnodeBeforeMount)&&Vn(ue,ve,T),Pr(x,!0),de&&Q){const be=()=>{x.subTree=qu(x),Q(de,x.subTree,x,M,null)};re?T.type.__asyncLoader().then(()=>!x.isUnmounted&&be()):be()}else{const be=x.subTree=qu(x);v(null,be,O,B,x,M,S),T.el=be.el}if(D&&on(D,M),!re&&(ue=ge&&ge.onVnodeMounted)){const be=T;on(()=>Vn(ue,ve,be),M)}(T.shapeFlag&256||ve&&Qa(ve.vnode)&&ve.vnode.shapeFlag&256)&&x.a&&on(x.a,M),x.isMounted=!0,T=O=B=null}},$=x.effect=new sd(j,_n,()=>pd(q),x.scope),q=x.update=()=>{$.dirty&&$.run()};q.id=x.uid,Pr(x,!0),q()},V=(x,T,O)=>{T.component=x;const B=x.vnode.props;x.vnode=T,x.next=null,cM(x,T.props,B,O),hM(x,T.children,O),yr(),jp(x),_r()},Y=(x,T,O,B,M,S,k,j,$=!1)=>{const q=x&&x.children,ue=x?x.shapeFlag:0,de=T.children,{patchFlag:ge,shapeFlag:me}=T;if(ge>0){if(ge&128){te(q,de,O,B,M,S,k,j,$);return}else if(ge&256){oe(q,de,O,B,M,S,k,j,$);return}}me&8?(ue&16&&F(q,M,S),de!==q&&u(O,de)):ue&16?me&16?te(q,de,O,B,M,S,k,j,$):F(q,M,S,!0):(ue&8&&u(O,""),me&16&&N(de,O,B,M,S,k,j,$))},oe=(x,T,O,B,M,S,k,j,$)=>{x=x||zs,T=T||zs;const q=x.length,ue=T.length,de=Math.min(q,ue);let ge;for(ge=0;ge<de;ge++){const me=T[ge]=$?Xi(T[ge]):Wn(T[ge]);v(x[ge],me,O,null,M,S,k,j,$)}q>ue?F(x,M,S,!0,!1,de):N(T,O,B,M,S,k,j,$,de)},te=(x,T,O,B,M,S,k,j,$)=>{let q=0;const ue=T.length;let de=x.length-1,ge=ue-1;for(;q<=de&&q<=ge;){const me=x[q],D=T[q]=$?Xi(T[q]):Wn(T[q]);if(Pa(me,D))v(me,D,O,null,M,S,k,j,$);else break;q++}for(;q<=de&&q<=ge;){const me=x[de],D=T[ge]=$?Xi(T[ge]):Wn(T[ge]);if(Pa(me,D))v(me,D,O,null,M,S,k,j,$);else break;de--,ge--}if(q>de){if(q<=ge){const me=ge+1,D=me<ue?T[me].el:B;for(;q<=ge;)v(null,T[q]=$?Xi(T[q]):Wn(T[q]),O,D,M,S,k,j,$),q++}}else if(q>ge)for(;q<=de;)_e(x[q],M,S,!0),q++;else{const me=q,D=q,ve=new Map;for(q=D;q<=ge;q++){const Ue=T[q]=$?Xi(T[q]):Wn(T[q]);Ue.key!=null&&ve.set(Ue.key,q)}let re,be=0;const I=ge-D+1;let xe=!1,Ve=0;const He=new Array(I);for(q=0;q<I;q++)He[q]=0;for(q=me;q<=de;q++){const Ue=x[q];if(be>=I){_e(Ue,M,S,!0);continue}let ct;if(Ue.key!=null)ct=ve.get(Ue.key);else for(re=D;re<=ge;re++)if(He[re-D]===0&&Pa(Ue,T[re])){ct=re;break}ct===void 0?_e(Ue,M,S,!0):(He[ct-D]=q+1,ct>=Ve?Ve=ct:xe=!0,v(Ue,T[ct],O,null,M,S,k,j,$),be++)}const yt=xe?gM(He):zs;for(re=yt.length-1,q=I-1;q>=0;q--){const Ue=D+q,ct=T[Ue],Ht=Ue+1<ue?T[Ue+1].el:B;He[q]===0?v(null,ct,O,Ht,M,S,k,j,$):xe&&(re<0||q!==yt[re]?ie(ct,O,Ht,2):re--)}}},ie=(x,T,O,B,M=null)=>{const{el:S,type:k,transition:j,children:$,shapeFlag:q}=x;if(q&6){ie(x.component.subTree,T,O,B);return}if(q&128){x.suspense.move(T,O,B);return}if(q&64){k.move(x,T,O,ne);return}if(k===dt){i(S,T,O);for(let de=0;de<$.length;de++)ie($[de],T,O,B);i(x.anchor,T,O);return}if(k===mc){_(x,T,O);return}if(B!==2&&q&1&&j)if(B===0)j.beforeEnter(S),i(S,T,O),on(()=>j.enter(S),M);else{const{leave:de,delayLeave:ge,afterLeave:me}=j,D=()=>i(S,T,O),ve=()=>{de(S,()=>{D(),me&&me()})};ge?ge(S,D,ve):ve()}else i(S,T,O)},_e=(x,T,O,B=!1,M=!1)=>{const{type:S,props:k,ref:j,children:$,dynamicChildren:q,shapeFlag:ue,patchFlag:de,dirs:ge}=x;if(j!=null&&lh(j,null,O,x,!0),ue&256){T.ctx.deactivate(x);return}const me=ue&1&&ge,D=!Qa(x);let ve;if(D&&(ve=k&&k.onVnodeBeforeUnmount)&&Vn(ve,T,x),ue&6)Ee(x.component,O,B);else{if(ue&128){x.suspense.unmount(O,B);return}me&&Cr(x,null,T,"beforeUnmount"),ue&64?x.type.remove(x,T,O,M,ne,B):q&&(S!==dt||de>0&&de&64)?F(q,T,O,!1,!0):(S===dt&&de&384||!M&&ue&16)&&F($,T,O),B&&le(x)}(D&&(ve=k&&k.onVnodeUnmounted)||me)&&on(()=>{ve&&Vn(ve,T,x),me&&Cr(x,null,T,"unmounted")},O)},le=x=>{const{type:T,el:O,anchor:B,transition:M}=x;if(T===dt){he(O,B);return}if(T===mc){w(x);return}const S=()=>{r(O),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(x.shapeFlag&1&&M&&!M.persisted){const{leave:k,delayLeave:j}=M,$=()=>k(O,S);j?j(x.el,S,$):$()}else S()},he=(x,T)=>{let O;for(;x!==T;)O=h(x),r(x),x=O;r(T)},Ee=(x,T,O)=>{const{bum:B,scope:M,update:S,subTree:k,um:j}=x;B&&dc(B),M.stop(),S&&(S.active=!1,_e(k,x,T,O)),j&&on(j,T),on(()=>{x.isUnmounted=!0},T),T&&T.pendingBranch&&!T.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===T.pendingId&&(T.deps--,T.deps===0&&T.resolve())},F=(x,T,O,B=!1,M=!1,S=0)=>{for(let k=S;k<x.length;k++)_e(x[k],T,O,B,M)},U=x=>x.shapeFlag&6?U(x.component.subTree):x.shapeFlag&128?x.suspense.next():h(x.anchor||x.el);let ae=!1;const X=(x,T,O)=>{x==null?T._vnode&&_e(T._vnode,null,null,!0):v(T._vnode||null,x,T,null,null,null,O),ae||(ae=!0,jp(),ky(),ae=!1),T._vnode=x},ne={p:v,um:_e,m:ie,r:le,mt:z,mc:N,pc:Y,pbc:H,n:U,o:n};let we,Q;return{render:X,hydrate:we,createApp:oM(X,we)}}function Yu({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Pr({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function mM(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function o_(n,e,t=!1){const i=n.children,r=e.children;if(Ie(i)&&Ie(r))for(let s=0;s<i.length;s++){const a=i[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=Xi(r[s]),o.el=a.el),t||o_(a,o)),o.type===su&&(o.el=a.el)}}function gM(n){const e=n.slice(),t=[0];let i,r,s,a,o;const l=n.length;for(i=0;i<l;i++){const c=n[i];if(c!==0){if(r=t[t.length-1],n[r]<c){e[i]=r,t.push(i);continue}for(s=0,a=t.length-1;s<a;)o=s+a>>1,n[t[o]]<c?s=o+1:a=o;c<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}function l_(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:l_(e)}const vM=n=>n.__isTeleport,dt=Symbol.for("v-fgt"),su=Symbol.for("v-txt"),cr=Symbol.for("v-cmt"),mc=Symbol.for("v-stc"),io=[];let On=null;function Me(n=!1){io.push(On=n?null:[])}function yM(){io.pop(),On=io[io.length-1]||null}let bo=1;function nm(n){bo+=n}function c_(n){return n.dynamicChildren=bo>0?On||zs:null,yM(),bo>0&&On&&On.push(n),n}function Pe(n,e,t,i,r,s){return c_(Z(n,e,t,i,r,s,!0))}function Rt(n,e,t,i,r){return c_(Re(n,e,t,i,r,!0))}function Nc(n){return n?n.__v_isVNode===!0:!1}function Pa(n,e){return n.type===e.type&&n.key===e.key}const u_=({key:n})=>n??null,gc=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Lt(n)||nn(n)||Be(n)?{i:Ut,r:n,k:e,f:!!t}:n:null);function Z(n,e=null,t=null,i=0,r=null,s=n===dt?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&u_(e),ref:e&&gc(e),scopeId:zy,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ut};return o?(yd(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=Lt(t)?8:16),bo>0&&!a&&On&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&On.push(l),l}const Re=_M;function _M(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===Hy)&&(n=cr),Nc(n)){const o=Zs(n,e,!0);return t&&yd(o,t),bo>0&&!s&&On&&(o.shapeFlag&6?On[On.indexOf(n)]=o:On.push(o)),o.patchFlag|=-2,o}if(PM(n)&&(n=n.__vccOpts),e){e=xM(e);let{class:o,style:l}=e;o&&!Lt(o)&&(e.class=eu(o)),lt(l)&&(Cy(l)&&!Ie(l)&&(l=zt({},l)),e.style=rd(l))}const a=Lt(n)?1:zw(n)?128:vM(n)?64:lt(n)?4:Be(n)?2:0;return Z(n,e,t,i,r,a,s,!0)}function xM(n){return n?Cy(n)||t_(n)?zt({},n):n:null}function Zs(n,e,t=!1,i=!1){const{props:r,ref:s,patchFlag:a,children:o,transition:l}=n,c=e?wM(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&u_(c),ref:e&&e.ref?t&&s?Ie(s)?s.concat(gc(e)):[s,gc(e)]:gc(e):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:o,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==dt?a===-1?16:a|16:a,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Zs(n.ssContent),ssFallback:n.ssFallback&&Zs(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&(u.transition=l.clone(u)),u}function Fn(n=" ",e=0){return Re(su,null,n,e)}function bM(n,e){const t=Re(mc,null,n);return t.staticCount=e,t}function xn(n="",e=!1){return e?(Me(),Rt(cr,null,n)):Re(cr,null,n)}function Wn(n){return n==null||typeof n=="boolean"?Re(cr):Ie(n)?Re(dt,null,n.slice()):typeof n=="object"?Xi(n):Re(su,null,String(n))}function Xi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Zs(n)}function yd(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(Ie(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),yd(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!t_(e)?e._ctx=Ut:r===3&&Ut&&(Ut.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Be(e)?(e={default:e,_ctx:Ut},t=32):(e=String(e),i&64?(t=16,e=[Fn(e)]):t=8);n.children=e,n.shapeFlag|=t}function wM(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=eu([e.class,i.class]));else if(r==="style")e.style=rd([e.style,i.style]);else if(Kc(r)){const s=e[r],a=i[r];a&&s!==a&&!(Ie(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=i[r])}return e}function Vn(n,e,t,i=null){Bn(n,e,7,[t,i])}const MM=Jy();let SM=0;function EM(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||MM,s={uid:SM++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new Jb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:i_(i,r),emitsOptions:By(i,r),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:i.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Dw.bind(null,s),n.ce&&n.ce(s),s}let Yt=null,Dc,ch;{const n=py(),e=(t,i)=>{let r;return(r=n[t])||(r=n[t]=[]),r.push(i),s=>{r.length>1?r.forEach(a=>a(s)):r[0](s)}};Dc=e("__VUE_INSTANCE_SETTERS__",t=>Yt=t),ch=e("__VUE_SSR_SETTERS__",t=>au=t)}const Ko=n=>{const e=Yt;return Dc(n),n.scope.on(),()=>{n.scope.off(),Dc(e)}},im=()=>{Yt&&Yt.scope.off(),Dc(null)};function f_(n){return n.vnode.shapeFlag&4}let au=!1;function TM(n,e=!1){e&&ch(e);const{props:t,children:i}=n.vnode,r=f_(n);lM(n,t,r,e),fM(n,i);const s=r?AM(n,e):void 0;return e&&ch(!1),s}function AM(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,eM);const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?LM(n):null,s=Ko(n);yr();const a=nr(i,n,0,[n.props,r]);if(_r(),s(),uy(a)){if(a.then(im,im),e)return a.then(o=>{rm(n,o,e)}).catch(o=>{nu(o,n,0)});n.asyncDep=a}else rm(n,a,e)}else h_(n,e)}function rm(n,e,t){Be(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:lt(e)&&(n.setupState=Dy(e)),h_(n,t)}let sm;function h_(n,e,t){const i=n.type;if(!n.render){if(!e&&sm&&!i.render){const r=i.template||gd(n).template;if(r){const{isCustomElement:s,compilerOptions:a}=n.appContext.config,{delimiters:o,compilerOptions:l}=i,c=zt(zt({isCustomElement:s,delimiters:o},a),l);i.render=sm(r,c)}}n.render=i.render||_n}{const r=Ko(n);yr();try{tM(n)}finally{_r(),r()}}}const RM={get(n,e){return fn(n,"get",""),n[e]}};function LM(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,RM),slots:n.slots,emit:n.emit,expose:e}}function ou(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(Dy(bw(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in eo)return eo[t](n)},has(e,t){return t in e||t in eo}}))}function CM(n,e=!0){return Be(n)?n.displayName||n.name:n.name||e&&n.__name}function PM(n){return Be(n)&&"__vccOpts"in n}const Tt=(n,e)=>ww(n,e,au);function _d(n,e,t){const i=arguments.length;return i===2?lt(e)&&!Ie(e)?Nc(e)?Re(n,null,[e]):Re(n,e):Re(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Nc(t)&&(t=[t]),Re(n,e,t))}const IM="3.4.26";/**
* @vue/runtime-dom v3.4.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const NM="http://www.w3.org/2000/svg",DM="http://www.w3.org/1998/Math/MathML",Yi=typeof document<"u"?document:null,am=Yi&&Yi.createElement("template"),OM={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e==="svg"?Yi.createElementNS(NM,n):e==="mathml"?Yi.createElementNS(DM,n):Yi.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>Yi.createTextNode(n),createComment:n=>Yi.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Yi.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const a=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{am.innerHTML=i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n;const o=am.content;if(i==="svg"||i==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},FM=Symbol("_vtc");function kM(n,e,t){const i=n[FM];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const om=Symbol("_vod"),UM=Symbol("_vsh"),BM=Symbol(""),zM=/(^|;)\s*display\s*:/;function HM(n,e,t){const i=n.style,r=Lt(t);let s=!1;if(t&&!r){if(e)if(Lt(e))for(const a of e.split(";")){const o=a.slice(0,a.indexOf(":")).trim();t[o]==null&&vc(i,o,"")}else for(const a in e)t[a]==null&&vc(i,a,"");for(const a in t)a==="display"&&(s=!0),vc(i,a,t[a])}else if(r){if(e!==t){const a=i[BM];a&&(t+=";"+a),i.cssText=t,s=zM.test(t)}}else e&&n.removeAttribute("style");om in n&&(n[om]=s?i.display:"",n[UM]&&(i.display="none"))}const lm=/\s*!important$/;function vc(n,e,t){if(Ie(t))t.forEach(i=>vc(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=VM(n,e);lm.test(t)?n.setProperty(ha(i),t.replace(lm,""),"important"):n[i]=t}}const cm=["Webkit","Moz","ms"],Ku={};function VM(n,e){const t=Ku[e];if(t)return t;let i=Kn(e);if(i!=="filter"&&i in n)return Ku[e]=i;i=Qc(i);for(let r=0;r<cm.length;r++){const s=cm[r]+i;if(s in n)return Ku[e]=s}return e}const um="http://www.w3.org/1999/xlink";function GM(n,e,t,i,r){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(um,e.slice(6,e.length)):n.setAttributeNS(um,e,t);else{const s=Yb(e);t==null||s&&!my(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function WM(n,e,t,i,r,s,a){if(e==="innerHTML"||e==="textContent"){i&&a(i,r,s),n[e]=t??"";return}const o=n.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const c=o==="OPTION"?n.getAttribute("value")||"":n.value,u=t??"";(c!==u||!("_value"in n))&&(n.value=u),t==null&&n.removeAttribute(e),n._value=t;return}let l=!1;if(t===""||t==null){const c=typeof n[e];c==="boolean"?t=my(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function Zi(n,e,t,i){n.addEventListener(e,t,i)}function jM(n,e,t,i){n.removeEventListener(e,t,i)}const fm=Symbol("_vei");function $M(n,e,t,i,r=null){const s=n[fm]||(n[fm]={}),a=s[e];if(i&&a)a.value=i;else{const[o,l]=qM(e);if(i){const c=s[e]=KM(i,r);Zi(n,o,c,l)}else a&&(jM(n,o,a,l),s[e]=void 0)}}const hm=/(?:Once|Passive|Capture)$/;function qM(n){let e;if(hm.test(n)){e={};let i;for(;i=n.match(hm);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):ha(n.slice(2)),e]}let Zu=0;const XM=Promise.resolve(),YM=()=>Zu||(XM.then(()=>Zu=0),Zu=Date.now());function KM(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Bn(ZM(i,t.value),e,5,[i])};return t.value=n,t.attached=YM(),t}function ZM(n,e){if(Ie(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const dm=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,JM=(n,e,t,i,r,s,a,o,l)=>{const c=r==="svg";e==="class"?kM(n,i,c):e==="style"?HM(n,t,i):Kc(e)?td(e)||$M(n,e,t,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):QM(n,e,i,c))?WM(n,e,i,s,a,o,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),GM(n,e,i,c))};function QM(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&dm(e)&&Be(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return dm(e)&&Lt(t)?!1:e in n}const Js=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Ie(e)?t=>dc(e,t):e};function eS(n){n.target.composing=!0}function pm(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bi=Symbol("_assign"),Pt={created(n,{modifiers:{lazy:e,trim:t,number:i}},r){n[bi]=Js(r);const s=i||r.props&&r.props.type==="number";Zi(n,e?"change":"input",a=>{if(a.target.composing)return;let o=n.value;t&&(o=o.trim()),s&&(o=Ac(o)),n[bi](o)}),t&&Zi(n,"change",()=>{n.value=n.value.trim()}),e||(Zi(n,"compositionstart",eS),Zi(n,"compositionend",pm),Zi(n,"change",pm))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:i,number:r}},s){if(n[bi]=Js(s),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?Ac(n.value):n.value,o=e??"";a!==o&&(document.activeElement===n&&n.type!=="range"&&(t||i&&n.value.trim()===o)||(n.value=o))}},Sl={created(n,{value:e},t){n.checked=Ys(e,t.props.value),n[bi]=Js(t),Zi(n,"change",()=>{n[bi](wo(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n[bi]=Js(i),e!==t&&(n.checked=Ys(e,i.props.value))}},tS={deep:!0,created(n,{value:e,modifiers:{number:t}},i){const r=Zc(e);Zi(n,"change",()=>{const s=Array.prototype.filter.call(n.options,a=>a.selected).map(a=>t?Ac(wo(a)):wo(a));n[bi](n.multiple?r?new Set(s):s:s[0]),n._assigning=!0,dd(()=>{n._assigning=!1})}),n[bi]=Js(i)},mounted(n,{value:e,modifiers:{number:t}}){mm(n,e)},beforeUpdate(n,e,t){n[bi]=Js(t)},updated(n,{value:e,modifiers:{number:t}}){n._assigning||mm(n,e)}};function mm(n,e,t){const i=n.multiple,r=Ie(e);if(!(i&&!r&&!Zc(e))){for(let s=0,a=n.options.length;s<a;s++){const o=n.options[s],l=wo(o);if(i)if(r){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=Zb(e,l)>-1}else o.selected=e.has(l);else if(Ys(wo(o),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!i&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function wo(n){return"_value"in n?n._value:n.value}const nS=["ctrl","shift","alt","meta"],iS={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>nS.some(t=>n[`${t}Key`]&&!e.includes(t))},lu=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=(r,...s)=>{for(let a=0;a<e.length;a++){const o=iS[e[a]];if(o&&o(r,e))return}return n(r,...s)})},rS=zt({patchProp:JM},OM);let gm;function sS(){return gm||(gm=dM(rS))}const aS=(...n)=>{const e=sS().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=lS(i);if(!r)return;const s=e._component;!Be(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=t(r,!1,oS(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function oS(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function lS(n){return Lt(n)?document.querySelector(n):n}const d_=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},cS={};function uS(n,e){const t=is("router-view");return Me(),Rt(t)}const fS=d_(cS,[["render",uS]]);/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const Cs=typeof document<"u";function hS(n){return n.__esModule||n[Symbol.toStringTag]==="Module"}const it=Object.assign;function Ju(n,e){const t={};for(const i in e){const r=e[i];t[i]=zn(r)?r.map(n):n(r)}return t}const ro=()=>{},zn=Array.isArray,p_=/#/g,dS=/&/g,pS=/\//g,mS=/=/g,gS=/\?/g,m_=/\+/g,vS=/%5B/g,yS=/%5D/g,g_=/%5E/g,_S=/%60/g,v_=/%7B/g,xS=/%7C/g,y_=/%7D/g,bS=/%20/g;function xd(n){return encodeURI(""+n).replace(xS,"|").replace(vS,"[").replace(yS,"]")}function wS(n){return xd(n).replace(v_,"{").replace(y_,"}").replace(g_,"^")}function uh(n){return xd(n).replace(m_,"%2B").replace(bS,"+").replace(p_,"%23").replace(dS,"%26").replace(_S,"`").replace(v_,"{").replace(y_,"}").replace(g_,"^")}function MS(n){return uh(n).replace(mS,"%3D")}function SS(n){return xd(n).replace(p_,"%23").replace(gS,"%3F")}function ES(n){return n==null?"":SS(n).replace(pS,"%2F")}function Mo(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const TS=/\/$/,AS=n=>n.replace(TS,"");function Qu(n,e,t="/"){let i,r={},s="",a="";const o=e.indexOf("#");let l=e.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,o>-1?o:e.length),r=n(s)),o>-1&&(i=i||e.slice(0,o),a=e.slice(o,e.length)),i=PS(i??e,t),{fullPath:i+(s&&"?")+s+a,path:i,query:r,hash:Mo(a)}}function RS(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function vm(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function LS(n,e,t){const i=e.matched.length-1,r=t.matched.length-1;return i>-1&&i===r&&Qs(e.matched[i],t.matched[r])&&__(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Qs(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function __(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!CS(n[t],e[t]))return!1;return!0}function CS(n,e){return zn(n)?ym(n,e):zn(e)?ym(e,n):n===e}function ym(n,e){return zn(e)?n.length===e.length&&n.every((t,i)=>t===e[i]):n.length===1&&n[0]===e}function PS(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),i=n.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=t.length-1,a,o;for(a=0;a<i.length;a++)if(o=i[a],o!==".")if(o==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+i.slice(a).join("/")}var So;(function(n){n.pop="pop",n.push="push"})(So||(So={}));var so;(function(n){n.back="back",n.forward="forward",n.unknown=""})(so||(so={}));function IS(n){if(!n)if(Cs){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),AS(n)}const NS=/^[^#]+#/;function DS(n,e){return n.replace(NS,"#")+e}function OS(n,e){const t=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const cu=()=>({left:window.scrollX,top:window.scrollY});function FS(n){let e;if("el"in n){const t=n.el,i=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=OS(r,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function _m(n,e){return(history.state?history.state.position-e:-1)+n}const fh=new Map;function kS(n,e){fh.set(n,e)}function US(n){const e=fh.get(n);return fh.delete(n),e}let BS=()=>location.protocol+"//"+location.host;function x_(n,e){const{pathname:t,search:i,hash:r}=e,s=n.indexOf("#");if(s>-1){let o=r.includes(n.slice(s))?n.slice(s).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),vm(l,"")}return vm(t,n)+i+r}function zS(n,e,t,i){let r=[],s=[],a=null;const o=({state:h})=>{const d=x_(n,location),g=t.value,v=e.value;let y=0;if(h){if(t.value=d,e.value=h,a&&a===g){a=null;return}y=v?h.position-v.position:0}else i(d);r.forEach(p=>{p(t.value,g,{delta:y,type:So.pop,direction:y?y>0?so.forward:so.back:so.unknown})})};function l(){a=t.value}function c(h){r.push(h);const d=()=>{const g=r.indexOf(h);g>-1&&r.splice(g,1)};return s.push(d),d}function u(){const{history:h}=window;h.state&&h.replaceState(it({},h.state,{scroll:cu()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function xm(n,e,t,i=!1,r=!1){return{back:n,current:e,forward:t,replaced:i,position:window.history.length,scroll:r?cu():null}}function HS(n){const{history:e,location:t}=window,i={value:x_(n,t)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const f=n.indexOf("#"),h=f>-1?(t.host&&document.querySelector("base")?n:n.slice(f))+l:BS()+n+l;try{e[u?"replaceState":"pushState"](c,"",h),r.value=c}catch(d){console.error(d),t[u?"replace":"assign"](h)}}function a(l,c){const u=it({},e.state,xm(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function o(l,c){const u=it({},r.value,e.state,{forward:l,scroll:cu()});s(u.current,u,!0);const f=it({},xm(i.value,l,null),{position:u.position+1},c);s(l,f,!1),i.value=l}return{location:i,state:r,push:o,replace:a}}function VS(n){n=IS(n);const e=HS(n),t=zS(n,e.state,e.location,e.replace);function i(s,a=!0){a||t.pauseListeners(),history.go(s)}const r=it({location:"",base:n,go:i,createHref:DS.bind(null,n)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function GS(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),VS(n)}function WS(n){return typeof n=="string"||n&&typeof n=="object"}function b_(n){return typeof n=="string"||typeof n=="symbol"}const Oi={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},w_=Symbol("");var bm;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(bm||(bm={}));function ea(n,e){return it(new Error,{type:n,[w_]:!0},e)}function si(n,e){return n instanceof Error&&w_ in n&&(e==null||!!(n.type&e))}const wm="[^/]+?",jS={sensitive:!1,strict:!1,start:!0,end:!0},$S=/[.+*?^${}()[\]/\\]/g;function qS(n,e){const t=it({},jS,e),i=[];let r=t.start?"^":"";const s=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const h=c[f];let d=40+(t.sensitive?.25:0);if(h.type===0)f||(r+="/"),r+=h.value.replace($S,"\\$&"),d+=40;else if(h.type===1){const{value:g,repeatable:v,optional:y,regexp:p}=h;s.push({name:g,repeatable:v,optional:y});const m=p||wm;if(m!==wm){d+=10;try{new RegExp(`(${m})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${g}" (${m}): `+w.message)}}let _=v?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;f||(_=y&&c.length<2?`(?:/${_})`:"/"+_),y&&(_+="?"),r+=_,d+=20,y&&(d+=-8),v&&(d+=-20),m===".*"&&(d+=-50)}u.push(d)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const a=new RegExp(r,t.sensitive?"":"i");function o(c){const u=c.match(a),f={};if(!u)return null;for(let h=1;h<u.length;h++){const d=u[h]||"",g=s[h-1];f[g.name]=d&&g.repeatable?d.split("/"):d}return f}function l(c){let u="",f=!1;for(const h of n){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const d of h)if(d.type===0)u+=d.value;else if(d.type===1){const{value:g,repeatable:v,optional:y}=d,p=g in c?c[g]:"";if(zn(p)&&!v)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const m=zn(p)?p.join("/"):p;if(!m)if(y)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${g}"`);u+=m}}return u||"/"}return{re:a,score:i,keys:s,parse:o,stringify:l}}function XS(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=e[t]-n[t];if(i)return i;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function YS(n,e){let t=0;const i=n.score,r=e.score;for(;t<i.length&&t<r.length;){const s=XS(i[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-i.length)===1){if(Mm(i))return 1;if(Mm(r))return-1}return r.length-i.length}function Mm(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const KS={type:0,value:""},ZS=/[a-zA-Z0-9_]/;function JS(n){if(!n)return[[]];if(n==="/")return[[KS]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(d){throw new Error(`ERR (${t})/"${c}": ${d}`)}let t=0,i=t;const r=[];let s;function a(){s&&r.push(s),s=[]}let o=0,l,c="",u="";function f(){c&&(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;o<n.length;){if(l=n[o++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&f(),a()):l===":"?(f(),t=1):h();break;case 4:h(),t=i;break;case 1:l==="("?t=2:ZS.test(l)?h():(f(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:f(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&o--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),a(),r}function QS(n,e,t){const i=qS(JS(n.path),t),r=it(i,{record:n,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function e1(n,e){const t=[],i=new Map;e=Tm({strict:!1,end:!0,sensitive:!1},e);function r(u){return i.get(u)}function s(u,f,h){const d=!h,g=t1(u);g.aliasOf=h&&h.record;const v=Tm(e,u),y=[g];if("alias"in u){const _=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of _)y.push(it({},g,{components:h?h.record.components:g.components,path:w,aliasOf:h?h.record:g}))}let p,m;for(const _ of y){const{path:w}=_;if(f&&w[0]!=="/"){const E=f.record.path,A=E[E.length-1]==="/"?"":"/";_.path=f.record.path+(w&&A+w)}if(p=QS(_,f,v),h?h.alias.push(p):(m=m||p,m!==p&&m.alias.push(p),d&&u.name&&!Em(p)&&a(u.name)),g.children){const E=g.children;for(let A=0;A<E.length;A++)s(E[A],p,h&&h.children[A])}h=h||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&l(p)}return m?()=>{a(m)}:ro}function a(u){if(b_(u)){const f=i.get(u);f&&(i.delete(u),t.splice(t.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=t.indexOf(u);f>-1&&(t.splice(f,1),u.record.name&&i.delete(u.record.name),u.children.forEach(a),u.alias.forEach(a))}}function o(){return t}function l(u){let f=0;for(;f<t.length&&YS(u,t[f])>=0&&(u.record.path!==t[f].record.path||!M_(u,t[f]));)f++;t.splice(f,0,u),u.record.name&&!Em(u)&&i.set(u.record.name,u)}function c(u,f){let h,d={},g,v;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw ea(1,{location:u});v=h.record.name,d=it(Sm(f.params,h.keys.filter(m=>!m.optional).concat(h.parent?h.parent.keys.filter(m=>m.optional):[]).map(m=>m.name)),u.params&&Sm(u.params,h.keys.map(m=>m.name))),g=h.stringify(d)}else if(u.path!=null)g=u.path,h=t.find(m=>m.re.test(g)),h&&(d=h.parse(g),v=h.record.name);else{if(h=f.name?i.get(f.name):t.find(m=>m.re.test(f.path)),!h)throw ea(1,{location:u,currentLocation:f});v=h.record.name,d=it({},f.params,u.params),g=h.stringify(d)}const y=[];let p=h;for(;p;)y.unshift(p.record),p=p.parent;return{name:v,path:g,params:d,matched:y,meta:i1(y)}}return n.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:a,getRoutes:o,getRecordMatcher:r}}function Sm(n,e){const t={};for(const i of e)i in n&&(t[i]=n[i]);return t}function t1(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:n1(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}}}function n1(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const i in n.components)e[i]=typeof t=="object"?t[i]:t;return e}function Em(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function i1(n){return n.reduce((e,t)=>it(e,t.meta),{})}function Tm(n,e){const t={};for(const i in n)t[i]=i in e?e[i]:n[i];return t}function M_(n,e){return e.children.some(t=>t===n||M_(n,t))}function r1(n){const e={};if(n===""||n==="?")return e;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(m_," "),a=s.indexOf("="),o=Mo(a<0?s:s.slice(0,a)),l=a<0?null:Mo(s.slice(a+1));if(o in e){let c=e[o];zn(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function Am(n){let e="";for(let t in n){const i=n[t];if(t=MS(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(zn(i)?i.map(s=>s&&uh(s)):[i&&uh(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function s1(n){const e={};for(const t in n){const i=n[t];i!==void 0&&(e[t]=zn(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const a1=Symbol(""),Rm=Symbol(""),uu=Symbol(""),bd=Symbol(""),hh=Symbol("");function Ia(){let n=[];function e(i){return n.push(i),()=>{const r=n.indexOf(i);r>-1&&n.splice(r,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Ki(n,e,t,i,r,s=a=>a()){const a=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,l)=>{const c=h=>{h===!1?l(ea(4,{from:t,to:e})):h instanceof Error?l(h):WS(h)?l(ea(2,{from:e,to:h})):(a&&i.enterCallbacks[r]===a&&typeof h=="function"&&a.push(h),o())},u=s(()=>n.call(i&&i.instances[r],e,t,c));let f=Promise.resolve(u);n.length<3&&(f=f.then(c)),f.catch(h=>l(h))})}function ef(n,e,t,i,r=s=>s()){const s=[];for(const a of n)for(const o in a.components){let l=a.components[o];if(!(e!=="beforeRouteEnter"&&!a.instances[o]))if(o1(l)){const u=(l.__vccOpts||l)[e];u&&s.push(Ki(u,t,i,a,o,r))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${a.path}"`));const f=hS(u)?u.default:u;a.components[o]=f;const d=(f.__vccOpts||f)[e];return d&&Ki(d,t,i,a,o,r)()}))}}return s}function o1(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Lm(n){const e=wn(uu),t=wn(bd),i=Tt(()=>{const l=Oe(n.to);return e.resolve(l)}),r=Tt(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],f=t.matched;if(!u||!f.length)return-1;const h=f.findIndex(Qs.bind(null,u));if(h>-1)return h;const d=Cm(l[c-2]);return c>1&&Cm(u)===d&&f[f.length-1].path!==d?f.findIndex(Qs.bind(null,l[c-2])):h}),s=Tt(()=>r.value>-1&&u1(t.params,i.value.params)),a=Tt(()=>r.value>-1&&r.value===t.matched.length-1&&__(t.params,i.value.params));function o(l={}){return c1(l)?e[Oe(n.replace)?"replace":"push"](Oe(n.to)).catch(ro):Promise.resolve()}return{route:i,href:Tt(()=>i.value.href),isActive:s,isExactActive:a,navigate:o}}const l1=da({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Lm,setup(n,{slots:e}){const t=Yo(Lm(n)),{options:i}=wn(uu),r=Tt(()=>({[Pm(n.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[Pm(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return n.custom?s:_d("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),S_=l1;function c1(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function u1(n,e){for(const t in e){const i=e[t],r=n[t];if(typeof i=="string"){if(i!==r)return!1}else if(!zn(r)||r.length!==i.length||i.some((s,a)=>s!==r[a]))return!1}return!0}function Cm(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Pm=(n,e,t)=>n??e??t,f1=da({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const i=wn(hh),r=Tt(()=>n.route||i.value),s=wn(Rm,0),a=Tt(()=>{let c=Oe(s);const{matched:u}=r.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),o=Tt(()=>r.value.matched[a.value]);no(Rm,Tt(()=>a.value+1)),no(a1,o),no(hh,r);const l=Fe();return Wr(()=>[l.value,o.value,n.name],([c,u,f],[h,d,g])=>{u&&(u.instances[f]=c,d&&d!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=d.leaveGuards),u.updateGuards.size||(u.updateGuards=d.updateGuards))),c&&u&&(!d||!Qs(u,d)||!h)&&(u.enterCallbacks[f]||[]).forEach(v=>v(c))},{flush:"post"}),()=>{const c=r.value,u=n.name,f=o.value,h=f&&f.components[u];if(!h)return Im(t.default,{Component:h,route:c});const d=f.props[u],g=d?d===!0?c.params:typeof d=="function"?d(c):d:null,y=_d(h,it({},g,e,{onVnodeUnmounted:p=>{p.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return Im(t.default,{Component:y,route:c})||y}}});function Im(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const h1=f1;function d1(n){const e=e1(n.routes,n),t=n.parseQuery||r1,i=n.stringifyQuery||Am,r=n.history,s=Ia(),a=Ia(),o=Ia(),l=Mw(Oi);let c=Oi;Cs&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Ju.bind(null,U=>""+U),f=Ju.bind(null,ES),h=Ju.bind(null,Mo);function d(U,ae){let X,ne;return b_(U)?(X=e.getRecordMatcher(U),ne=ae):ne=U,e.addRoute(ne,X)}function g(U){const ae=e.getRecordMatcher(U);ae&&e.removeRoute(ae)}function v(){return e.getRoutes().map(U=>U.record)}function y(U){return!!e.getRecordMatcher(U)}function p(U,ae){if(ae=it({},ae||l.value),typeof U=="string"){const T=Qu(t,U,ae.path),O=e.resolve({path:T.path},ae),B=r.createHref(T.fullPath);return it(T,O,{params:h(O.params),hash:Mo(T.hash),redirectedFrom:void 0,href:B})}let X;if(U.path!=null)X=it({},U,{path:Qu(t,U.path,ae.path).path});else{const T=it({},U.params);for(const O in T)T[O]==null&&delete T[O];X=it({},U,{params:f(T)}),ae.params=f(ae.params)}const ne=e.resolve(X,ae),we=U.hash||"";ne.params=u(h(ne.params));const Q=RS(i,it({},U,{hash:wS(we),path:ne.path})),x=r.createHref(Q);return it({fullPath:Q,hash:we,query:i===Am?s1(U.query):U.query||{}},ne,{redirectedFrom:void 0,href:x})}function m(U){return typeof U=="string"?Qu(t,U,l.value.path):it({},U)}function _(U,ae){if(c!==U)return ea(8,{from:ae,to:U})}function w(U){return b(U)}function E(U){return w(it(m(U),{replace:!0}))}function A(U){const ae=U.matched[U.matched.length-1];if(ae&&ae.redirect){const{redirect:X}=ae;let ne=typeof X=="function"?X(U):X;return typeof ne=="string"&&(ne=ne.includes("?")||ne.includes("#")?ne=m(ne):{path:ne},ne.params={}),it({query:U.query,hash:U.hash,params:ne.path!=null?{}:U.params},ne)}}function b(U,ae){const X=c=p(U),ne=l.value,we=U.state,Q=U.force,x=U.replace===!0,T=A(X);if(T)return b(it(m(T),{state:typeof T=="object"?it({},we,T.state):we,force:Q,replace:x}),ae||X);const O=X;O.redirectedFrom=ae;let B;return!Q&&LS(i,ne,X)&&(B=ea(16,{to:O,from:ne}),ie(ne,ne,!0,!1)),(B?Promise.resolve(B):H(O,ne)).catch(M=>si(M)?si(M,2)?M:te(M):Y(M,O,ne)).then(M=>{if(M){if(si(M,2))return b(it({replace:x},m(M.to),{state:typeof M.to=="object"?it({},we,M.to.state):we,force:Q}),ae||O)}else M=J(O,ne,!0,x,we);return R(O,ne,M),M})}function N(U,ae){const X=_(U,ae);return X?Promise.reject(X):Promise.resolve()}function K(U){const ae=he.values().next().value;return ae&&typeof ae.runWithContext=="function"?ae.runWithContext(U):U()}function H(U,ae){let X;const[ne,we,Q]=p1(U,ae);X=ef(ne.reverse(),"beforeRouteLeave",U,ae);for(const T of ne)T.leaveGuards.forEach(O=>{X.push(Ki(O,U,ae))});const x=N.bind(null,U,ae);return X.push(x),F(X).then(()=>{X=[];for(const T of s.list())X.push(Ki(T,U,ae));return X.push(x),F(X)}).then(()=>{X=ef(we,"beforeRouteUpdate",U,ae);for(const T of we)T.updateGuards.forEach(O=>{X.push(Ki(O,U,ae))});return X.push(x),F(X)}).then(()=>{X=[];for(const T of Q)if(T.beforeEnter)if(zn(T.beforeEnter))for(const O of T.beforeEnter)X.push(Ki(O,U,ae));else X.push(Ki(T.beforeEnter,U,ae));return X.push(x),F(X)}).then(()=>(U.matched.forEach(T=>T.enterCallbacks={}),X=ef(Q,"beforeRouteEnter",U,ae,K),X.push(x),F(X))).then(()=>{X=[];for(const T of a.list())X.push(Ki(T,U,ae));return X.push(x),F(X)}).catch(T=>si(T,8)?T:Promise.reject(T))}function R(U,ae,X){o.list().forEach(ne=>K(()=>ne(U,ae,X)))}function J(U,ae,X,ne,we){const Q=_(U,ae);if(Q)return Q;const x=ae===Oi,T=Cs?history.state:{};X&&(ne||x?r.replace(U.fullPath,it({scroll:x&&T&&T.scroll},we)):r.push(U.fullPath,we)),l.value=U,ie(U,ae,X,x),te()}let P;function z(){P||(P=r.listen((U,ae,X)=>{if(!Ee.listening)return;const ne=p(U),we=A(ne);if(we){b(it(we,{replace:!0}),ne).catch(ro);return}c=ne;const Q=l.value;Cs&&kS(_m(Q.fullPath,X.delta),cu()),H(ne,Q).catch(x=>si(x,12)?x:si(x,2)?(b(x.to,ne).then(T=>{si(T,20)&&!X.delta&&X.type===So.pop&&r.go(-1,!1)}).catch(ro),Promise.reject()):(X.delta&&r.go(-X.delta,!1),Y(x,ne,Q))).then(x=>{x=x||J(ne,Q,!1),x&&(X.delta&&!si(x,8)?r.go(-X.delta,!1):X.type===So.pop&&si(x,20)&&r.go(-1,!1)),R(ne,Q,x)}).catch(ro)}))}let G=Ia(),W=Ia(),V;function Y(U,ae,X){te(U);const ne=W.list();return ne.length?ne.forEach(we=>we(U,ae,X)):console.error(U),Promise.reject(U)}function oe(){return V&&l.value!==Oi?Promise.resolve():new Promise((U,ae)=>{G.add([U,ae])})}function te(U){return V||(V=!U,z(),G.list().forEach(([ae,X])=>U?X(U):ae()),G.reset()),U}function ie(U,ae,X,ne){const{scrollBehavior:we}=n;if(!Cs||!we)return Promise.resolve();const Q=!X&&US(_m(U.fullPath,0))||(ne||!X)&&history.state&&history.state.scroll||null;return dd().then(()=>we(U,ae,Q)).then(x=>x&&FS(x)).catch(x=>Y(x,U,ae))}const _e=U=>r.go(U);let le;const he=new Set,Ee={currentRoute:l,listening:!0,addRoute:d,removeRoute:g,hasRoute:y,getRoutes:v,resolve:p,options:n,push:w,replace:E,go:_e,back:()=>_e(-1),forward:()=>_e(1),beforeEach:s.add,beforeResolve:a.add,afterEach:o.add,onError:W.add,isReady:oe,install(U){const ae=this;U.component("RouterLink",S_),U.component("RouterView",h1),U.config.globalProperties.$router=ae,Object.defineProperty(U.config.globalProperties,"$route",{enumerable:!0,get:()=>Oe(l)}),Cs&&!le&&l.value===Oi&&(le=!0,w(r.location).catch(we=>{}));const X={};for(const we in Oi)Object.defineProperty(X,we,{get:()=>l.value[we],enumerable:!0});U.provide(uu,ae),U.provide(bd,Ry(X)),U.provide(hh,l);const ne=U.unmount;he.add(U),U.unmount=function(){he.delete(U),he.size<1&&(c=Oi,P&&P(),P=null,l.value=Oi,le=!1,V=!1),ne()}}};function F(U){return U.reduce((ae,X)=>ae.then(()=>K(X)),Promise.resolve())}return Ee}function p1(n,e){const t=[],i=[],r=[],s=Math.max(e.matched.length,n.matched.length);for(let a=0;a<s;a++){const o=e.matched[a];o&&(n.matched.find(c=>Qs(c,o))?i.push(o):t.push(o));const l=n.matched[a];l&&(e.matched.find(c=>Qs(c,l))||r.push(l))}return[t,i,r]}function fu(){return wn(uu)}function E_(){return wn(bd)}function T_(n,e){return function(){return n.apply(e,arguments)}}const{toString:m1}=Object.prototype,{getPrototypeOf:wd}=Object,hu=(n=>e=>{const t=m1.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ni=n=>(n=n.toLowerCase(),e=>hu(e)===n),du=n=>e=>typeof e===n,{isArray:pa}=Array,Eo=du("undefined");function g1(n){return n!==null&&!Eo(n)&&n.constructor!==null&&!Eo(n.constructor)&&Mn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const A_=ni("ArrayBuffer");function v1(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&A_(n.buffer),e}const y1=du("string"),Mn=du("function"),R_=du("number"),pu=n=>n!==null&&typeof n=="object",_1=n=>n===!0||n===!1,yc=n=>{if(hu(n)!=="object")return!1;const e=wd(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},x1=ni("Date"),b1=ni("File"),w1=ni("Blob"),M1=ni("FileList"),S1=n=>pu(n)&&Mn(n.pipe),E1=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Mn(n.append)&&((e=hu(n))==="formdata"||e==="object"&&Mn(n.toString)&&n.toString()==="[object FormData]"))},T1=ni("URLSearchParams"),A1=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zo(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,r;if(typeof n!="object"&&(n=[n]),pa(n))for(i=0,r=n.length;i<r;i++)e.call(null,n[i],i,n);else{const s=t?Object.getOwnPropertyNames(n):Object.keys(n),a=s.length;let o;for(i=0;i<a;i++)o=s[i],e.call(null,n[o],o,n)}}function L_(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,r;for(;i-- >0;)if(r=t[i],e===r.toLowerCase())return r;return null}const C_=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,P_=n=>!Eo(n)&&n!==C_;function dh(){const{caseless:n}=P_(this)&&this||{},e={},t=(i,r)=>{const s=n&&L_(e,r)||r;yc(e[s])&&yc(i)?e[s]=dh(e[s],i):yc(i)?e[s]=dh({},i):pa(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Zo(arguments[i],t);return e}const R1=(n,e,t,{allOwnKeys:i}={})=>(Zo(e,(r,s)=>{t&&Mn(r)?n[s]=T_(r,t):n[s]=r},{allOwnKeys:i}),n),L1=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),C1=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},P1=(n,e,t,i)=>{let r,s,a;const o={};if(e=e||{},n==null)return e;do{for(r=Object.getOwnPropertyNames(n),s=r.length;s-- >0;)a=r[s],(!i||i(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&wd(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},I1=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},N1=n=>{if(!n)return null;if(pa(n))return n;let e=n.length;if(!R_(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},D1=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&wd(Uint8Array)),O1=(n,e)=>{const i=(n&&n[Symbol.iterator]).call(n);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(n,s[0],s[1])}},F1=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},k1=ni("HTMLFormElement"),U1=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,r){return i.toUpperCase()+r}),Nm=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),B1=ni("RegExp"),I_=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Zo(t,(r,s)=>{let a;(a=e(r,s,n))!==!1&&(i[s]=a||r)}),Object.defineProperties(n,i)},z1=n=>{I_(n,(e,t)=>{if(Mn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(Mn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},H1=(n,e)=>{const t={},i=r=>{r.forEach(s=>{t[s]=!0})};return pa(n)?i(n):i(String(n).split(e)),t},V1=()=>{},G1=(n,e)=>(n=+n,Number.isFinite(n)?n:e),tf="abcdefghijklmnopqrstuvwxyz",Dm="0123456789",N_={DIGIT:Dm,ALPHA:tf,ALPHA_DIGIT:tf+tf.toUpperCase()+Dm},W1=(n=16,e=N_.ALPHA_DIGIT)=>{let t="";const{length:i}=e;for(;n--;)t+=e[Math.random()*i|0];return t};function j1(n){return!!(n&&Mn(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const $1=n=>{const e=new Array(10),t=(i,r)=>{if(pu(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=pa(i)?[]:{};return Zo(i,(a,o)=>{const l=t(a,r+1);!Eo(l)&&(s[o]=l)}),e[r]=void 0,s}}return i};return t(n,0)},q1=ni("AsyncFunction"),X1=n=>n&&(pu(n)||Mn(n))&&Mn(n.then)&&Mn(n.catch),fe={isArray:pa,isArrayBuffer:A_,isBuffer:g1,isFormData:E1,isArrayBufferView:v1,isString:y1,isNumber:R_,isBoolean:_1,isObject:pu,isPlainObject:yc,isUndefined:Eo,isDate:x1,isFile:b1,isBlob:w1,isRegExp:B1,isFunction:Mn,isStream:S1,isURLSearchParams:T1,isTypedArray:D1,isFileList:M1,forEach:Zo,merge:dh,extend:R1,trim:A1,stripBOM:L1,inherits:C1,toFlatObject:P1,kindOf:hu,kindOfTest:ni,endsWith:I1,toArray:N1,forEachEntry:O1,matchAll:F1,isHTMLForm:k1,hasOwnProperty:Nm,hasOwnProp:Nm,reduceDescriptors:I_,freezeMethods:z1,toObjectSet:H1,toCamelCase:U1,noop:V1,toFiniteNumber:G1,findKey:L_,global:C_,isContextDefined:P_,ALPHABET:N_,generateString:W1,isSpecCompliantForm:j1,toJSONObject:$1,isAsyncFn:q1,isThenable:X1};function qe(n,e,t,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),r&&(this.response=r)}fe.inherits(qe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const D_=qe.prototype,O_={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{O_[n]={value:n}});Object.defineProperties(qe,O_);Object.defineProperty(D_,"isAxiosError",{value:!0});qe.from=(n,e,t,i,r,s)=>{const a=Object.create(D_);return fe.toFlatObject(n,a,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),qe.call(a,n.message,e,t,i,r),a.cause=n,a.name=n.name,s&&Object.assign(a,s),a};const Y1=null;function ph(n){return fe.isPlainObject(n)||fe.isArray(n)}function F_(n){return fe.endsWith(n,"[]")?n.slice(0,-2):n}function Om(n,e,t){return n?n.concat(e).map(function(r,s){return r=F_(r),!t&&s?"["+r+"]":r}).join(t?".":""):e}function K1(n){return fe.isArray(n)&&!n.some(ph)}const Z1=fe.toFlatObject(fe,{},null,function(e){return/^is[A-Z]/.test(e)});function mu(n,e,t){if(!fe.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=fe.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,y){return!fe.isUndefined(y[v])});const i=t.metaTokens,r=t.visitor||u,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&fe.isSpecCompliantForm(e);if(!fe.isFunction(r))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(fe.isDate(g))return g.toISOString();if(!l&&fe.isBlob(g))throw new qe("Blob is not supported. Use a Buffer instead.");return fe.isArrayBuffer(g)||fe.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,v,y){let p=g;if(g&&!y&&typeof g=="object"){if(fe.endsWith(v,"{}"))v=i?v:v.slice(0,-2),g=JSON.stringify(g);else if(fe.isArray(g)&&K1(g)||(fe.isFileList(g)||fe.endsWith(v,"[]"))&&(p=fe.toArray(g)))return v=F_(v),p.forEach(function(_,w){!(fe.isUndefined(_)||_===null)&&e.append(a===!0?Om([v],w,s):a===null?v:v+"[]",c(_))}),!1}return ph(g)?!0:(e.append(Om(y,v,s),c(g)),!1)}const f=[],h=Object.assign(Z1,{defaultVisitor:u,convertValue:c,isVisitable:ph});function d(g,v){if(!fe.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+v.join("."));f.push(g),fe.forEach(g,function(p,m){(!(fe.isUndefined(p)||p===null)&&r.call(e,p,fe.isString(m)?m.trim():m,v,h))===!0&&d(p,v?v.concat(m):[m])}),f.pop()}}if(!fe.isObject(n))throw new TypeError("data must be an object");return d(n),e}function Fm(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Md(n,e){this._pairs=[],n&&mu(n,this,e)}const k_=Md.prototype;k_.append=function(e,t){this._pairs.push([e,t])};k_.toString=function(e){const t=e?function(i){return e.call(this,i,Fm)}:Fm;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function J1(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function U_(n,e,t){if(!e)return n;const i=t&&t.encode||J1,r=t&&t.serialize;let s;if(r?s=r(e,t):s=fe.isURLSearchParams(e)?e.toString():new Md(e,t).toString(i),s){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+s}return n}class km{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){fe.forEach(this.handlers,function(i){i!==null&&e(i)})}}const B_={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Q1=typeof URLSearchParams<"u"?URLSearchParams:Md,eE=typeof FormData<"u"?FormData:null,tE=typeof Blob<"u"?Blob:null,nE={isBrowser:!0,classes:{URLSearchParams:Q1,FormData:eE,Blob:tE},protocols:["http","https","file","blob","url","data"]},z_=typeof window<"u"&&typeof document<"u",iE=(n=>z_&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),rE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",sE=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:z_,hasStandardBrowserEnv:iE,hasStandardBrowserWebWorkerEnv:rE},Symbol.toStringTag,{value:"Module"})),qn={...sE,...nE};function aE(n,e){return mu(n,new qn.classes.URLSearchParams,Object.assign({visitor:function(t,i,r,s){return qn.isNode&&fe.isBuffer(t)?(this.append(i,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function oE(n){return fe.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lE(n){const e={},t=Object.keys(n);let i;const r=t.length;let s;for(i=0;i<r;i++)s=t[i],e[s]=n[s];return e}function H_(n){function e(t,i,r,s){let a=t[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&fe.isArray(r)?r.length:a,l?(fe.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!o):((!r[a]||!fe.isObject(r[a]))&&(r[a]=[]),e(t,i,r[a],s)&&fe.isArray(r[a])&&(r[a]=lE(r[a])),!o)}if(fe.isFormData(n)&&fe.isFunction(n.entries)){const t={};return fe.forEachEntry(n,(i,r)=>{e(oE(i),r,t,0)}),t}return null}function cE(n,e,t){if(fe.isString(n))try{return(e||JSON.parse)(n),fe.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Jo={transitional:B_,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",r=i.indexOf("application/json")>-1,s=fe.isObject(e);if(s&&fe.isHTMLForm(e)&&(e=new FormData(e)),fe.isFormData(e))return r?JSON.stringify(H_(e)):e;if(fe.isArrayBuffer(e)||fe.isBuffer(e)||fe.isStream(e)||fe.isFile(e)||fe.isBlob(e))return e;if(fe.isArrayBufferView(e))return e.buffer;if(fe.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return aE(e,this.formSerializer).toString();if((o=fe.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return mu(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),cE(e)):e}],transformResponse:[function(e){const t=this.transitional||Jo.transitional,i=t&&t.forcedJSONParsing,r=this.responseType==="json";if(e&&fe.isString(e)&&(i&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?qe.from(o,qe.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qn.classes.FormData,Blob:qn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fe.forEach(["delete","get","head","post","put","patch"],n=>{Jo.headers[n]={}});const uE=fe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fE=n=>{const e={};let t,i,r;return n&&n.split(`
`).forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!t||e[t]&&uE[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Um=Symbol("internals");function Na(n){return n&&String(n).trim().toLowerCase()}function _c(n){return n===!1||n==null?n:fe.isArray(n)?n.map(_c):String(n)}function hE(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const dE=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function nf(n,e,t,i,r){if(fe.isFunction(i))return i.call(this,e,t);if(r&&(e=t),!!fe.isString(e)){if(fe.isString(i))return e.indexOf(i)!==-1;if(fe.isRegExp(i))return i.test(e)}}function pE(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function mE(n,e){const t=fe.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(r,s,a){return this[i].call(this,e,r,s,a)},configurable:!0})})}class Sn{constructor(e){e&&this.set(e)}set(e,t,i){const r=this;function s(o,l,c){const u=Na(l);if(!u)throw new Error("header name must be a non-empty string");const f=fe.findKey(r,u);(!f||r[f]===void 0||c===!0||c===void 0&&r[f]!==!1)&&(r[f||l]=_c(o))}const a=(o,l)=>fe.forEach(o,(c,u)=>s(c,u,l));return fe.isPlainObject(e)||e instanceof this.constructor?a(e,t):fe.isString(e)&&(e=e.trim())&&!dE(e)?a(fE(e),t):e!=null&&s(t,e,i),this}get(e,t){if(e=Na(e),e){const i=fe.findKey(this,e);if(i){const r=this[i];if(!t)return r;if(t===!0)return hE(r);if(fe.isFunction(t))return t.call(this,r,i);if(fe.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Na(e),e){const i=fe.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||nf(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let r=!1;function s(a){if(a=Na(a),a){const o=fe.findKey(i,a);o&&(!t||nf(i,i[o],o,t))&&(delete i[o],r=!0)}}return fe.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let i=t.length,r=!1;for(;i--;){const s=t[i];(!e||nf(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const t=this,i={};return fe.forEach(this,(r,s)=>{const a=fe.findKey(i,s);if(a){t[a]=_c(r),delete t[s];return}const o=e?pE(s):String(s).trim();o!==s&&delete t[s],t[o]=_c(r),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return fe.forEach(this,(i,r)=>{i!=null&&i!==!1&&(t[r]=e&&fe.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[Um]=this[Um]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=Na(a);i[o]||(mE(r,a),i[o]=!0)}return fe.isArray(e)?e.forEach(s):s(e),this}}Sn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);fe.reduceDescriptors(Sn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});fe.freezeMethods(Sn);function rf(n,e){const t=this||Jo,i=e||t,r=Sn.from(i.headers);let s=i.data;return fe.forEach(n,function(o){s=o.call(t,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function V_(n){return!!(n&&n.__CANCEL__)}function Qo(n,e,t){qe.call(this,n??"canceled",qe.ERR_CANCELED,e,t),this.name="CanceledError"}fe.inherits(Qo,qe,{__CANCEL__:!0});function gE(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new qe("Request failed with status code "+t.status,[qe.ERR_BAD_REQUEST,qe.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}const vE=qn.hasStandardBrowserEnv?{write(n,e,t,i,r,s){const a=[n+"="+encodeURIComponent(e)];fe.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),fe.isString(i)&&a.push("path="+i),fe.isString(r)&&a.push("domain="+r),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function yE(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function _E(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function G_(n,e){return n&&!yE(e)?_E(n,e):e}const xE=qn.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function r(s){let a=s;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=r(window.location.href),function(a){const o=fe.isString(a)?r(a):a;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function bE(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function wE(n,e){n=n||10;const t=new Array(n),i=new Array(n);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[s];a||(a=c),t[r]=l,i[r]=c;let f=s,h=0;for(;f!==r;)h+=t[f++],f=f%n;if(r=(r+1)%n,r===s&&(s=(s+1)%n),c-a<e)return;const d=u&&c-u;return d?Math.round(h*1e3/d):void 0}}function Bm(n,e){let t=0;const i=wE(50,250);return r=>{const s=r.loaded,a=r.lengthComputable?r.total:void 0,o=s-t,l=i(o),c=s<=a;t=s;const u={loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&c?(a-s)/l:void 0,event:r};u[e?"download":"upload"]=!0,n(u)}}const ME=typeof XMLHttpRequest<"u",SE=ME&&function(n){return new Promise(function(t,i){let r=n.data;const s=Sn.from(n.headers).normalize();let{responseType:a,withXSRFToken:o}=n,l;function c(){n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let u;if(fe.isFormData(r)){if(qn.hasStandardBrowserEnv||qn.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((u=s.getContentType())!==!1){const[v,...y]=u?u.split(";").map(p=>p.trim()).filter(Boolean):[];s.setContentType([v||"multipart/form-data",...y].join("; "))}}let f=new XMLHttpRequest;if(n.auth){const v=n.auth.username||"",y=n.auth.password?unescape(encodeURIComponent(n.auth.password)):"";s.set("Authorization","Basic "+btoa(v+":"+y))}const h=G_(n.baseURL,n.url);f.open(n.method.toUpperCase(),U_(h,n.params,n.paramsSerializer),!0),f.timeout=n.timeout;function d(){if(!f)return;const v=Sn.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),p={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:v,config:n,request:f};gE(function(_){t(_),c()},function(_){i(_),c()},p),f=null}if("onloadend"in f?f.onloadend=d:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(d)},f.onabort=function(){f&&(i(new qe("Request aborted",qe.ECONNABORTED,n,f)),f=null)},f.onerror=function(){i(new qe("Network Error",qe.ERR_NETWORK,n,f)),f=null},f.ontimeout=function(){let y=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const p=n.transitional||B_;n.timeoutErrorMessage&&(y=n.timeoutErrorMessage),i(new qe(y,p.clarifyTimeoutError?qe.ETIMEDOUT:qe.ECONNABORTED,n,f)),f=null},qn.hasStandardBrowserEnv&&(o&&fe.isFunction(o)&&(o=o(n)),o||o!==!1&&xE(h))){const v=n.xsrfHeaderName&&n.xsrfCookieName&&vE.read(n.xsrfCookieName);v&&s.set(n.xsrfHeaderName,v)}r===void 0&&s.setContentType(null),"setRequestHeader"in f&&fe.forEach(s.toJSON(),function(y,p){f.setRequestHeader(p,y)}),fe.isUndefined(n.withCredentials)||(f.withCredentials=!!n.withCredentials),a&&a!=="json"&&(f.responseType=n.responseType),typeof n.onDownloadProgress=="function"&&f.addEventListener("progress",Bm(n.onDownloadProgress,!0)),typeof n.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",Bm(n.onUploadProgress)),(n.cancelToken||n.signal)&&(l=v=>{f&&(i(!v||v.type?new Qo(null,n,f):v),f.abort(),f=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const g=bE(h);if(g&&qn.protocols.indexOf(g)===-1){i(new qe("Unsupported protocol "+g+":",qe.ERR_BAD_REQUEST,n));return}f.send(r||null)})},mh={http:Y1,xhr:SE};fe.forEach(mh,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const zm=n=>`- ${n}`,EE=n=>fe.isFunction(n)||n===null||n===!1,W_={getAdapter:n=>{n=fe.isArray(n)?n:[n];const{length:e}=n;let t,i;const r={};for(let s=0;s<e;s++){t=n[s];let a;if(i=t,!EE(t)&&(i=mh[(a=String(t)).toLowerCase()],i===void 0))throw new qe(`Unknown adapter '${a}'`);if(i)break;r[a||"#"+s]=i}if(!i){const s=Object.entries(r).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(zm).join(`
`):" "+zm(s[0]):"as no adapter specified";throw new qe("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return i},adapters:mh};function sf(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Qo(null,n)}function Hm(n){return sf(n),n.headers=Sn.from(n.headers),n.data=rf.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),W_.getAdapter(n.adapter||Jo.adapter)(n).then(function(i){return sf(n),i.data=rf.call(n,n.transformResponse,i),i.headers=Sn.from(i.headers),i},function(i){return V_(i)||(sf(n),i&&i.response&&(i.response.data=rf.call(n,n.transformResponse,i.response),i.response.headers=Sn.from(i.response.headers))),Promise.reject(i)})}const Vm=n=>n instanceof Sn?{...n}:n;function ta(n,e){e=e||{};const t={};function i(c,u,f){return fe.isPlainObject(c)&&fe.isPlainObject(u)?fe.merge.call({caseless:f},c,u):fe.isPlainObject(u)?fe.merge({},u):fe.isArray(u)?u.slice():u}function r(c,u,f){if(fe.isUndefined(u)){if(!fe.isUndefined(c))return i(void 0,c,f)}else return i(c,u,f)}function s(c,u){if(!fe.isUndefined(u))return i(void 0,u)}function a(c,u){if(fe.isUndefined(u)){if(!fe.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function o(c,u,f){if(f in e)return i(c,u);if(f in n)return i(void 0,c)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(c,u)=>r(Vm(c),Vm(u),!0)};return fe.forEach(Object.keys(Object.assign({},n,e)),function(u){const f=l[u]||r,h=f(n[u],e[u],u);fe.isUndefined(h)&&f!==o||(t[u]=h)}),t}const j_="1.6.8",Sd={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Sd[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Gm={};Sd.transitional=function(e,t,i){function r(s,a){return"[Axios v"+j_+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,o)=>{if(e===!1)throw new qe(r(a," has been removed"+(t?" in "+t:"")),qe.ERR_DEPRECATED);return t&&!Gm[a]&&(Gm[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,o):!0}};function TE(n,e,t){if(typeof n!="object")throw new qe("options must be an object",qe.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let r=i.length;for(;r-- >0;){const s=i[r],a=e[s];if(a){const o=n[s],l=o===void 0||a(o,s,n);if(l!==!0)throw new qe("option "+s+" must be "+l,qe.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new qe("Unknown option "+s,qe.ERR_BAD_OPTION)}}const gh={assertOptions:TE,validators:Sd},Fi=gh.validators;class jr{constructor(e){this.defaults=e,this.interceptors={request:new km,response:new km}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let r;Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ta(this.defaults,t);const{transitional:i,paramsSerializer:r,headers:s}=t;i!==void 0&&gh.assertOptions(i,{silentJSONParsing:Fi.transitional(Fi.boolean),forcedJSONParsing:Fi.transitional(Fi.boolean),clarifyTimeoutError:Fi.transitional(Fi.boolean)},!1),r!=null&&(fe.isFunction(r)?t.paramsSerializer={serialize:r}:gh.assertOptions(r,{encode:Fi.function,serialize:Fi.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&fe.merge(s.common,s[t.method]);s&&fe.forEach(["delete","get","head","post","put","patch","common"],g=>{delete s[g]}),t.headers=Sn.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,f=0,h;if(!l){const g=[Hm.bind(this),void 0];for(g.unshift.apply(g,o),g.push.apply(g,c),h=g.length,u=Promise.resolve(t);f<h;)u=u.then(g[f++],g[f++]);return u}h=o.length;let d=t;for(f=0;f<h;){const g=o[f++],v=o[f++];try{d=g(d)}catch(y){v.call(this,y);break}}try{u=Hm.call(this,d)}catch(g){return Promise.reject(g)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}getUri(e){e=ta(this.defaults,e);const t=G_(e.baseURL,e.url);return U_(t,e.params,e.paramsSerializer)}}fe.forEach(["delete","get","head","options"],function(e){jr.prototype[e]=function(t,i){return this.request(ta(i||{},{method:e,url:t,data:(i||{}).data}))}});fe.forEach(["post","put","patch"],function(e){function t(i){return function(s,a,o){return this.request(ta(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}jr.prototype[e]=t(),jr.prototype[e+"Form"]=t(!0)});class Ed{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{i.subscribe(o),s=o}).then(r);return a.cancel=function(){i.unsubscribe(s)},a},e(function(s,a,o){i.reason||(i.reason=new Qo(s,a,o),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new Ed(function(r){e=r}),cancel:e}}}function AE(n){return function(t){return n.apply(null,t)}}function RE(n){return fe.isObject(n)&&n.isAxiosError===!0}const vh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vh).forEach(([n,e])=>{vh[e]=n});function $_(n){const e=new jr(n),t=T_(jr.prototype.request,e);return fe.extend(t,jr.prototype,e,{allOwnKeys:!0}),fe.extend(t,e,null,{allOwnKeys:!0}),t.create=function(r){return $_(ta(n,r))},t}const Ze=$_(Jo);Ze.Axios=jr;Ze.CanceledError=Qo;Ze.CancelToken=Ed;Ze.isCancel=V_;Ze.VERSION=j_;Ze.toFormData=mu;Ze.AxiosError=qe;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=AE;Ze.isAxiosError=RE;Ze.mergeConfig=ta;Ze.AxiosHeaders=Sn;Ze.formToJSON=n=>H_(fe.isHTMLForm(n)?new FormData(n):n);Ze.getAdapter=W_.getAdapter;Ze.HttpStatusCode=vh;Ze.default=Ze;const gu=Yo({user:null}),Wm=JSON.parse(localStorage.getItem("user"));Wm&&(gu.user=Wm);const LE=n=>{gu.user=n,localStorage.setItem("user",JSON.stringify(n))},el=()=>Tw(gu),CE=()=>{gu.user=null,localStorage.removeItem("user")},q_=async(n,e,t)=>{try{const i=await Ze.post("http://localhost:3000/auth/login",{email:n,password:e});if(i.status!==200)throw new Error("Login failed: Invalid response");const r=i.data.token;localStorage.setItem("token",r);const s=await Ze.get(`http://localhost:3000/auth/user/${n}`,{headers:{Authorization:`Bearer ${r}`}});if(s.status!==200)throw new Error("Login failed: Invalid user info response");const a=s.data;LE(a),t.push("/")}catch(i){throw console.error("Login failed:",i.message),i}};function jm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Te(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?jm(Object(t),!0).forEach(function(i){Ot(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):jm(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Oc(n){"@babel/helpers - typeof";return Oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oc(n)}function PE(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function IE(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function NE(n,e,t){return e&&IE(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ot(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Td(n,e){return OE(n)||kE(n,e)||X_(n,e)||BE()}function tl(n){return DE(n)||FE(n)||X_(n)||UE()}function DE(n){if(Array.isArray(n))return yh(n)}function OE(n){if(Array.isArray(n))return n}function FE(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kE(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function X_(n,e){if(n){if(typeof n=="string")return yh(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yh(n,e)}}function yh(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function UE(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BE(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $m=function(){},Ad={},Y_={},K_=null,Z_={mark:$m,measure:$m};try{typeof window<"u"&&(Ad=window),typeof document<"u"&&(Y_=document),typeof MutationObserver<"u"&&(K_=MutationObserver),typeof performance<"u"&&(Z_=performance)}catch{}var zE=Ad.navigator||{},qm=zE.userAgent,Xm=qm===void 0?"":qm,ur=Ad,pt=Y_,Ym=K_,El=Z_;ur.document;var Pi=!!pt.documentElement&&!!pt.head&&typeof pt.addEventListener=="function"&&typeof pt.createElement=="function",J_=~Xm.indexOf("MSIE")||~Xm.indexOf("Trident/"),Tl,Al,Rl,Ll,Cl,Si="___FONT_AWESOME___",_h=16,Q_="fa",e0="svg-inline--fa",Yr="data-fa-i2svg",xh="data-fa-pseudo-element",HE="data-fa-pseudo-element-pending",Rd="data-prefix",Ld="data-icon",Km="fontawesome-i2svg",VE="async",GE=["HTML","HEAD","STYLE","SCRIPT"],t0=function(){try{return!0}catch{return!1}}(),ht="classic",Mt="sharp",Cd=[ht,Mt];function nl(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[ht]}})}var To=nl((Tl={},Ot(Tl,ht,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),Ot(Tl,Mt,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),Tl)),Ao=nl((Al={},Ot(Al,ht,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),Ot(Al,Mt,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),Al)),Ro=nl((Rl={},Ot(Rl,ht,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),Ot(Rl,Mt,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),Rl)),WE=nl((Ll={},Ot(Ll,ht,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),Ot(Ll,Mt,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),Ll)),jE=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,n0="fa-layers-text",$E=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,qE=nl((Cl={},Ot(Cl,ht,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),Ot(Cl,Mt,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),Cl)),i0=[1,2,3,4,5,6,7,8,9,10],XE=i0.concat([11,12,13,14,15,16,17,18,19,20]),YE=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],zr={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Lo=new Set;Object.keys(Ao[ht]).map(Lo.add.bind(Lo));Object.keys(Ao[Mt]).map(Lo.add.bind(Lo));var KE=[].concat(Cd,tl(Lo),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",zr.GROUP,zr.SWAP_OPACITY,zr.PRIMARY,zr.SECONDARY]).concat(i0.map(function(n){return"".concat(n,"x")})).concat(XE.map(function(n){return"w-".concat(n)})),ao=ur.FontAwesomeConfig||{};function ZE(n){var e=pt.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}function JE(n){return n===""?!0:n==="false"?!1:n==="true"?!0:n}if(pt&&typeof pt.querySelector=="function"){var QE=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];QE.forEach(function(n){var e=Td(n,2),t=e[0],i=e[1],r=JE(ZE(t));r!=null&&(ao[i]=r)})}var r0={styleDefault:"solid",familyDefault:"classic",cssPrefix:Q_,replacementClass:e0,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ao.familyPrefix&&(ao.cssPrefix=ao.familyPrefix);var na=Te(Te({},r0),ao);na.autoReplaceSvg||(na.observeMutations=!1);var Le={};Object.keys(r0).forEach(function(n){Object.defineProperty(Le,n,{enumerable:!0,set:function(t){na[n]=t,oo.forEach(function(i){return i(Le)})},get:function(){return na[n]}})});Object.defineProperty(Le,"familyPrefix",{enumerable:!0,set:function(e){na.cssPrefix=e,oo.forEach(function(t){return t(Le)})},get:function(){return na.cssPrefix}});ur.FontAwesomeConfig=Le;var oo=[];function eT(n){return oo.push(n),function(){oo.splice(oo.indexOf(n),1)}}var ki=_h,Xn={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function tT(n){if(!(!n||!Pi)){var e=pt.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=pt.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],a=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(a)>-1&&(i=s)}return pt.head.insertBefore(e,i),n}}var nT="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Co(){for(var n=12,e="";n-- >0;)e+=nT[Math.random()*62|0];return e}function ma(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function Pd(n){return n.classList?ma(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function s0(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function iT(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(s0(n[t]),'" ')},"").trim()}function vu(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function Id(n){return n.size!==Xn.size||n.x!==Xn.x||n.y!==Xn.y||n.rotate!==Xn.rotate||n.flipX||n.flipY}function rT(n){var e=n.transform,t=n.containerWidth,i=n.iconWidth,r={transform:"translate(".concat(t/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),a="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),o="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(a," ").concat(o)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function sT(n){var e=n.transform,t=n.width,i=t===void 0?_h:t,r=n.height,s=r===void 0?_h:r,a=n.startCentered,o=a===void 0?!1:a,l="";return o&&J_?l+="translate(".concat(e.x/ki-i/2,"em, ").concat(e.y/ki-s/2,"em) "):o?l+="translate(calc(-50% + ".concat(e.x/ki,"em), calc(-50% + ").concat(e.y/ki,"em)) "):l+="translate(".concat(e.x/ki,"em, ").concat(e.y/ki,"em) "),l+="scale(".concat(e.size/ki*(e.flipX?-1:1),", ").concat(e.size/ki*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var aT=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, 0));
          transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function a0(){var n=Q_,e=e0,t=Le.cssPrefix,i=Le.replacementClass,r=aT;if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),a=new RegExp("\\--".concat(n,"\\-"),"g"),o=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(a,"--".concat(t,"-")).replace(o,".".concat(i))}return r}var Zm=!1;function af(){Le.autoAddCss&&!Zm&&(tT(a0()),Zm=!0)}var oT={mixout:function(){return{dom:{css:a0,insertCss:af}}},hooks:function(){return{beforeDOMElementCreation:function(){af()},beforeI2svg:function(){af()}}}},Ei=ur||{};Ei[Si]||(Ei[Si]={});Ei[Si].styles||(Ei[Si].styles={});Ei[Si].hooks||(Ei[Si].hooks={});Ei[Si].shims||(Ei[Si].shims=[]);var kn=Ei[Si],o0=[],lT=function n(){pt.removeEventListener("DOMContentLoaded",n),Fc=1,o0.map(function(e){return e()})},Fc=!1;Pi&&(Fc=(pt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(pt.readyState),Fc||pt.addEventListener("DOMContentLoaded",lT));function cT(n){Pi&&(Fc?setTimeout(n,0):o0.push(n))}function il(n){var e=n.tag,t=n.attributes,i=t===void 0?{}:t,r=n.children,s=r===void 0?[]:r;return typeof n=="string"?s0(n):"<".concat(e," ").concat(iT(i),">").concat(s.map(il).join(""),"</").concat(e,">")}function Jm(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}var of=function(e,t,i,r){var s=Object.keys(e),a=s.length,o=t,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<a;l++)c=s[l],u=o(u,e[c],c,e);return u};function uT(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),t--)}else e.push(r)}return e}function bh(n){var e=uT(n);return e.length===1?e[0].toString(16):null}function fT(n,e){var t=n.length,i=n.charCodeAt(e),r;return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function Qm(n){return Object.keys(n).reduce(function(e,t){var i=n[t],r=!!i.icon;return r?e[i.iconName]=i.icon:e[t]=i,e},{})}function wh(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=t.skipHooks,r=i===void 0?!1:i,s=Qm(e);typeof kn.hooks.addPack=="function"&&!r?kn.hooks.addPack(n,Qm(e)):kn.styles[n]=Te(Te({},kn.styles[n]||{}),s),n==="fas"&&wh("fa",e)}var Pl,Il,Nl,Ds=kn.styles,hT=kn.shims,dT=(Pl={},Ot(Pl,ht,Object.values(Ro[ht])),Ot(Pl,Mt,Object.values(Ro[Mt])),Pl),Nd=null,l0={},c0={},u0={},f0={},h0={},pT=(Il={},Ot(Il,ht,Object.keys(To[ht])),Ot(Il,Mt,Object.keys(To[Mt])),Il);function mT(n){return~KE.indexOf(n)}function gT(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i===n&&r!==""&&!mT(r)?r:null}var d0=function(){var e=function(s){return of(Ds,function(a,o,l){return a[l]=of(o,s,{}),a},{})};l0=e(function(r,s,a){if(s[3]&&(r[s[3]]=a),s[2]){var o=s[2].filter(function(l){return typeof l=="number"});o.forEach(function(l){r[l.toString(16)]=a})}return r}),c0=e(function(r,s,a){if(r[a]=a,s[2]){var o=s[2].filter(function(l){return typeof l=="string"});o.forEach(function(l){r[l]=a})}return r}),h0=e(function(r,s,a){var o=s[2];return r[a]=a,o.forEach(function(l){r[l]=a}),r});var t="far"in Ds||Le.autoFetchSvg,i=of(hT,function(r,s){var a=s[0],o=s[1],l=s[2];return o==="far"&&!t&&(o="fas"),typeof a=="string"&&(r.names[a]={prefix:o,iconName:l}),typeof a=="number"&&(r.unicodes[a.toString(16)]={prefix:o,iconName:l}),r},{names:{},unicodes:{}});u0=i.names,f0=i.unicodes,Nd=yu(Le.styleDefault,{family:Le.familyDefault})};eT(function(n){Nd=yu(n.styleDefault,{family:Le.familyDefault})});d0();function Dd(n,e){return(l0[n]||{})[e]}function vT(n,e){return(c0[n]||{})[e]}function Hr(n,e){return(h0[n]||{})[e]}function p0(n){return u0[n]||{prefix:null,iconName:null}}function yT(n){var e=f0[n],t=Dd("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}function fr(){return Nd}var Od=function(){return{prefix:null,iconName:null,rest:[]}};function yu(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.family,i=t===void 0?ht:t,r=To[i][n],s=Ao[i][n]||Ao[i][r],a=n in kn.styles?n:null;return s||a||null}var eg=(Nl={},Ot(Nl,ht,Object.keys(Ro[ht])),Ot(Nl,Mt,Object.keys(Ro[Mt])),Nl);function _u(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.skipLookups,r=i===void 0?!1:i,s=(e={},Ot(e,ht,"".concat(Le.cssPrefix,"-").concat(ht)),Ot(e,Mt,"".concat(Le.cssPrefix,"-").concat(Mt)),e),a=null,o=ht;(n.includes(s[ht])||n.some(function(c){return eg[ht].includes(c)}))&&(o=ht),(n.includes(s[Mt])||n.some(function(c){return eg[Mt].includes(c)}))&&(o=Mt);var l=n.reduce(function(c,u){var f=gT(Le.cssPrefix,u);if(Ds[u]?(u=dT[o].includes(u)?WE[o][u]:u,a=u,c.prefix=u):pT[o].indexOf(u)>-1?(a=u,c.prefix=yu(u,{family:o})):f?c.iconName=f:u!==Le.replacementClass&&u!==s[ht]&&u!==s[Mt]&&c.rest.push(u),!r&&c.prefix&&c.iconName){var h=a==="fa"?p0(c.iconName):{},d=Hr(c.prefix,c.iconName);h.prefix&&(a=null),c.iconName=h.iconName||d||c.iconName,c.prefix=h.prefix||c.prefix,c.prefix==="far"&&!Ds.far&&Ds.fas&&!Le.autoFetchSvg&&(c.prefix="fas")}return c},Od());return(n.includes("fa-brands")||n.includes("fab"))&&(l.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(l.prefix="fad"),!l.prefix&&o===Mt&&(Ds.fass||Le.autoFetchSvg)&&(l.prefix="fass",l.iconName=Hr(l.prefix,l.iconName)||l.iconName),(l.prefix==="fa"||a==="fa")&&(l.prefix=fr()||"fas"),l}var _T=function(){function n(){PE(this,n),this.definitions={}}return NE(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var a=r.reduce(this._pullDefinitions,{});Object.keys(a).forEach(function(o){t.definitions[o]=Te(Te({},t.definitions[o]||{}),a[o]),wh(o,a[o]);var l=Ro[ht][o];l&&wh(l,a[o]),d0()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var a=r[s],o=a.prefix,l=a.iconName,c=a.icon,u=c[2];t[o]||(t[o]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(t[o][f]=c)}),t[o][l]=c}),t}}]),n}(),tg=[],Os={},Gs={},xT=Object.keys(Gs);function bT(n,e){var t=e.mixoutsTo;return tg=n,Os={},Object.keys(Gs).forEach(function(i){xT.indexOf(i)===-1&&delete Gs[i]}),tg.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(a){typeof r[a]=="function"&&(t[a]=r[a]),Oc(r[a])==="object"&&Object.keys(r[a]).forEach(function(o){t[a]||(t[a]={}),t[a][o]=r[a][o]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(a){Os[a]||(Os[a]=[]),Os[a].push(s[a])})}i.provides&&i.provides(Gs)}),t}function Mh(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];var s=Os[n]||[];return s.forEach(function(a){e=a.apply(null,[e].concat(i))}),e}function Kr(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=Os[n]||[];r.forEach(function(s){s.apply(null,t)})}function Ti(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Gs[n]?Gs[n].apply(null,e):void 0}function Sh(n){n.prefix==="fa"&&(n.prefix="fas");var e=n.iconName,t=n.prefix||fr();if(e)return e=Hr(t,e)||e,Jm(m0.definitions,t,e)||Jm(kn.styles,t,e)}var m0=new _T,wT=function(){Le.autoReplaceSvg=!1,Le.observeMutations=!1,Kr("noAuto")},MT={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Pi?(Kr("beforeI2svg",e),Ti("pseudoElements2svg",e),Ti("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot;Le.autoReplaceSvg===!1&&(Le.autoReplaceSvg=!0),Le.observeMutations=!0,cT(function(){ET({autoReplaceSvgRoot:t}),Kr("watch",e)})}},ST={icon:function(e){if(e===null)return null;if(Oc(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Hr(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var t=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],i=yu(e[0]);return{prefix:i,iconName:Hr(i,t)||t}}if(typeof e=="string"&&(e.indexOf("".concat(Le.cssPrefix,"-"))>-1||e.match(jE))){var r=_u(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||fr(),iconName:Hr(r.prefix,r.iconName)||r.iconName}}if(typeof e=="string"){var s=fr();return{prefix:s,iconName:Hr(s,e)||e}}}},pn={noAuto:wT,config:Le,dom:MT,parse:ST,library:m0,findIconDefinition:Sh,toHtml:il},ET=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.autoReplaceSvgRoot,i=t===void 0?pt:t;(Object.keys(kn.styles).length>0||Le.autoFetchSvg)&&Pi&&Le.autoReplaceSvg&&pn.dom.i2svg({node:i})};function xu(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return il(i)})}}),Object.defineProperty(n,"node",{get:function(){if(Pi){var i=pt.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function TT(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,a=n.transform;if(Id(a)&&t.found&&!i.found){var o=t.width,l=t.height,c={x:o/l/2,y:.5};r.style=vu(Te(Te({},s),{},{"transform-origin":"".concat(c.x+a.x/16,"em ").concat(c.y+a.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function AT(n){var e=n.prefix,t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,a=s===!0?"".concat(e,"-").concat(Le.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:Te(Te({},r),{},{id:a}),children:i}]}]}function Fd(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,a=n.transform,o=n.symbol,l=n.title,c=n.maskId,u=n.titleId,f=n.extra,h=n.watchable,d=h===void 0?!1:h,g=i.found?i:t,v=g.width,y=g.height,p=r==="fak",m=[Le.replacementClass,s?"".concat(Le.cssPrefix,"-").concat(s):""].filter(function(K){return f.classes.indexOf(K)===-1}).filter(function(K){return K!==""||!!K}).concat(f.classes).join(" "),_={children:[],attributes:Te(Te({},f.attributes),{},{"data-prefix":r,"data-icon":s,class:m,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(y)})},w=p&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/y*16*.0625,"em")}:{};d&&(_.attributes[Yr]=""),l&&(_.children.push({tag:"title",attributes:{id:_.attributes["aria-labelledby"]||"title-".concat(u||Co())},children:[l]}),delete _.attributes.title);var E=Te(Te({},_),{},{prefix:r,iconName:s,main:t,mask:i,maskId:c,transform:a,symbol:o,styles:Te(Te({},w),f.styles)}),A=i.found&&t.found?Ti("generateAbstractMask",E)||{children:[],attributes:{}}:Ti("generateAbstractIcon",E)||{children:[],attributes:{}},b=A.children,N=A.attributes;return E.children=b,E.attributes=N,o?AT(E):TT(E)}function ng(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,a=n.extra,o=n.watchable,l=o===void 0?!1:o,c=Te(Te(Te({},a.attributes),s?{title:s}:{}),{},{class:a.classes.join(" ")});l&&(c[Yr]="");var u=Te({},a.styles);Id(r)&&(u.transform=sT({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var f=vu(u);f.length>0&&(c.style=f);var h=[];return h.push({tag:"span",attributes:c,children:[e]}),s&&h.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),h}function RT(n){var e=n.content,t=n.title,i=n.extra,r=Te(Te(Te({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=vu(i.styles);s.length>0&&(r.style=s);var a=[];return a.push({tag:"span",attributes:r,children:[e]}),t&&a.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),a}var lf=kn.styles;function Eh(n){var e=n[0],t=n[1],i=n.slice(4),r=Td(i,1),s=r[0],a=null;return Array.isArray(s)?a={tag:"g",attributes:{class:"".concat(Le.cssPrefix,"-").concat(zr.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Le.cssPrefix,"-").concat(zr.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(Le.cssPrefix,"-").concat(zr.PRIMARY),fill:"currentColor",d:s[1]}}]}:a={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:t,icon:a}}var LT={found:!1,width:512,height:512};function CT(n,e){!t0&&!Le.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))}function Th(n,e){var t=e;return e==="fa"&&Le.styleDefault!==null&&(e=fr()),new Promise(function(i,r){if(Ti("missingIconAbstract"),t==="fa"){var s=p0(n)||{};n=s.iconName||n,e=s.prefix||e}if(n&&e&&lf[e]&&lf[e][n]){var a=lf[e][n];return i(Eh(a))}CT(n,e),i(Te(Te({},LT),{},{icon:Le.showMissingIcons&&n?Ti("missingIconAbstract")||{}:{}}))})}var ig=function(){},Ah=Le.measurePerformance&&El&&El.mark&&El.measure?El:{mark:ig,measure:ig},qa='FA "6.5.2"',PT=function(e){return Ah.mark("".concat(qa," ").concat(e," begins")),function(){return g0(e)}},g0=function(e){Ah.mark("".concat(qa," ").concat(e," ends")),Ah.measure("".concat(qa," ").concat(e),"".concat(qa," ").concat(e," begins"),"".concat(qa," ").concat(e," ends"))},kd={begin:PT,end:g0},xc=function(){};function rg(n){var e=n.getAttribute?n.getAttribute(Yr):null;return typeof e=="string"}function IT(n){var e=n.getAttribute?n.getAttribute(Rd):null,t=n.getAttribute?n.getAttribute(Ld):null;return e&&t}function NT(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(Le.replacementClass)}function DT(){if(Le.autoReplaceSvg===!0)return bc.replace;var n=bc[Le.autoReplaceSvg];return n||bc.replace}function OT(n){return pt.createElementNS("http://www.w3.org/2000/svg",n)}function FT(n){return pt.createElement(n)}function v0(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.ceFn,i=t===void 0?n.tag==="svg"?OT:FT:t;if(typeof n=="string")return pt.createTextNode(n);var r=i(n.tag);Object.keys(n.attributes||[]).forEach(function(a){r.setAttribute(a,n.attributes[a])});var s=n.children||[];return s.forEach(function(a){r.appendChild(v0(a,{ceFn:i}))}),r}function kT(n){var e=" ".concat(n.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var bc={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(v0(r),t)}),t.getAttribute(Yr)===null&&Le.keepOriginalSource){var i=pt.createComment(kT(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~Pd(t).indexOf(Le.replacementClass))return bc.replace(e);var r=new RegExp("".concat(Le.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(o,l){return l===Le.replacementClass||l.match(r)?o.toSvg.push(l):o.toNode.push(l),o},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var a=i.map(function(o){return il(o)}).join(`
`);t.setAttribute(Yr,""),t.innerHTML=a}};function sg(n){n()}function y0(n,e){var t=typeof e=="function"?e:xc;if(n.length===0)t();else{var i=sg;Le.mutateApproach===VE&&(i=ur.requestAnimationFrame||sg),i(function(){var r=DT(),s=kd.begin("mutate");n.map(r),s(),t()})}}var Ud=!1;function _0(){Ud=!0}function Rh(){Ud=!1}var kc=null;function ag(n){if(Ym&&Le.observeMutations){var e=n.treeCallback,t=e===void 0?xc:e,i=n.nodeCallback,r=i===void 0?xc:i,s=n.pseudoElementsCallback,a=s===void 0?xc:s,o=n.observeMutationsRoot,l=o===void 0?pt:o;kc=new Ym(function(c){if(!Ud){var u=fr();ma(c).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!rg(f.addedNodes[0])&&(Le.searchPseudoElements&&a(f.target),t(f.target)),f.type==="attributes"&&f.target.parentNode&&Le.searchPseudoElements&&a(f.target.parentNode),f.type==="attributes"&&rg(f.target)&&~YE.indexOf(f.attributeName))if(f.attributeName==="class"&&IT(f.target)){var h=_u(Pd(f.target)),d=h.prefix,g=h.iconName;f.target.setAttribute(Rd,d||u),g&&f.target.setAttribute(Ld,g)}else NT(f.target)&&r(f.target)})}}),Pi&&kc.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function UT(){kc&&kc.disconnect()}function BT(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),a=s[0],o=s.slice(1);return a&&o.length>0&&(i[a]=o.join(":").trim()),i},{})),t}function zT(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=n.innerText!==void 0?n.innerText.trim():"",r=_u(Pd(n));return r.prefix||(r.prefix=fr()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=vT(r.prefix,n.innerText)||Dd(r.prefix,bh(n.innerText))),!r.iconName&&Le.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}function HT(n){var e=ma(n.attributes).reduce(function(r,s){return r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return Le.autoA11y&&(t?e["aria-labelledby"]="".concat(Le.replacementClass,"-title-").concat(i||Co()):(e["aria-hidden"]="true",e.focusable="false")),e}function VT(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Xn,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function og(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},t=zT(n),i=t.iconName,r=t.prefix,s=t.rest,a=HT(n),o=Mh("parseNodeAttributes",{},n),l=e.styleParser?BT(n):[];return Te({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:Xn,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:a}},o)}var GT=kn.styles;function x0(n){var e=Le.autoReplaceSvg==="nest"?og(n,{styleParser:!1}):og(n);return~e.extra.classes.indexOf(n0)?Ti("generateLayersText",n,e):Ti("generateSvgReplacementMutation",n,e)}var hr=new Set;Cd.map(function(n){hr.add("fa-".concat(n))});Object.keys(To[ht]).map(hr.add.bind(hr));Object.keys(To[Mt]).map(hr.add.bind(hr));hr=tl(hr);function lg(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Pi)return Promise.resolve();var t=pt.documentElement.classList,i=function(f){return t.add("".concat(Km,"-").concat(f))},r=function(f){return t.remove("".concat(Km,"-").concat(f))},s=Le.autoFetchSvg?hr:Cd.map(function(u){return"fa-".concat(u)}).concat(Object.keys(GT));s.includes("fa")||s.push("fa");var a=[".".concat(n0,":not([").concat(Yr,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(Yr,"])")})).join(", ");if(a.length===0)return Promise.resolve();var o=[];try{o=ma(n.querySelectorAll(a))}catch{}if(o.length>0)i("pending"),r("complete");else return Promise.resolve();var l=kd.begin("onTree"),c=o.reduce(function(u,f){try{var h=x0(f);h&&u.push(h)}catch(d){t0||d.name==="MissingIcon"&&console.error(d)}return u},[]);return new Promise(function(u,f){Promise.all(c).then(function(h){y0(h,function(){i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(h){l(),f(h)})})}function WT(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;x0(n).then(function(t){t&&y0([t],e)})}function jT(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(e||{}).icon?e:Sh(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:Sh(r||{})),n(i,Te(Te({},t),{},{mask:r}))}}var $T=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.transform,r=i===void 0?Xn:i,s=t.symbol,a=s===void 0?!1:s,o=t.mask,l=o===void 0?null:o,c=t.maskId,u=c===void 0?null:c,f=t.title,h=f===void 0?null:f,d=t.titleId,g=d===void 0?null:d,v=t.classes,y=v===void 0?[]:v,p=t.attributes,m=p===void 0?{}:p,_=t.styles,w=_===void 0?{}:_;if(e){var E=e.prefix,A=e.iconName,b=e.icon;return xu(Te({type:"icon"},e),function(){return Kr("beforeDOMElementCreation",{iconDefinition:e,params:t}),Le.autoA11y&&(h?m["aria-labelledby"]="".concat(Le.replacementClass,"-title-").concat(g||Co()):(m["aria-hidden"]="true",m.focusable="false")),Fd({icons:{main:Eh(b),mask:l?Eh(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:A,transform:Te(Te({},Xn),r),symbol:a,title:h,maskId:u,titleId:g,extra:{attributes:m,styles:w,classes:y}})})}},qT={mixout:function(){return{icon:jT($T)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=lg,t.nodeCallback=WT,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,r=i===void 0?pt:i,s=t.callback,a=s===void 0?function(){}:s;return lg(r,a)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,a=i.titleId,o=i.prefix,l=i.transform,c=i.symbol,u=i.mask,f=i.maskId,h=i.extra;return new Promise(function(d,g){Promise.all([Th(r,o),u.iconName?Th(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(v){var y=Td(v,2),p=y[0],m=y[1];d([t,Fd({icons:{main:p,mask:m},prefix:o,iconName:r,transform:l,symbol:c,maskId:f,title:s,titleId:a,extra:h,watchable:!0})])}).catch(g)})},e.generateAbstractIcon=function(t){var i=t.children,r=t.attributes,s=t.main,a=t.transform,o=t.styles,l=vu(o);l.length>0&&(r.style=l);var c;return Id(a)&&(c=Ti("generateAbstractTransformGrouping",{main:s,transform:a,containerWidth:s.width,iconWidth:s.width})),i.push(c||s.icon),{children:i,attributes:r}}}},XT={mixout:function(){return{layer:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.classes,s=r===void 0?[]:r;return xu({type:"layer"},function(){Kr("beforeDOMElementCreation",{assembler:t,params:i});var a=[];return t(function(o){Array.isArray(o)?o.map(function(l){a=a.concat(l.abstract)}):a=a.concat(o.abstract)}),[{tag:"span",attributes:{class:["".concat(Le.cssPrefix,"-layers")].concat(tl(s)).join(" ")},children:a}]})}}}},YT={mixout:function(){return{counter:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.title,s=r===void 0?null:r,a=i.classes,o=a===void 0?[]:a,l=i.attributes,c=l===void 0?{}:l,u=i.styles,f=u===void 0?{}:u;return xu({type:"counter",content:t},function(){return Kr("beforeDOMElementCreation",{content:t,params:i}),RT({content:t.toString(),title:s,extra:{attributes:c,styles:f,classes:["".concat(Le.cssPrefix,"-layers-counter")].concat(tl(o))}})})}}}},KT={mixout:function(){return{text:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.transform,s=r===void 0?Xn:r,a=i.title,o=a===void 0?null:a,l=i.classes,c=l===void 0?[]:l,u=i.attributes,f=u===void 0?{}:u,h=i.styles,d=h===void 0?{}:h;return xu({type:"text",content:t},function(){return Kr("beforeDOMElementCreation",{content:t,params:i}),ng({content:t,transform:Te(Te({},Xn),s),title:o,extra:{attributes:f,styles:d,classes:["".concat(Le.cssPrefix,"-layers-text")].concat(tl(c))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,a=i.extra,o=null,l=null;if(J_){var c=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();o=u.width/c,l=u.height/c}return Le.autoA11y&&!r&&(a.attributes["aria-hidden"]="true"),Promise.resolve([t,ng({content:t.innerHTML,width:o,height:l,transform:s,title:r,extra:a,watchable:!0})])}}},ZT=new RegExp('"',"ug"),cg=[1105920,1112319];function JT(n){var e=n.replace(ZT,""),t=fT(e,0),i=t>=cg[0]&&t<=cg[1],r=e.length===2?e[0]===e[1]:!1;return{value:bh(r?e[0]:e),isSecondary:i||r}}function ug(n,e){var t="".concat(HE).concat(e.replace(":","-"));return new Promise(function(i,r){if(n.getAttribute(t)!==null)return i();var s=ma(n.children),a=s.filter(function(b){return b.getAttribute(xh)===e})[0],o=ur.getComputedStyle(n,e),l=o.getPropertyValue("font-family").match($E),c=o.getPropertyValue("font-weight"),u=o.getPropertyValue("content");if(a&&!l)return n.removeChild(a),i();if(l&&u!=="none"&&u!==""){var f=o.getPropertyValue("content"),h=~["Sharp"].indexOf(l[2])?Mt:ht,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Ao[h][l[2].toLowerCase()]:qE[h][c],g=JT(f),v=g.value,y=g.isSecondary,p=l[0].startsWith("FontAwesome"),m=Dd(d,v),_=m;if(p){var w=yT(v);w.iconName&&w.prefix&&(m=w.iconName,d=w.prefix)}if(m&&!y&&(!a||a.getAttribute(Rd)!==d||a.getAttribute(Ld)!==_)){n.setAttribute(t,_),a&&n.removeChild(a);var E=VT(),A=E.extra;A.attributes[xh]=e,Th(m,d).then(function(b){var N=Fd(Te(Te({},E),{},{icons:{main:b,mask:Od()},prefix:d,iconName:_,extra:A,watchable:!0})),K=pt.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?n.insertBefore(K,n.firstChild):n.appendChild(K),K.outerHTML=N.map(function(H){return il(H)}).join(`
`),n.removeAttribute(t),i()}).catch(r)}else i()}else i()})}function QT(n){return Promise.all([ug(n,"::before"),ug(n,"::after")])}function eA(n){return n.parentNode!==document.head&&!~GE.indexOf(n.tagName.toUpperCase())&&!n.getAttribute(xh)&&(!n.parentNode||n.parentNode.tagName!=="svg")}function fg(n){if(Pi)return new Promise(function(e,t){var i=ma(n.querySelectorAll("*")).filter(eA).map(QT),r=kd.begin("searchPseudoElements");_0(),Promise.all(i).then(function(){r(),Rh(),e()}).catch(function(){r(),Rh(),t()})})}var tA={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=fg,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node,r=i===void 0?pt:i;Le.searchPseudoElements&&fg(r)}}},hg=!1,nA={mixout:function(){return{dom:{unwatch:function(){_0(),hg=!0}}}},hooks:function(){return{bootstrap:function(){ag(Mh("mutationObserverCallbacks",{}))},noAuto:function(){UT()},watch:function(t){var i=t.observeMutationsRoot;hg?Rh():ag(Mh("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},dg=function(e){var t={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),a=s[0],o=s.slice(1).join("-");if(a&&o==="h")return i.flipX=!0,i;if(a&&o==="v")return i.flipY=!0,i;if(o=parseFloat(o),isNaN(o))return i;switch(a){case"grow":i.size=i.size+o;break;case"shrink":i.size=i.size-o;break;case"left":i.x=i.x-o;break;case"right":i.x=i.x+o;break;case"up":i.y=i.y-o;break;case"down":i.y=i.y+o;break;case"rotate":i.rotate=i.rotate+o;break}return i},t)},iA={mixout:function(){return{parse:{transform:function(t){return dg(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=dg(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,s=t.containerWidth,a=t.iconWidth,o={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(r.x*32,", ").concat(r.y*32,") "),c="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),f={transform:"".concat(l," ").concat(c," ").concat(u)},h={transform:"translate(".concat(a/2*-1," -256)")},d={outer:o,inner:f,path:h};return{tag:"g",attributes:Te({},d.outer),children:[{tag:"g",attributes:Te({},d.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:Te(Te({},i.icon.attributes),d.path)}]}]}}}},cf={x:0,y:0,width:"100%",height:"100%"};function pg(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.attributes&&(n.attributes.fill||e)&&(n.attributes.fill="black"),n}function rA(n){return n.tag==="g"?n.children:[n]}var sA={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?_u(r.split(" ").map(function(a){return a.trim()})):Od();return s.prefix||(s.prefix=fr()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var i=t.children,r=t.attributes,s=t.main,a=t.mask,o=t.maskId,l=t.transform,c=s.width,u=s.icon,f=a.width,h=a.icon,d=rT({transform:l,containerWidth:f,iconWidth:c}),g={tag:"rect",attributes:Te(Te({},cf),{},{fill:"white"})},v=u.children?{children:u.children.map(pg)}:{},y={tag:"g",attributes:Te({},d.inner),children:[pg(Te({tag:u.tag,attributes:Te(Te({},u.attributes),d.path)},v))]},p={tag:"g",attributes:Te({},d.outer),children:[y]},m="mask-".concat(o||Co()),_="clip-".concat(o||Co()),w={tag:"mask",attributes:Te(Te({},cf),{},{id:m,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,p]},E={tag:"defs",children:[{tag:"clipPath",attributes:{id:_},children:rA(h)},w]};return i.push(E,{tag:"rect",attributes:Te({fill:"currentColor","clip-path":"url(#".concat(_,")"),mask:"url(#".concat(m,")")},cf)}),{children:i,attributes:r}}}},aA={provides:function(e){var t=!1;ur.matchMedia&&(t=ur.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:Te(Te({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var a=Te(Te({},s),{},{attributeName:"opacity"}),o={tag:"circle",attributes:Te(Te({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||o.children.push({tag:"animate",attributes:Te(Te({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:Te(Te({},a),{},{values:"1;0;1;1;0;1;"})}),i.push(o),i.push({tag:"path",attributes:Te(Te({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:Te(Te({},a),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:Te(Te({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:Te(Te({},a),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}},oA={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol"),s=r===null?!1:r===""?!0:r;return t.symbol=s,t}}}},lA=[oT,qT,XT,YT,KT,tA,nA,iA,sA,aA,oA];bT(lA,{mixoutsTo:pn});pn.noAuto;pn.config;pn.library;pn.dom;var Lh=pn.parse;pn.findIconDefinition;pn.toHtml;var cA=pn.icon;pn.layer;pn.text;pn.counter;function mg(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function gi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mg(Object(t),!0).forEach(function(i){an(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):mg(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Uc(n){"@babel/helpers - typeof";return Uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uc(n)}function an(n,e,t){return e=dA(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function uA(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function fA(n,e){if(n==null)return{};var t=uA(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function hA(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function dA(n){var e=hA(n,"string");return typeof e=="symbol"?e:String(e)}var pA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b0={exports:{}};(function(n){(function(e){var t=function(p,m,_){if(!c(m)||f(m)||h(m)||d(m)||l(m))return m;var w,E=0,A=0;if(u(m))for(w=[],A=m.length;E<A;E++)w.push(t(p,m[E],_));else{w={};for(var b in m)Object.prototype.hasOwnProperty.call(m,b)&&(w[p(b,_)]=t(p,m[b],_))}return w},i=function(p,m){m=m||{};var _=m.separator||"_",w=m.split||/(?=[A-Z])/;return p.split(w).join(_)},r=function(p){return g(p)?p:(p=p.replace(/[\-_\s]+(.)?/g,function(m,_){return _?_.toUpperCase():""}),p.substr(0,1).toLowerCase()+p.substr(1))},s=function(p){var m=r(p);return m.substr(0,1).toUpperCase()+m.substr(1)},a=function(p,m){return i(p,m).toLowerCase()},o=Object.prototype.toString,l=function(p){return typeof p=="function"},c=function(p){return p===Object(p)},u=function(p){return o.call(p)=="[object Array]"},f=function(p){return o.call(p)=="[object Date]"},h=function(p){return o.call(p)=="[object RegExp]"},d=function(p){return o.call(p)=="[object Boolean]"},g=function(p){return p=p-0,p===p},v=function(p,m){var _=m&&"process"in m?m.process:m;return typeof _!="function"?p:function(w,E){return _(w,p,E)}},y={camelize:r,decamelize:a,pascalize:s,depascalize:a,camelizeKeys:function(p,m){return t(v(r,m),p)},decamelizeKeys:function(p,m){return t(v(a,m),p,m)},pascalizeKeys:function(p,m){return t(v(s,m),p)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}};n.exports?n.exports=y:e.humps=y})(pA)})(b0);var mA=b0.exports,gA=["class","style"];function vA(n){return n.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var i=t.indexOf(":"),r=mA.camelize(t.slice(0,i)),s=t.slice(i+1).trim();return e[r]=s,e},{})}function yA(n){return n.split(/\s+/).reduce(function(e,t){return e[t]=!0,e},{})}function w0(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof n=="string")return n;var i=(n.children||[]).map(function(l){return w0(l)}),r=Object.keys(n.attributes||{}).reduce(function(l,c){var u=n.attributes[c];switch(c){case"class":l.class=yA(u);break;case"style":l.style=vA(u);break;default:l.attrs[c]=u}return l},{attrs:{},class:{},style:{}});t.class;var s=t.style,a=s===void 0?{}:s,o=fA(t,gA);return _d(n.tag,gi(gi(gi({},e),{},{class:r.class,style:gi(gi({},r.style),a)},r.attrs),o),i)}var M0=!1;try{M0=!0}catch{}function _A(){if(!M0&&console&&typeof console.error=="function"){var n;(n=console).error.apply(n,arguments)}}function uf(n,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?an({},n,e):{}}function xA(n){var e,t=(e={"fa-spin":n.spin,"fa-pulse":n.pulse,"fa-fw":n.fixedWidth,"fa-border":n.border,"fa-li":n.listItem,"fa-inverse":n.inverse,"fa-flip":n.flip===!0,"fa-flip-horizontal":n.flip==="horizontal"||n.flip==="both","fa-flip-vertical":n.flip==="vertical"||n.flip==="both"},an(e,"fa-".concat(n.size),n.size!==null),an(e,"fa-rotate-".concat(n.rotation),n.rotation!==null),an(e,"fa-pull-".concat(n.pull),n.pull!==null),an(e,"fa-swap-opacity",n.swapOpacity),an(e,"fa-bounce",n.bounce),an(e,"fa-shake",n.shake),an(e,"fa-beat",n.beat),an(e,"fa-fade",n.fade),an(e,"fa-beat-fade",n.beatFade),an(e,"fa-flash",n.flash),an(e,"fa-spin-pulse",n.spinPulse),an(e,"fa-spin-reverse",n.spinReverse),e);return Object.keys(t).map(function(i){return t[i]?i:null}).filter(function(i){return i})}function gg(n){if(n&&Uc(n)==="object"&&n.prefix&&n.iconName&&n.icon)return n;if(Lh.icon)return Lh.icon(n);if(n===null)return null;if(Uc(n)==="object"&&n.prefix&&n.iconName)return n;if(Array.isArray(n)&&n.length===2)return{prefix:n[0],iconName:n[1]};if(typeof n=="string")return{prefix:"fas",iconName:n}}var rs=da({name:"FontAwesomeIcon",props:{border:{type:Boolean,default:!1},fixedWidth:{type:Boolean,default:!1},flip:{type:[Boolean,String],default:!1,validator:function(e){return[!0,!1,"horizontal","vertical","both"].indexOf(e)>-1}},icon:{type:[Object,Array,String],required:!0},mask:{type:[Object,Array,String],default:null},maskId:{type:String,default:null},listItem:{type:Boolean,default:!1},pull:{type:String,default:null,validator:function(e){return["right","left"].indexOf(e)>-1}},pulse:{type:Boolean,default:!1},rotation:{type:[String,Number],default:null,validator:function(e){return[90,180,270].indexOf(Number.parseInt(e,10))>-1}},swapOpacity:{type:Boolean,default:!1},size:{type:String,default:null,validator:function(e){return["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"].indexOf(e)>-1}},spin:{type:Boolean,default:!1},transform:{type:[String,Object],default:null},symbol:{type:[Boolean,String],default:!1},title:{type:String,default:null},titleId:{type:String,default:null},inverse:{type:Boolean,default:!1},bounce:{type:Boolean,default:!1},shake:{type:Boolean,default:!1},beat:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},beatFade:{type:Boolean,default:!1},flash:{type:Boolean,default:!1},spinPulse:{type:Boolean,default:!1},spinReverse:{type:Boolean,default:!1}},setup:function(e,t){var i=t.attrs,r=Tt(function(){return gg(e.icon)}),s=Tt(function(){return uf("classes",xA(e))}),a=Tt(function(){return uf("transform",typeof e.transform=="string"?Lh.transform(e.transform):e.transform)}),o=Tt(function(){return uf("mask",gg(e.mask))}),l=Tt(function(){return cA(r.value,gi(gi(gi(gi({},s.value),a.value),o.value),{},{symbol:e.symbol,title:e.title,titleId:e.titleId,maskId:e.maskId}))});Wr(l,function(u){if(!u)return _A("Could not find one or more icon(s)",r.value,o.value)},{immediate:!0});var c=Tt(function(){return l.value?w0(l.value.abstract[0],{},i):null});return function(){return c.value}}}),S0={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="heart",i=512,r=512,s=[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],a="f004",o="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z";n.definition={prefix:e,iconName:t,icon:[i,r,s,a,o]},n.faHeart=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=a,n.svgPathData=o,n.aliases=s})(S0);const bA={__name:"Heart",setup(n){return(e,t)=>(Me(),Rt(Oe(rs),{icon:Oe(S0.faHeart),class:"green-icon"},null,8,["icon"]))}};var E0={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="cart-shopping",i=576,r=512,s=[128722,"shopping-cart"],a="f07a",o="M0 24C0 10.7 10.7 0 24 0H69.5c22 0 41.5 12.8 50.6 32h411c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3H170.7l5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5H488c13.3 0 24 10.7 24 24s-10.7 24-24 24H199.7c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5H24C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z";n.definition={prefix:e,iconName:t,icon:[i,r,s,a,o]},n.faCartShopping=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=a,n.svgPathData=o,n.aliases=s})(E0);const wA={__name:"CartIcon",setup(n){return(e,t)=>(Me(),Rt(Oe(rs),{icon:Oe(E0.faCartShopping)},null,8,["icon"]))}};var T0={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="door-open",i=576,r=512,s=[],a="f52b",o="M320 32c0-9.9-4.5-19.2-12.3-25.2S289.8-1.4 280.2 1l-179.9 45C79 51.3 64 70.5 64 92.5V448H32c-17.7 0-32 14.3-32 32s14.3 32 32 32H96 288h32V480 32zM256 256c0 17.7-10.7 32-24 32s-24-14.3-24-32s10.7-32 24-32s24 14.3 24 32zm96-128h96V480c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H512V128c0-35.3-28.7-64-64-64H352v64z";n.definition={prefix:e,iconName:t,icon:[i,r,s,a,o]},n.faDoorOpen=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=a,n.svgPathData=o,n.aliases=s})(T0);const MA={__name:"LogOutIcon",setup(n){return(e,t)=>(Me(),Rt(Oe(rs),{icon:Oe(T0.faDoorOpen)},null,8,["icon"]))}},A0=Fe(0),R0=Fe(0),Ch=(n,e)=>{A0.value=n,R0.value=e},L0=async n=>{try{const e=await Ze.get(`/cart/active-cart/${n}`),t=e.data.length;let i=0;for(let r=0;r<e.data.length;r++)i+=e.data[r].quantity;Ch(t,i)}catch(e){e.response&&e.response.status===404?Ch(0,0):console.error("Failed to fetch cart item count:",e)}},SA={class:"header"},EA={class:"header-title"},TA={class:"user-actions"},AA={key:0,class:"cart-amount"},RA={key:0,class:"header-user"},LA={to:"/profile",class:"header-text"},CA={key:1,class:"header-user"},xr={__name:"Header",setup(n){const e=fu(),{user:t}=el(),i=async()=>{t.value&&await L0(t.value.ID)};ti(()=>{i()}),Wr(t,()=>{i()});const r=()=>{CE(),i(),e.push("/")},s=Tt(()=>A0.value>0);return(a,o)=>{const l=is("RouterLink");return Me(),Pe("header",SA,[Re(l,{to:"/"},{default:Gt(()=>[Z("h1",EA,[Re(bA),Fn(" SBL SHOP")])]),_:1}),Z("div",TA,[Re(l,{to:"/cart",class:"cart-header-icon"},{default:Gt(()=>[Re(wA,{class:"header-action-btn"}),s.value?(Me(),Pe("p",AA,Ye(Oe(R0)),1)):xn("",!0)]),_:1}),Oe(t)?(Me(),Pe("section",RA,[Z("h1",LA,"Pozdrav, "+Ye(Oe(t).firstname)+"!",1),Z("span",{onClick:o[0]||(o[0]=c=>r()),class:"header-action-btn"},[Re(MA),Fn(" Odjava ")])])):(Me(),Pe("section",CA,[Re(l,{to:"/login",class:"header-action-btn"},{default:Gt(()=>[Fn("PRIJAVA")]),_:1}),Re(l,{to:"/register",class:"header-action-btn"},{default:Gt(()=>[Fn("REGISTRACIJA")]),_:1})]))])])}}},PA={class:"categories-outer-container"},IA={class:"categories"},NA=["onClick"],DA={__name:"Categories",emits:["categorySelected"],setup(n,{emit:e}){const t=e,i=Fe([]),r=Fe(localStorage.getItem("activeCategory")||""),s=async()=>{try{const o=await fetch("http://localhost:3000/categories");if(!o.ok)throw new Error("Failed to fetch categories");const l=await o.json();i.value=l,i.value.push(i.value.shift()),!r.value&&i.value.length?(r.value=i.value[0].category,localStorage.setItem("activeCategory",i.value[0].category),t("categorySelected",i.value[0].category)):t("categorySelected",r.value)}catch(o){console.error("Error fetching categories:",o)}},a=o=>{r.value=o.category,localStorage.setItem("activeCategory",o.category),t("categorySelected",o.category)};return ti(s),(o,l)=>(Me(),Pe("div",PA,[Z("section",IA,[(Me(!0),Pe(dt,null,Ks(i.value,(c,u)=>(Me(),Pe("span",{key:u,class:eu([{"active-category":r.value===c.category},"category-btn"]),onClick:f=>a(c)},Ye(c.category),11,NA))),128))])]))}},OA={class:"item-card"},FA=["src"],kA={class:"item-card-info"},UA={class:"item-card-text"},BA={class:"item-card-title"},zA={class:"item-card-price"},C0={__name:"ItemCard",props:{item:{type:Object,required:!0}},setup(n){const e=t=>t&&t.length>0?t[0]:"assets/images/placeholder.png";return(t,i)=>(Me(),Rt(Oe(S_),{to:{name:"ItemDetail",params:{id:n.item.ID}}},{default:Gt(()=>[Z("article",OA,[Z("img",{class:"item-card-image",src:e(n.item.images),alt:"Item Image"},null,8,FA),Z("section",kA,[Z("div",UA,[Z("h3",BA,Ye(n.item.name),1)]),Z("h3",zA,Ye(n.item.price)+"",1)])])]),_:1},8,["to"]))}},HA={key:0,class:"items-container"},VA={key:1,class:"items-container no-items"},GA=Z("h1",null,"Trenutno nema proizvoda u ovoj kategoriji.",-1),WA=[GA],jA={__name:"Items",setup(n){const e=Fe([]),t=async i=>{try{const r=await Ze.get("http://localhost:3000/items",{params:{category:i}});e.value=r.data}catch(r){console.error("Error fetching items:",r)}};return(i,r)=>(Me(),Pe("div",null,[Re(DA,{onCategorySelected:t}),e.value.length?(Me(),Pe("div",HA,[(Me(!0),Pe(dt,null,Ks(e.value,s=>(Me(),Rt(C0,{item:s,key:s.id},null,8,["item"]))),128))])):(Me(),Pe("div",VA,WA))]))}},$A="/assets/sblgreen-7Le9J_go.png",qA={class:"footer"},XA=Z("h6",{class:"copyright-text"},"SBL 2024",-1),YA=["href"],KA=["src"],ZA={class:"song-info"},JA={class:"song-name"},QA={class:"artist-name"},eR={key:1,class:"spotify-song"},tR=Z("img",{src:$A,class:"album-cover"},null,-1),nR=Z("div",{class:"song-info"},[Z("h6",{class:"song-name"},"Loading...")],-1),iR=[tR,nR],rR="6CLiojP2gPQkZ0AlRI5ZMl",ss={__name:"Footer",setup(n){const e=Fe(null);return ti(async()=>{try{const t=await Ze.get("http://localhost:3000/spotify/random-songs/"+rR);e.value=t.data}catch(t){console.error("Error fetching song data:",t)}}),(t,i)=>(Me(),Pe("footer",qA,[XA,e.value?(Me(),Pe("a",{key:0,href:e.value.external_urls.spotify,class:"spotify-song",target:"_blank"},[Z("img",{src:e.value.album.images[0].url,alt:"Album cover",class:"album-cover"},null,8,KA),Z("div",ZA,[Z("h6",JA,Ye(e.value.name),1),Z("p",QA,Ye(e.value.artists.map(r=>r.name).join(", ")),1)])],8,YA)):(Me(),Pe("section",eR,iR))]))}},sR={__name:"HomeView",setup(n){return(e,t)=>(Me(),Pe(dt,null,[Re(xr),Re(jA),Re(ss)],64))}};var P0={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="envelope",i=512,r=512,s=[128386,9993,61443],a="f0e0",o="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48H48zM0 176V384c0 35.3 28.7 64 64 64H448c35.3 0 64-28.7 64-64V176L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z";n.definition={prefix:e,iconName:t,icon:[i,r,s,a,o]},n.faEnvelope=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=a,n.svgPathData=o,n.aliases=s})(P0);const Xa={__name:"EnvelopeIcon",setup(n){return(e,t)=>(Me(),Rt(Oe(rs),{icon:Oe(P0.faEnvelope)},null,8,["icon"]))}};var I0={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="key",i=512,r=512,s=[128273],a="f084",o="M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17v80c0 13.3 10.7 24 24 24h80c13.3 0 24-10.7 24-24V448h40c13.3 0 24-10.7 24-24V384h40c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z";n.definition={prefix:e,iconName:t,icon:[i,r,s,a,o]},n.faKey=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=a,n.svgPathData=o,n.aliases=s})(I0);const Ph={__name:"KeyIcon",setup(n){return(e,t)=>(Me(),Rt(Oe(rs),{icon:Oe(I0.faKey)},null,8,["icon"]))}},aR={class:"auth-container login-container"},oR={key:0,class:"error-message"},lR=Z("button",{type:"submit",class:"auth-submit"},"PRIJAVI SE",-1),cR={__name:"LoginForm",setup(n){const e=Fe(""),t=Fe(""),i=fu(),r=Fe(""),s=async()=>{try{r.value="",await q_(e.value,t.value,i)}catch(a){console.error("Login failed:",a.message),r.value="Invalid email or password"}};return(a,o)=>(Me(),Pe("div",aR,[Z("form",{onSubmit:lu(s,["prevent"]),class:"auth-form"},[r.value?(Me(),Pe("div",oR,Ye(r.value),1)):xn("",!0),Z("div",null,[vt(Z("input",{type:"email",id:"email","onUpdate:modelValue":o[0]||(o[0]=l=>e.value=l),class:"auth-input",placeholder:"e-mail",required:""},null,512),[[Pt,e.value]]),Re(Xa,{class:"auth-icon"})]),Z("div",null,[vt(Z("input",{type:"password",id:"password","onUpdate:modelValue":o[1]||(o[1]=l=>t.value=l),class:"auth-input",placeholder:"lozinka",required:""},null,512),[[Pt,t.value]]),Re(Ph,{class:"auth-icon"})]),lR],32)]))}},uR={__name:"Loginview",setup(n){return(e,t)=>(Me(),Pe(dt,null,[Re(xr),Re(cR),Re(ss)],64))}};var N0={},D0={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="user-large",i=512,r=512,s=["user-alt"],a="f406",o="M256 288A144 144 0 1 0 256 0a144 144 0 1 0 0 288zm-94.7 32C72.2 320 0 392.2 0 481.3c0 17 13.8 30.7 30.7 30.7H481.3c17 0 30.7-13.8 30.7-30.7C512 392.2 439.8 320 350.7 320H161.3z";n.definition={prefix:e,iconName:t,icon:[i,r,s,a,o]},n.faUserLarge=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=a,n.svgPathData=o,n.aliases=s})(D0);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=D0;n.definition={prefix:e.prefix,iconName:e.iconName,icon:[e.width,e.height,e.aliases,e.unicode,e.svgPathData]},n.faUserAlt=n.definition,n.prefix=e.prefix,n.iconName=e.iconName,n.width=e.width,n.height=e.height,n.ligatures=e.aliases,n.unicode=e.unicode,n.svgPathData=e.svgPathData,n.aliases=e.aliases})(N0);const vg={__name:"PersonIcon",setup(n){return(e,t)=>(Me(),Rt(Oe(rs),{icon:Oe(N0.faUserAlt)},null,8,["icon"]))}},fR={class:"auth-container"},hR=Z("h4",null,"Izradi raun",-1),dR={key:0,class:"error-message"},pR=Z("button",{type:"submit",class:"auth-submit"},"IZRADI RAUN",-1),mR={__name:"RegisterForm",setup(n){const e=Fe(""),t=Fe(""),i=Fe(""),r=Fe(""),s=Fe(""),a=Fe(""),o=Fe(""),l=Fe(""),c=Fe(""),u=fu(),f=async()=>{if(c.value="",r.value!==s.value){c.value="Lozinke se ne podudaraju";return}try{await Ze.post("/auth/register",{firstname:e.value,lastname:t.value,email:i.value,password:r.value,address:a.value,city:o.value,postal_code:l.value});try{await q_(i.value,r.value,u)}catch(h){c.value="Prijava nije uspjela",console.error("Login failed:",h.message)}}catch(h){c.value="Registracija nije uspjela",console.error("Registration failed:",h)}};return(h,d)=>(Me(),Pe("div",fR,[Z("form",{onSubmit:lu(f,["prevent"]),autocomplete:"off",class:"auth-form"},[hR,c.value?(Me(),Pe("div",dR,Ye(c.value),1)):xn("",!0),Z("div",null,[vt(Z("input",{type:"text",id:"firstname","onUpdate:modelValue":d[0]||(d[0]=g=>e.value=g),placeholder:"Ime",class:"auth-input",required:""},null,512),[[Pt,e.value]]),Re(vg,{class:"auth-icon"})]),Z("div",null,[vt(Z("input",{type:"text",id:"lastname","onUpdate:modelValue":d[1]||(d[1]=g=>t.value=g),placeholder:"Prezime",class:"auth-input",required:""},null,512),[[Pt,t.value]]),Re(vg,{class:"auth-icon"})]),Z("div",null,[vt(Z("input",{type:"email",id:"email","onUpdate:modelValue":d[2]||(d[2]=g=>i.value=g),class:"auth-input",placeholder:"e-mail",required:""},null,512),[[Pt,i.value]]),Re(Xa,{class:"auth-icon"})]),Z("div",null,[vt(Z("input",{type:"text",id:"address","onUpdate:modelValue":d[3]||(d[3]=g=>a.value=g),class:"auth-input",placeholder:"Adresa",required:""},null,512),[[Pt,a.value]]),Re(Xa,{class:"auth-icon"})]),Z("div",null,[vt(Z("input",{type:"text",id:"city","onUpdate:modelValue":d[4]||(d[4]=g=>o.value=g),class:"auth-input",placeholder:"Grad",required:""},null,512),[[Pt,o.value]]),Re(Xa,{class:"auth-icon"})]),Z("div",null,[vt(Z("input",{type:"text",id:"postal_code","onUpdate:modelValue":d[5]||(d[5]=g=>l.value=g),class:"auth-input",placeholder:"Potanski broj",required:""},null,512),[[Pt,l.value]]),Re(Xa,{class:"auth-icon"})]),Z("div",null,[vt(Z("input",{type:"password",id:"password","onUpdate:modelValue":d[6]||(d[6]=g=>r.value=g),class:"auth-input",placeholder:"Lozinka",required:""},null,512),[[Pt,r.value]]),Re(Ph,{class:"auth-icon"})]),Z("div",null,[vt(Z("input",{type:"password",id:"confirm_password","onUpdate:modelValue":d[7]||(d[7]=g=>s.value=g),class:"auth-input",placeholder:"Potvrdi lozinku",required:""},null,512),[[Pt,s.value]]),Re(Ph,{class:"auth-icon"})]),pR],32)]))}},gR={__name:"RegisterView",setup(n){return(e,t)=>(Me(),Pe(dt,null,[Re(xr),Re(mR),Re(ss)],64))}};function vR(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function yR(n,e,t){return e&&vR(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}/*!
 * Splide.js
 * Version  : 4.1.3
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var yg="(prefers-reduced-motion: reduce)",Fs=1,_R=2,ia=3,ga=4,rl=5,wc=6,Bc=7,xR={CREATED:Fs,MOUNTED:_R,IDLE:ia,MOVING:ga,SCROLLING:rl,DRAGGING:wc,DESTROYED:Bc};function Ai(n){n.length=0}function br(n,e,t){return Array.prototype.slice.call(n,e,t)}function ot(n){return n.bind.apply(n,[null].concat(br(arguments,1)))}var O0=setTimeout,Ih=function(){};function _g(n){return requestAnimationFrame(n)}function bu(n,e){return typeof e===n}function Po(n){return!zd(n)&&bu("object",n)}var Bd=Array.isArray,F0=ot(bu,"function"),dr=ot(bu,"string"),sl=ot(bu,"undefined");function zd(n){return n===null}function k0(n){try{return n instanceof(n.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function al(n){return Bd(n)?n:[n]}function Tn(n,e){al(n).forEach(e)}function Hd(n,e){return n.indexOf(e)>-1}function Mc(n,e){return n.push.apply(n,al(e)),n}function yi(n,e,t){n&&Tn(e,function(i){i&&n.classList[t?"add":"remove"](i)})}function Zn(n,e){yi(n,dr(e)?e.split(" "):e,!0)}function ol(n,e){Tn(e,n.appendChild.bind(n))}function Vd(n,e){Tn(n,function(t){var i=(e||t).parentNode;i&&i.insertBefore(t,e)})}function Io(n,e){return k0(n)&&(n.msMatchesSelector||n.matches).call(n,e)}function U0(n,e){var t=n?br(n.children):[];return e?t.filter(function(i){return Io(i,e)}):t}function ll(n,e){return e?U0(n,e)[0]:n.firstElementChild}var No=Object.keys;function $r(n,e,t){return n&&(t?No(n).reverse():No(n)).forEach(function(i){i!=="__proto__"&&e(n[i],i)}),n}function Do(n){return br(arguments,1).forEach(function(e){$r(e,function(t,i){n[i]=e[i]})}),n}function Ji(n){return br(arguments,1).forEach(function(e){$r(e,function(t,i){Bd(t)?n[i]=t.slice():Po(t)?n[i]=Ji({},Po(n[i])?n[i]:{},t):n[i]=t})}),n}function xg(n,e){Tn(e||No(n),function(t){delete n[t]})}function Jn(n,e){Tn(n,function(t){Tn(e,function(i){t&&t.removeAttribute(i)})})}function ze(n,e,t){Po(e)?$r(e,function(i,r){ze(n,r,i)}):Tn(n,function(i){zd(t)||t===""?Jn(i,e):i.setAttribute(e,String(t))})}function Ws(n,e,t){var i=document.createElement(n);return e&&(dr(e)?Zn(i,e):ze(i,e)),t&&ol(t,i),i}function Dn(n,e,t){if(sl(t))return getComputedStyle(n)[e];zd(t)||(n.style[e]=""+t)}function Oo(n,e){Dn(n,"display",e)}function B0(n){n.setActive&&n.setActive()||n.focus({preventScroll:!0})}function Un(n,e){return n.getAttribute(e)}function bg(n,e){return n&&n.classList.contains(e)}function yn(n){return n.getBoundingClientRect()}function Zr(n){Tn(n,function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})}function z0(n){return ll(new DOMParser().parseFromString(n,"text/html").body)}function di(n,e){n.preventDefault(),e&&(n.stopPropagation(),n.stopImmediatePropagation())}function H0(n,e){return n&&n.querySelector(e)}function Gd(n,e){return e?br(n.querySelectorAll(e)):[]}function _i(n,e){yi(n,e,!1)}function Nh(n){return n.timeStamp}function Ir(n){return dr(n)?n:n?n+"px":""}var cl="splide",Wd="data-"+cl;function lo(n,e){if(!n)throw new Error("["+cl+"] "+(e||""))}var pr=Math.min,zc=Math.max,Hc=Math.floor,Fo=Math.ceil,cn=Math.abs;function V0(n,e,t){return cn(n-e)<t}function Sc(n,e,t,i){var r=pr(e,t),s=zc(e,t);return i?r<n&&n<s:r<=n&&n<=s}function Ps(n,e,t){var i=pr(e,t),r=zc(e,t);return pr(zc(i,n),r)}function Dh(n){return+(n>0)-+(n<0)}function Oh(n,e){return Tn(e,function(t){n=n.replace("%s",""+t)}),n}function jd(n){return n<10?"0"+n:""+n}var wg={};function bR(n){return""+n+jd(wg[n]=(wg[n]||0)+1)}function G0(){var n=[];function e(a,o,l,c){r(a,o,function(u,f,h){var d="addEventListener"in u,g=d?u.removeEventListener.bind(u,f,l,c):u.removeListener.bind(u,l);d?u.addEventListener(f,l,c):u.addListener(l),n.push([u,f,h,l,g])})}function t(a,o,l){r(a,o,function(c,u,f){n=n.filter(function(h){return h[0]===c&&h[1]===u&&h[2]===f&&(!l||h[3]===l)?(h[4](),!1):!0})})}function i(a,o,l){var c,u=!0;return typeof CustomEvent=="function"?c=new CustomEvent(o,{bubbles:u,detail:l}):(c=document.createEvent("CustomEvent"),c.initCustomEvent(o,u,!1,l)),a.dispatchEvent(c),c}function r(a,o,l){Tn(a,function(c){c&&Tn(o,function(u){u.split(" ").forEach(function(f){var h=f.split(".");l(c,h[0],h[1])})})})}function s(){n.forEach(function(a){a[4]()}),Ai(n)}return{bind:e,unbind:t,dispatch:i,destroy:s}}var wr="mounted",Mg="ready",Ri="move",va="moved",$d="click",W0="active",j0="inactive",$0="visible",q0="hidden",At="refresh",rn="updated",ra="resize",wu="resized",X0="drag",Y0="dragging",K0="dragged",Mu="scroll",as="scrolled",wR="overflow",qd="destroy",Z0="arrows:mounted",J0="arrows:updated",Q0="pagination:mounted",ex="pagination:updated",Xd="navigation:mounted",Yd="autoplay:play",tx="autoplay:playing",Kd="autoplay:pause",Zd="lazyload:loaded",nx="sk",ix="sh",Vc="ei";function xt(n){var e=n?n.event.bus:document.createDocumentFragment(),t=G0();function i(s,a){t.bind(e,al(s).join(" "),function(o){a.apply(a,Bd(o.detail)?o.detail:[])})}function r(s){t.dispatch(e,s,br(arguments,1))}return n&&n.event.on(qd,t.destroy),Do(t,{bus:e,on:i,off:ot(t.unbind,e),emit:r})}function Su(n,e,t,i){var r=Date.now,s,a=0,o,l=!0,c=0;function u(){if(!l){if(a=n?pr((r()-s)/n,1):1,t&&t(a),a>=1&&(e(),s=r(),i&&++c>=i))return h();o=_g(u)}}function f(p){p||g(),s=r()-(p?a*n:0),l=!1,o=_g(u)}function h(){l=!0}function d(){s=r(),a=0,t&&t(a)}function g(){o&&cancelAnimationFrame(o),a=0,o=0,l=!0}function v(p){n=p}function y(){return l}return{start:f,rewind:d,pause:h,cancel:g,set:v,isPaused:y}}function MR(n){var e=n;function t(r){e=r}function i(r){return Hd(al(r),e)}return{set:t,is:i}}function SR(n,e){var t=Su(0,n,null,1);return function(){t.isPaused()&&t.start()}}function ER(n,e,t){var i=n.state,r=t.breakpoints||{},s=t.reducedMotion||{},a=G0(),o=[];function l(){var g=t.mediaQuery==="min";No(r).sort(function(v,y){return g?+v-+y:+y-+v}).forEach(function(v){u(r[v],"("+(g?"min":"max")+"-width:"+v+"px)")}),u(s,yg),f()}function c(g){g&&a.destroy()}function u(g,v){var y=matchMedia(v);a.bind(y,"change",f),o.push([g,y])}function f(){var g=i.is(Bc),v=t.direction,y=o.reduce(function(p,m){return Ji(p,m[1].matches?m[0]:{})},{});xg(t),d(y),t.destroy?n.destroy(t.destroy==="completely"):g?(c(!0),n.mount()):v!==t.direction&&n.refresh()}function h(g){matchMedia(yg).matches&&(g?Ji(t,s):xg(t,No(s)))}function d(g,v,y){Ji(t,g),v&&Ji(Object.getPrototypeOf(t),g),(y||!i.is(Fs))&&n.emit(rn,t)}return{setup:l,destroy:c,reduce:h,set:d}}var Eu="Arrow",Tu=Eu+"Left",Au=Eu+"Right",rx=Eu+"Up",sx=Eu+"Down",Sg="rtl",Ru="ttb",ff={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[rx,Au],ArrowRight:[sx,Tu]};function TR(n,e,t){function i(s,a,o){o=o||t.direction;var l=o===Sg&&!a?1:o===Ru?0:-1;return ff[s]&&ff[s][l]||s.replace(/width|left|right/i,function(c,u){var f=ff[c.toLowerCase()][l]||c;return u>0?f.charAt(0).toUpperCase()+f.slice(1):f})}function r(s){return s*(t.direction===Sg?1:-1)}return{resolve:i,orient:r}}var wi="role",js="tabindex",AR="disabled",Hn="aria-",ul=Hn+"controls",ax=Hn+"current",Eg=Hn+"selected",bn=Hn+"label",Jd=Hn+"labelledby",ox=Hn+"hidden",Qd=Hn+"orientation",ko=Hn+"roledescription",Tg=Hn+"live",Ag=Hn+"busy",Rg=Hn+"atomic",ep=[wi,js,AR,ul,ax,bn,Jd,ox,Qd,ko],ii=cl+"__",Mr="is-",hf=cl,Lg=ii+"track",RR=ii+"list",Lu=ii+"slide",lx=Lu+"--clone",LR=Lu+"__container",tp=ii+"arrows",Cu=ii+"arrow",cx=Cu+"--prev",ux=Cu+"--next",Pu=ii+"pagination",fx=Pu+"__page",CR=ii+"progress",PR=CR+"__bar",IR=ii+"toggle",NR=ii+"spinner",DR=ii+"sr",OR=Mr+"initialized",Jr=Mr+"active",hx=Mr+"prev",dx=Mr+"next",Fh=Mr+"visible",kh=Mr+"loading",px=Mr+"focus-in",mx=Mr+"overflow",FR=[Jr,Fh,hx,dx,kh,px,mx],kR={slide:Lu,clone:lx,arrows:tp,arrow:Cu,prev:cx,next:ux,pagination:Pu,page:fx,spinner:NR};function UR(n,e){if(F0(n.closest))return n.closest(e);for(var t=n;t&&t.nodeType===1&&!Io(t,e);)t=t.parentElement;return t}var BR=5,Cg=200,gx="touchstart mousedown",df="touchmove mousemove",pf="touchend touchcancel mouseup click";function zR(n,e,t){var i=xt(n),r=i.on,s=i.bind,a=n.root,o=t.i18n,l={},c=[],u=[],f=[],h,d,g;function v(){_(),w(),m()}function y(){r(At,p),r(At,v),r(rn,m),s(document,gx+" keydown",function(b){g=b.type==="keydown"},{capture:!0}),s(a,"focusin",function(){yi(a,px,!!g)})}function p(b){var N=ep.concat("style");Ai(c),_i(a,u),_i(h,f),Jn([h,d],N),Jn(a,b?N:["style",ko])}function m(){_i(a,u),_i(h,f),u=A(hf),f=A(Lg),Zn(a,u),Zn(h,f),ze(a,bn,t.label),ze(a,Jd,t.labelledby)}function _(){h=E("."+Lg),d=ll(h,"."+RR),lo(h&&d,"A track/list element is missing."),Mc(c,U0(d,"."+Lu+":not(."+lx+")")),$r({arrows:tp,pagination:Pu,prev:cx,next:ux,bar:PR,toggle:IR},function(b,N){l[N]=E("."+b)}),Do(l,{root:a,track:h,list:d,slides:c})}function w(){var b=a.id||bR(cl),N=t.role;a.id=b,h.id=h.id||b+"-track",d.id=d.id||b+"-list",!Un(a,wi)&&a.tagName!=="SECTION"&&N&&ze(a,wi,N),ze(a,ko,o.carousel),ze(d,wi,"presentation")}function E(b){var N=H0(a,b);return N&&UR(N,"."+hf)===a?N:void 0}function A(b){return[b+"--"+t.type,b+"--"+t.direction,t.drag&&b+"--draggable",t.isNavigation&&b+"--nav",b===hf&&Jr]}return Do(l,{setup:v,mount:y,destroy:p})}var sa="slide",ya="loop",fl="fade";function HR(n,e,t,i){var r=xt(n),s=r.on,a=r.emit,o=r.bind,l=n.Components,c=n.root,u=n.options,f=u.isNavigation,h=u.updateOnMove,d=u.i18n,g=u.pagination,v=u.slideFocus,y=l.Direction.resolve,p=Un(i,"style"),m=Un(i,bn),_=t>-1,w=ll(i,"."+LR),E;function A(){_||(i.id=c.id+"-slide"+jd(e+1),ze(i,wi,g?"tabpanel":"group"),ze(i,ko,d.slide),ze(i,bn,m||Oh(d.slideLabel,[e+1,n.length]))),b()}function b(){o(i,"click",ot(a,$d,Y)),o(i,"keydown",ot(a,nx,Y)),s([va,ix,as],R),s(Xd,K),h&&s(Ri,H)}function N(){E=!0,r.destroy(),_i(i,FR),Jn(i,ep),ze(i,"style",p),ze(i,bn,m||"")}function K(){var oe=n.splides.map(function(te){var ie=te.splide.Components.Slides.getAt(e);return ie?ie.slide.id:""}).join(" ");ze(i,bn,Oh(d.slideX,(_?t:e)+1)),ze(i,ul,oe),ze(i,wi,v?"button":""),v&&Jn(i,ko)}function H(){E||R()}function R(){if(!E){var oe=n.index;J(),P(),yi(i,hx,e===oe-1),yi(i,dx,e===oe+1)}}function J(){var oe=G();oe!==bg(i,Jr)&&(yi(i,Jr,oe),ze(i,ax,f&&oe||""),a(oe?W0:j0,Y))}function P(){var oe=W(),te=!oe&&(!G()||_);if(n.state.is([ga,rl])||ze(i,ox,te||""),ze(Gd(i,u.focusableNodes||""),js,te?-1:""),v&&ze(i,js,te?-1:0),oe!==bg(i,Fh)&&(yi(i,Fh,oe),a(oe?$0:q0,Y)),!oe&&document.activeElement===i){var ie=l.Slides.getAt(n.index);ie&&B0(ie.slide)}}function z(oe,te,ie){Dn(ie&&w||i,oe,te)}function G(){var oe=n.index;return oe===e||u.cloneStatus&&oe===t}function W(){if(n.is(fl))return G();var oe=yn(l.Elements.track),te=yn(i),ie=y("left",!0),_e=y("right",!0);return Hc(oe[ie])<=Fo(te[ie])&&Hc(te[_e])<=Fo(oe[_e])}function V(oe,te){var ie=cn(oe-e);return!_&&(u.rewind||n.is(ya))&&(ie=pr(ie,n.length-ie)),ie<=te}var Y={index:e,slideIndex:t,slide:i,container:w,isClone:_,mount:A,destroy:N,update:R,style:z,isWithin:V};return Y}function VR(n,e,t){var i=xt(n),r=i.on,s=i.emit,a=i.bind,o=e.Elements,l=o.slides,c=o.list,u=[];function f(){h(),r(At,d),r(At,h)}function h(){l.forEach(function(R,J){v(R,J,-1)})}function d(){E(function(R){R.destroy()}),Ai(u)}function g(){E(function(R){R.update()})}function v(R,J,P){var z=HR(n,J,P,R);z.mount(),u.push(z),u.sort(function(G,W){return G.index-W.index})}function y(R){return R?A(function(J){return!J.isClone}):u}function p(R){var J=e.Controller,P=J.toIndex(R),z=J.hasFocus()?1:t.perPage;return A(function(G){return Sc(G.index,P,P+z-1)})}function m(R){return A(R)[0]}function _(R,J){Tn(R,function(P){if(dr(P)&&(P=z0(P)),k0(P)){var z=l[J];z?Vd(P,z):ol(c,P),Zn(P,t.classes.slide),N(P,ot(s,ra))}}),s(At)}function w(R){Zr(A(R).map(function(J){return J.slide})),s(At)}function E(R,J){y(J).forEach(R)}function A(R){return u.filter(F0(R)?R:function(J){return dr(R)?Io(J.slide,R):Hd(al(R),J.index)})}function b(R,J,P){E(function(z){z.style(R,J,P)})}function N(R,J){var P=Gd(R,"img"),z=P.length;z?P.forEach(function(G){a(G,"load error",function(){--z||J()})}):J()}function K(R){return R?l.length:u.length}function H(){return u.length>t.perPage}return{mount:f,destroy:d,update:g,register:v,get:y,getIn:p,getAt:m,add:_,remove:w,forEach:E,filter:A,style:b,getLength:K,isEnough:H}}function GR(n,e,t){var i=xt(n),r=i.on,s=i.bind,a=i.emit,o=e.Slides,l=e.Direction.resolve,c=e.Elements,u=c.root,f=c.track,h=c.list,d=o.getAt,g=o.style,v,y,p;function m(){_(),s(window,"resize load",SR(ot(a,ra))),r([rn,At],_),r(ra,w)}function _(){v=t.direction===Ru,Dn(u,"maxWidth",Ir(t.width)),Dn(f,l("paddingLeft"),E(!1)),Dn(f,l("paddingRight"),E(!0)),w(!0)}function w(Y){var oe=yn(u);(Y||y.width!==oe.width||y.height!==oe.height)&&(Dn(f,"height",A()),g(l("marginRight"),Ir(t.gap)),g("width",N()),g("height",K(),!0),y=oe,a(wu),p!==(p=V())&&(yi(u,mx,p),a(wR,p)))}function E(Y){var oe=t.padding,te=l(Y?"right":"left");return oe&&Ir(oe[te]||(Po(oe)?0:oe))||"0px"}function A(){var Y="";return v&&(Y=b(),lo(Y,"height or heightRatio is missing."),Y="calc("+Y+" - "+E(!1)+" - "+E(!0)+")"),Y}function b(){return Ir(t.height||yn(h).width*t.heightRatio)}function N(){return t.autoWidth?null:Ir(t.fixedWidth)||(v?"":H())}function K(){return Ir(t.fixedHeight)||(v?t.autoHeight?null:H():b())}function H(){var Y=Ir(t.gap);return"calc((100%"+(Y&&" + "+Y)+")/"+(t.perPage||1)+(Y&&" - "+Y)+")"}function R(){return yn(h)[l("width")]}function J(Y,oe){var te=d(Y||0);return te?yn(te.slide)[l("width")]+(oe?0:G()):0}function P(Y,oe){var te=d(Y);if(te){var ie=yn(te.slide)[l("right")],_e=yn(h)[l("left")];return cn(ie-_e)+(oe?0:G())}return 0}function z(Y){return P(n.length-1)-P(0)+J(0,Y)}function G(){var Y=d(0);return Y&&parseFloat(Dn(Y.slide,l("marginRight")))||0}function W(Y){return parseFloat(Dn(f,l("padding"+(Y?"Right":"Left"))))||0}function V(){return n.is(fl)||z(!0)>R()}return{mount:m,resize:w,listSize:R,slideSize:J,sliderSize:z,totalSize:P,getPadding:W,isOverflow:V}}var WR=2;function jR(n,e,t){var i=xt(n),r=i.on,s=e.Elements,a=e.Slides,o=e.Direction.resolve,l=[],c;function u(){r(At,f),r([rn,ra],d),(c=y())&&(g(c),e.Layout.resize(!0))}function f(){h(),u()}function h(){Zr(l),Ai(l),i.destroy()}function d(){var p=y();c!==p&&(c<p||!p)&&i.emit(At)}function g(p){var m=a.get().slice(),_=m.length;if(_){for(;m.length<p;)Mc(m,m);Mc(m.slice(-p),m.slice(0,p)).forEach(function(w,E){var A=E<p,b=v(w.slide,E);A?Vd(b,m[0].slide):ol(s.list,b),Mc(l,b),a.register(b,E-p+(A?0:_),w.index)})}}function v(p,m){var _=p.cloneNode(!0);return Zn(_,t.classes.clone),_.id=n.root.id+"-clone"+jd(m+1),_}function y(){var p=t.clones;if(!n.is(ya))p=0;else if(sl(p)){var m=t[o("fixedWidth")]&&e.Layout.slideSize(0),_=m&&Fo(yn(s.track)[o("width")]/m);p=_||t[o("autoWidth")]&&n.length||t.perPage*WR}return p}return{mount:u,destroy:h}}function $R(n,e,t){var i=xt(n),r=i.on,s=i.emit,a=n.state.set,o=e.Layout,l=o.slideSize,c=o.getPadding,u=o.totalSize,f=o.listSize,h=o.sliderSize,d=e.Direction,g=d.resolve,v=d.orient,y=e.Elements,p=y.list,m=y.track,_;function w(){_=e.Transition,r([wr,wu,rn,At],E)}function E(){e.Controller.isBusy()||(e.Scroll.cancel(),b(n.index),e.Slides.update())}function A(te,ie,_e,le){te!==ie&&Y(te>_e)&&(R(),N(H(z(),te>_e),!0)),a(ga),s(Ri,ie,_e,te),_.start(ie,function(){a(ia),s(va,ie,_e,te),le&&le()})}function b(te){N(P(te,!0))}function N(te,ie){if(!n.is(fl)){var _e=ie?te:K(te);Dn(p,"transform","translate"+g("X")+"("+_e+"px)"),te!==_e&&s(ix)}}function K(te){if(n.is(ya)){var ie=J(te),_e=ie>e.Controller.getEnd(),le=ie<0;(le||_e)&&(te=H(te,_e))}return te}function H(te,ie){var _e=te-V(ie),le=h();return te-=v(le*(Fo(cn(_e)/le)||1))*(ie?1:-1),te}function R(){N(z(),!0),_.cancel()}function J(te){for(var ie=e.Slides.get(),_e=0,le=1/0,he=0;he<ie.length;he++){var Ee=ie[he].index,F=cn(P(Ee,!0)-te);if(F<=le)le=F,_e=Ee;else break}return _e}function P(te,ie){var _e=v(u(te-1)-W(te));return ie?G(_e):_e}function z(){var te=g("left");return yn(p)[te]-yn(m)[te]+v(c(!1))}function G(te){return t.trimSpace&&n.is(sa)&&(te=Ps(te,0,v(h(!0)-f()))),te}function W(te){var ie=t.focus;return ie==="center"?(f()-l(te,!0))/2:+ie*l(te)||0}function V(te){return P(te?e.Controller.getEnd():0,!!t.trimSpace)}function Y(te){var ie=v(H(z(),te));return te?ie>=0:ie<=p[g("scrollWidth")]-yn(m)[g("width")]}function oe(te,ie){ie=sl(ie)?z():ie;var _e=te!==!0&&v(ie)<v(V(!1)),le=te!==!1&&v(ie)>v(V(!0));return _e||le}return{mount:w,move:A,jump:b,translate:N,shift:H,cancel:R,toIndex:J,toPosition:P,getPosition:z,getLimit:V,exceededLimit:oe,reposition:E}}function qR(n,e,t){var i=xt(n),r=i.on,s=i.emit,a=e.Move,o=a.getPosition,l=a.getLimit,c=a.toPosition,u=e.Slides,f=u.isEnough,h=u.getLength,d=t.omitEnd,g=n.is(ya),v=n.is(sa),y=ot(z,!1),p=ot(z,!0),m=t.start||0,_,w=m,E,A,b;function N(){K(),r([rn,At,Vc],K),r(wu,H)}function K(){E=h(!0),A=t.perMove,b=t.perPage,_=Y();var F=Ps(m,0,d?_:E-1);F!==m&&(m=F,a.reposition())}function H(){_!==Y()&&s(Vc)}function R(F,U,ae){if(!Ee()){var X=P(F),ne=V(X);ne>-1&&(U||ne!==m)&&(_e(ne),a.move(X,ne,w,ae))}}function J(F,U,ae,X){e.Scroll.scroll(F,U,ae,function(){var ne=V(a.toIndex(o()));_e(d?pr(ne,_):ne),X&&X()})}function P(F){var U=m;if(dr(F)){var ae=F.match(/([+\-<>])(\d+)?/)||[],X=ae[1],ne=ae[2];X==="+"||X==="-"?U=G(m+ +(""+X+(+ne||1)),m):X===">"?U=ne?oe(+ne):y(!0):X==="<"&&(U=p(!0))}else U=g?F:Ps(F,0,_);return U}function z(F,U){var ae=A||(he()?1:b),X=G(m+ae*(F?-1:1),m,!(A||he()));return X===-1&&v&&!V0(o(),l(!F),1)?F?0:_:U?X:V(X)}function G(F,U,ae){if(f()||he()){var X=W(F);X!==F&&(U=F,F=X,ae=!1),F<0||F>_?!A&&(Sc(0,F,U,!0)||Sc(_,U,F,!0))?F=oe(te(F)):g?F=ae?F<0?-(E%b||b):E:F:t.rewind?F=F<0?_:0:F=-1:ae&&F!==U&&(F=oe(te(U)+(F<U?-1:1)))}else F=-1;return F}function W(F){if(v&&t.trimSpace==="move"&&F!==m)for(var U=o();U===c(F,!0)&&Sc(F,0,n.length-1,!t.rewind);)F<m?--F:++F;return F}function V(F){return g?(F+E)%E||0:F}function Y(){for(var F=E-(he()||g&&A?1:b);d&&F-- >0;)if(c(E-1,!0)!==c(F,!0)){F++;break}return Ps(F,0,E-1)}function oe(F){return Ps(he()?F:b*F,0,_)}function te(F){return he()?pr(F,_):Hc((F>=_?E-1:F)/b)}function ie(F){var U=a.toIndex(F);return v?Ps(U,0,_):U}function _e(F){F!==m&&(w=m,m=F)}function le(F){return F?w:m}function he(){return!sl(t.focus)||t.isNavigation}function Ee(){return n.state.is([ga,rl])&&!!t.waitForTransition}return{mount:N,go:R,scroll:J,getNext:y,getPrev:p,getAdjacent:z,getEnd:Y,setIndex:_e,getIndex:le,toIndex:oe,toPage:te,toDest:ie,hasFocus:he,isBusy:Ee}}var XR="http://www.w3.org/2000/svg",YR="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",Dl=40;function KR(n,e,t){var i=xt(n),r=i.on,s=i.bind,a=i.emit,o=t.classes,l=t.i18n,c=e.Elements,u=e.Controller,f=c.arrows,h=c.track,d=f,g=c.prev,v=c.next,y,p,m={};function _(){E(),r(rn,w)}function w(){A(),_()}function E(){var J=t.arrows;J&&!(g&&v)&&K(),g&&v&&(Do(m,{prev:g,next:v}),Oo(d,J?"":"none"),Zn(d,p=tp+"--"+t.direction),J&&(b(),R(),ze([g,v],ul,h.id),a(Z0,g,v)))}function A(){i.destroy(),_i(d,p),y?(Zr(f?[g,v]:d),g=v=null):Jn([g,v],ep)}function b(){r([wr,va,At,as,Vc],R),s(v,"click",ot(N,">")),s(g,"click",ot(N,"<"))}function N(J){u.go(J,!0)}function K(){d=f||Ws("div",o.arrows),g=H(!0),v=H(!1),y=!0,ol(d,[g,v]),!f&&Vd(d,h)}function H(J){var P='<button class="'+o.arrow+" "+(J?o.prev:o.next)+'" type="button"><svg xmlns="'+XR+'" viewBox="0 0 '+Dl+" "+Dl+'" width="'+Dl+'" height="'+Dl+'" focusable="false"><path d="'+(t.arrowPath||YR)+'" />';return z0(P)}function R(){if(g&&v){var J=n.index,P=u.getPrev(),z=u.getNext(),G=P>-1&&J<P?l.last:l.prev,W=z>-1&&J>z?l.first:l.next;g.disabled=P<0,v.disabled=z<0,ze(g,bn,G),ze(v,bn,W),a(J0,g,v,P,z)}}return{arrows:m,mount:_,destroy:A,update:R}}var ZR=Wd+"-interval";function JR(n,e,t){var i=xt(n),r=i.on,s=i.bind,a=i.emit,o=Su(t.interval,n.go.bind(n,">"),b),l=o.isPaused,c=e.Elements,u=e.Elements,f=u.root,h=u.toggle,d=t.autoplay,g,v,y=d==="pause";function p(){d&&(m(),h&&ze(h,ul,c.track.id),y||_(),A())}function m(){t.pauseOnHover&&s(f,"mouseenter mouseleave",function(K){g=K.type==="mouseenter",E()}),t.pauseOnFocus&&s(f,"focusin focusout",function(K){v=K.type==="focusin",E()}),h&&s(h,"click",function(){y?_():w(!0)}),r([Ri,Mu,At],o.rewind),r(Ri,N)}function _(){l()&&e.Slides.isEnough()&&(o.start(!t.resetProgress),v=g=y=!1,A(),a(Yd))}function w(K){K===void 0&&(K=!0),y=!!K,A(),l()||(o.pause(),a(Kd))}function E(){y||(g||v?w(!1):_())}function A(){h&&(yi(h,Jr,!y),ze(h,bn,t.i18n[y?"play":"pause"]))}function b(K){var H=c.bar;H&&Dn(H,"width",K*100+"%"),a(tx,K)}function N(K){var H=e.Slides.getAt(K);o.set(H&&+Un(H.slide,ZR)||t.interval)}return{mount:p,destroy:o.cancel,play:_,pause:w,isPaused:l}}function QR(n,e,t){var i=xt(n),r=i.on;function s(){t.cover&&(r(Zd,ot(o,!0)),r([wr,rn,At],ot(a,!0)))}function a(l){e.Slides.forEach(function(c){var u=ll(c.container||c.slide,"img");u&&u.src&&o(l,u,c)})}function o(l,c,u){u.style("background",l?'center/cover no-repeat url("'+c.src+'")':"",!0),Oo(c,l?"none":"")}return{mount:s,destroy:ot(a,!1)}}var eL=10,tL=600,nL=.6,iL=1.5,rL=800;function sL(n,e,t){var i=xt(n),r=i.on,s=i.emit,a=n.state.set,o=e.Move,l=o.getPosition,c=o.getLimit,u=o.exceededLimit,f=o.translate,h=n.is(sa),d,g,v=1;function y(){r(Ri,w),r([rn,At],E)}function p(b,N,K,H,R){var J=l();if(w(),K&&(!h||!u())){var P=e.Layout.sliderSize(),z=Dh(b)*P*Hc(cn(b)/P)||0;b=o.toPosition(e.Controller.toDest(b%P))+z}var G=V0(J,b,1);v=1,N=G?0:N||zc(cn(b-J)/iL,rL),g=H,d=Su(N,m,ot(_,J,b,R),1),a(rl),s(Mu),d.start()}function m(){a(ia),g&&g(),s(as)}function _(b,N,K,H){var R=l(),J=b+(N-b)*A(H),P=(J-R)*v;f(R+P),h&&!K&&u()&&(v*=nL,cn(P)<eL&&p(c(u(!0)),tL,!1,g,!0))}function w(){d&&d.cancel()}function E(){d&&!d.isPaused()&&(w(),m())}function A(b){var N=t.easingFunc;return N?N(b):1-Math.pow(1-b,4)}return{mount:y,destroy:w,scroll:p,cancel:E}}var Is={passive:!1,capture:!0};function aL(n,e,t){var i=xt(n),r=i.on,s=i.emit,a=i.bind,o=i.unbind,l=n.state,c=e.Move,u=e.Scroll,f=e.Controller,h=e.Elements.track,d=e.Media.reduce,g=e.Direction,v=g.resolve,y=g.orient,p=c.getPosition,m=c.exceededLimit,_,w,E,A,b,N=!1,K,H,R;function J(){a(h,df,Ih,Is),a(h,pf,Ih,Is),a(h,gx,z,Is),a(h,"click",V,{capture:!0}),a(h,"dragstart",di),r([wr,rn],P)}function P(){var x=t.drag;Q(!x),A=x==="free"}function z(x){if(K=!1,!H){var T=ne(x);X(x.target)&&(T||!x.button)&&(f.isBusy()?di(x,!0):(R=T?h:window,b=l.is([ga,rl]),E=null,a(R,df,G,Is),a(R,pf,W,Is),c.cancel(),u.cancel(),Y(x)))}}function G(x){if(l.is(wc)||(l.set(wc),s(X0)),x.cancelable)if(b){c.translate(_+ae(he(x)));var T=Ee(x)>Cg,O=N!==(N=m());(T||O)&&Y(x),K=!0,s(Y0),di(x)}else ie(x)&&(b=te(x),di(x))}function W(x){l.is(wc)&&(l.set(ia),s(K0)),b&&(oe(x),di(x)),o(R,df,G),o(R,pf,W),b=!1}function V(x){!H&&K&&di(x,!0)}function Y(x){E=w,w=x,_=p()}function oe(x){var T=_e(x),O=le(T),B=t.rewind&&t.rewindByDrag;d(!1),A?f.scroll(O,0,t.snap):n.is(fl)?f.go(y(Dh(T))<0?B?"<":"-":B?">":"+"):n.is(sa)&&N&&B?f.go(m(!0)?">":"<"):f.go(f.toDest(O),!0),d(!0)}function te(x){var T=t.dragMinThreshold,O=Po(T),B=O&&T.mouse||0,M=(O?T.touch:+T)||10;return cn(he(x))>(ne(x)?M:B)}function ie(x){return cn(he(x))>cn(he(x,!0))}function _e(x){if(n.is(ya)||!N){var T=Ee(x);if(T&&T<Cg)return he(x)/T}return 0}function le(x){return p()+Dh(x)*pr(cn(x)*(t.flickPower||600),A?1/0:e.Layout.listSize()*(t.flickMaxPages||1))}function he(x,T){return U(x,T)-U(F(x),T)}function Ee(x){return Nh(x)-Nh(F(x))}function F(x){return w===x&&E||w}function U(x,T){return(ne(x)?x.changedTouches[0]:x)["page"+v(T?"Y":"X")]}function ae(x){return x/(N&&n.is(sa)?BR:1)}function X(x){var T=t.noDrag;return!Io(x,"."+fx+", ."+Cu)&&(!T||!Io(x,T))}function ne(x){return typeof TouchEvent<"u"&&x instanceof TouchEvent}function we(){return b}function Q(x){H=x}return{mount:J,disable:Q,isDragging:we}}var oL={Spacebar:" ",Right:Au,Left:Tu,Up:rx,Down:sx};function np(n){return n=dr(n)?n:n.key,oL[n]||n}var Pg="keydown";function lL(n,e,t){var i=xt(n),r=i.on,s=i.bind,a=i.unbind,o=n.root,l=e.Direction.resolve,c,u;function f(){h(),r(rn,d),r(rn,h),r(Ri,v)}function h(){var p=t.keyboard;p&&(c=p==="global"?window:o,s(c,Pg,y))}function d(){a(c,Pg)}function g(p){u=p}function v(){var p=u;u=!0,O0(function(){u=p})}function y(p){if(!u){var m=np(p);m===l(Tu)?n.go("<"):m===l(Au)&&n.go(">")}}return{mount:f,destroy:d,disable:g}}var co=Wd+"-lazy",Ec=co+"-srcset",cL="["+co+"], ["+Ec+"]";function uL(n,e,t){var i=xt(n),r=i.on,s=i.off,a=i.bind,o=i.emit,l=t.lazyLoad==="sequential",c=[va,as],u=[];function f(){t.lazyLoad&&(h(),r(At,h))}function h(){Ai(u),d(),l?p():(s(c),r(c,g),g())}function d(){e.Slides.forEach(function(m){Gd(m.slide,cL).forEach(function(_){var w=Un(_,co),E=Un(_,Ec);if(w!==_.src||E!==_.srcset){var A=t.classes.spinner,b=_.parentElement,N=ll(b,"."+A)||Ws("span",A,b);u.push([_,m,N]),_.src||Oo(_,"none")}})})}function g(){u=u.filter(function(m){var _=t.perPage*((t.preloadPages||1)+1)-1;return m[1].isWithin(n.index,_)?v(m):!0}),u.length||s(c)}function v(m){var _=m[0];Zn(m[1].slide,kh),a(_,"load error",ot(y,m)),ze(_,"src",Un(_,co)),ze(_,"srcset",Un(_,Ec)),Jn(_,co),Jn(_,Ec)}function y(m,_){var w=m[0],E=m[1];_i(E.slide,kh),_.type!=="error"&&(Zr(m[2]),Oo(w,""),o(Zd,w,E),o(ra)),l&&p()}function p(){u.length&&v(u.shift())}return{mount:f,destroy:ot(Ai,u),check:g}}function fL(n,e,t){var i=xt(n),r=i.on,s=i.emit,a=i.bind,o=e.Slides,l=e.Elements,c=e.Controller,u=c.hasFocus,f=c.getIndex,h=c.go,d=e.Direction.resolve,g=l.pagination,v=[],y,p;function m(){_(),r([rn,At,Vc],m);var H=t.pagination;g&&Oo(g,H?"":"none"),H&&(r([Ri,Mu,as],K),w(),K(),s(Q0,{list:y,items:v},N(n.index)))}function _(){y&&(Zr(g?br(y.children):y),_i(y,p),Ai(v),y=null),i.destroy()}function w(){var H=n.length,R=t.classes,J=t.i18n,P=t.perPage,z=u()?c.getEnd()+1:Fo(H/P);y=g||Ws("ul",R.pagination,l.track.parentElement),Zn(y,p=Pu+"--"+b()),ze(y,wi,"tablist"),ze(y,bn,J.select),ze(y,Qd,b()===Ru?"vertical":"");for(var G=0;G<z;G++){var W=Ws("li",null,y),V=Ws("button",{class:R.page,type:"button"},W),Y=o.getIn(G).map(function(te){return te.slide.id}),oe=!u()&&P>1?J.pageX:J.slideX;a(V,"click",ot(E,G)),t.paginationKeyboard&&a(V,"keydown",ot(A,G)),ze(W,wi,"presentation"),ze(V,wi,"tab"),ze(V,ul,Y.join(" ")),ze(V,bn,Oh(oe,G+1)),ze(V,js,-1),v.push({li:W,button:V,page:G})}}function E(H){h(">"+H,!0)}function A(H,R){var J=v.length,P=np(R),z=b(),G=-1;P===d(Au,!1,z)?G=++H%J:P===d(Tu,!1,z)?G=(--H+J)%J:P==="Home"?G=0:P==="End"&&(G=J-1);var W=v[G];W&&(B0(W.button),h(">"+G),di(R,!0))}function b(){return t.paginationDirection||t.direction}function N(H){return v[c.toPage(H)]}function K(){var H=N(f(!0)),R=N(f());if(H){var J=H.button;_i(J,Jr),Jn(J,Eg),ze(J,js,-1)}if(R){var P=R.button;Zn(P,Jr),ze(P,Eg,!0),ze(P,js,"")}s(ex,{list:y,items:v},H,R)}return{items:v,mount:m,destroy:_,getAt:N,update:K}}var hL=[" ","Enter"];function dL(n,e,t){var i=t.isNavigation,r=t.slideFocus,s=[];function a(){n.splides.forEach(function(g){g.isParent||(c(n,g.splide),c(g.splide,n))}),i&&u()}function o(){s.forEach(function(g){g.destroy()}),Ai(s)}function l(){o(),a()}function c(g,v){var y=xt(g);y.on(Ri,function(p,m,_){v.go(v.is(ya)?_:p)}),s.push(y)}function u(){var g=xt(n),v=g.on;v($d,h),v(nx,d),v([wr,rn],f),s.push(g),g.emit(Xd,n.splides)}function f(){ze(e.Elements.list,Qd,t.direction===Ru?"vertical":"")}function h(g){n.go(g.index)}function d(g,v){Hd(hL,np(v))&&(h(g),di(v))}return{setup:ot(e.Media.set,{slideFocus:sl(r)?i:r},!0),mount:a,destroy:o,remount:l}}function pL(n,e,t){var i=xt(n),r=i.bind,s=0;function a(){t.wheel&&r(e.Elements.track,"wheel",o,Is)}function o(c){if(c.cancelable){var u=c.deltaY,f=u<0,h=Nh(c),d=t.wheelMinThreshold||0,g=t.wheelSleep||0;cn(u)>d&&h-s>g&&(n.go(f?"<":">"),s=h),l(f)&&di(c)}}function l(c){return!t.releaseWheel||n.state.is(ga)||e.Controller.getAdjacent(c)!==-1}return{mount:a}}var mL=90;function gL(n,e,t){var i=xt(n),r=i.on,s=e.Elements.track,a=t.live&&!t.isNavigation,o=Ws("span",DR),l=Su(mL,ot(u,!1));function c(){a&&(h(!e.Autoplay.isPaused()),ze(s,Rg,!0),o.textContent="",r(Yd,ot(h,!0)),r(Kd,ot(h,!1)),r([va,as],ot(u,!0)))}function u(d){ze(s,Ag,d),d?(ol(s,o),l.start()):(Zr(o),l.cancel())}function f(){Jn(s,[Tg,Rg,Ag]),Zr(o)}function h(d){a&&ze(s,Tg,d?"off":"polite")}return{mount:c,disable:h,destroy:f}}var vL=Object.freeze({__proto__:null,Media:ER,Direction:TR,Elements:zR,Slides:VR,Layout:GR,Clones:jR,Move:$R,Controller:qR,Arrows:KR,Autoplay:JR,Cover:QR,Scroll:sL,Drag:aL,Keyboard:lL,LazyLoad:uL,Pagination:fL,Sync:dL,Wheel:pL,Live:gL}),yL={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},_L={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:kR,i18n:yL,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function xL(n,e,t){var i=e.Slides;function r(){xt(n).on([wr,At],s)}function s(){i.forEach(function(o){o.style("transform","translateX(-"+100*o.index+"%)")})}function a(o,l){i.style("transition","opacity "+t.speed+"ms "+t.easing),O0(l)}return{mount:r,start:a,cancel:Ih}}function bL(n,e,t){var i=e.Move,r=e.Controller,s=e.Scroll,a=e.Elements.list,o=ot(Dn,a,"transition"),l;function c(){xt(n).bind(a,"transitionend",function(d){d.target===a&&l&&(f(),l())})}function u(d,g){var v=i.toPosition(d,!0),y=i.getPosition(),p=h(d);cn(v-y)>=1&&p>=1?t.useScroll?s.scroll(v,p,!1,g):(o("transform "+p+"ms "+t.easing),i.translate(v,!0),l=g):(i.jump(d),g())}function f(){o(""),s.cancel()}function h(d){var g=t.rewindSpeed;if(n.is(sa)&&g){var v=r.getIndex(!0),y=r.getEnd();if(v===0&&d>=y||v>=y&&d===0)return g}return t.speed}return{mount:c,start:u,cancel:f}}var wL=function(){function n(t,i){this.event=xt(),this.Components={},this.state=MR(Fs),this.splides=[],this._o={},this._E={};var r=dr(t)?H0(document,t):t;lo(r,r+" is invalid."),this.root=r,i=Ji({label:Un(r,bn)||"",labelledby:Un(r,Jd)||""},_L,n.defaults,i||{});try{Ji(i,JSON.parse(Un(r,Wd)))}catch{lo(!1,"Invalid JSON")}this._o=Object.create(Ji({},i))}var e=n.prototype;return e.mount=function(i,r){var s=this,a=this.state,o=this.Components;lo(a.is([Fs,Bc]),"Already mounted!"),a.set(Fs),this._C=o,this._T=r||this._T||(this.is(fl)?xL:bL),this._E=i||this._E;var l=Do({},vL,this._E,{Transition:this._T});return $r(l,function(c,u){var f=c(s,o,s._o);o[u]=f,f.setup&&f.setup()}),$r(o,function(c){c.mount&&c.mount()}),this.emit(wr),Zn(this.root,OR),a.set(ia),this.emit(Mg),this},e.sync=function(i){return this.splides.push({splide:i}),i.splides.push({splide:this,isParent:!0}),this.state.is(ia)&&(this._C.Sync.remount(),i.Components.Sync.remount()),this},e.go=function(i){return this._C.Controller.go(i),this},e.on=function(i,r){return this.event.on(i,r),this},e.off=function(i){return this.event.off(i),this},e.emit=function(i){var r;return(r=this.event).emit.apply(r,[i].concat(br(arguments,1))),this},e.add=function(i,r){return this._C.Slides.add(i,r),this},e.remove=function(i){return this._C.Slides.remove(i),this},e.is=function(i){return this._o.type===i},e.refresh=function(){return this.emit(At),this},e.destroy=function(i){i===void 0&&(i=!0);var r=this.event,s=this.state;return s.is(Fs)?xt(this).on(Mg,this.destroy.bind(this,i)):($r(this._C,function(a){a.destroy&&a.destroy(i)},!0),r.emit(qd),r.destroy(),i&&Ai(this.splides),s.set(Bc)),this},yR(n,[{key:"options",get:function(){return this._o},set:function(i){this._C.Media.set(i,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),n}(),ip=wL;ip.defaults={};ip.STATES=xR;const Ig=[W0,Z0,J0,Kd,Yd,tx,$d,qd,X0,K0,Y0,q0,j0,Zd,wr,Ri,va,Xd,Q0,ex,At,ra,wu,Mu,as,rn,$0],vx="splide";function Ng(n){return n!==null&&typeof n=="object"}function ML(n,e){if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];if(r!=="__proto__"&&e(n[r],r)===!1)break}}return n}function yx(n,e){const t=n;return ML(e,(i,r)=>{Array.isArray(i)?t[r]=i.slice():Ng(i)?t[r]=yx(Ng(t[r])?t[r]:{},i):t[r]=i}),t}const SL=da({name:"SplideTrack",setup(){qy(()=>{var n;const e=wn(vx);(n=e==null?void 0:e.value)==null||n.refresh()})}}),rp=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},EL={class:"splide__track"},TL={class:"splide__list"};function AL(n,e,t,i,r,s){return Me(),Pe("div",EL,[Z("ul",TL,[Pc(n.$slots,"default")])])}const RL=rp(SL,[["render",AL]]),LL=da({name:"Splide",emits:Ig.map(n=>`splide:${n}`),components:{SplideTrack:RL},props:{tag:{default:"div",type:String},options:{default:{},type:Object},extensions:Object,transition:Function,hasTrack:{default:!0,type:Boolean}},setup(n,e){const t=Fe(),i=Fe();ti(()=>{i.value&&(t.value=new ip(i.value,n.options),l(t.value),t.value.mount(n.extensions,n.transition))}),Xy(()=>{var c;(c=t.value)==null||c.destroy()}),Wr(()=>yx({},n.options),c=>{t.value&&(t.value.options=c)},{deep:!0}),no(vx,t);const r=Tt(()=>{var c;return((c=t.value)==null?void 0:c.index)||0}),s=Tt(()=>{var c;return((c=t.value)==null?void 0:c.length)||0});function a(c){var u;(u=t.value)==null||u.go(c)}function o(c){var u;(u=t.value)==null||u.sync(c)}function l(c){Ig.forEach(u=>{c.on(u,(...f)=>{e.emit(`splide:${u}`,c,...f)})})}return{splide:t,root:i,index:r,length:s,go:a,sync:o}}});function CL(n,e,t,i,r,s){const a=is("SplideTrack");return Me(),Rt(Bw(n.tag),{class:"splide",ref:"root"},{default:Gt(()=>[n.hasTrack?(Me(),Rt(a,{key:0},{default:Gt(()=>[Pc(n.$slots,"default")]),_:3})):Pc(n.$slots,"default",{key:1})]),_:3},512)}const Gc=rp(LL,[["render",CL]]),PL=da({name:"SplideSlide"}),IL={class:"splide__slide"};function NL(n,e,t,i,r,s){return Me(),Pe("li",IL,[Pc(n.$slots,"default")])}const Wc=rp(PL,[["render",NL]]),DL={install(n){n.component(Gc.name,Gc),n.component(Wc.name,Wc)}},OL={class:"product-carousel"},FL=["src"],kL=["src"],UL={__name:"ProductCarousel",props:{images:{type:Array,required:!0}},setup(n){const e={rewind:!0,pagination:!1,gap:"1rem"},t={type:"slide",rewind:!0,gap:"1rem",pagination:!1,fixedWidth:100,fixedHeight:110,cover:!0,focus:"left",isNavigation:!0,updateOnMove:!0,arrows:!1},i=Fe(null),r=Fe(null);return ti(()=>{i.value&&r.value&&(i.value.sync(r.value.splide),r.value.sync(i.value.splide))}),(s,a)=>(Me(),Pe("div",OL,[Re(Oe(Gc),{options:e,class:"product-carousel-slide",ref_key:"main",ref:i},{default:Gt(()=>[(Me(!0),Pe(dt,null,Ks(n.images,(o,l)=>(Me(),Rt(Oe(Wc),{key:l},{default:Gt(()=>[Z("img",{src:o,class:"product-carousel-image"},null,8,FL)]),_:2},1024))),128))]),_:1},512),Re(Oe(Gc),{options:t,class:"carousel-thumbs",ref_key:"thumbs",ref:r},{default:Gt(()=>[(Me(!0),Pe(dt,null,Ks(n.images,(o,l)=>(Me(),Rt(Oe(Wc),{key:l},{default:Gt(()=>[Z("img",{src:o,class:"product-carousel-image-small"},null,8,kL)]),_:2},1024))),128))]),_:1},512)]))}};/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const _x="134",pi={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},us={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},BL=0,Dg=1,zL=2,xx=1,HL=2,Ya=3,aa=0,Ct=1,Qr=2,bx=1,ir=0,uo=1,Og=2,Fg=3,kg=4,VL=5,Ns=100,GL=101,WL=102,Ug=103,Bg=104,jL=200,$L=201,qL=202,XL=203,wx=204,Mx=205,YL=206,KL=207,ZL=208,JL=209,QL=210,eC=0,tC=1,nC=2,Uh=3,iC=4,rC=5,sC=6,aC=7,Iu=0,oC=1,lC=2,qr=0,cC=1,uC=2,fC=3,hC=4,dC=5,Sx=300,hl=301,dl=302,Bh=303,zh=304,Nu=306,sp=307,oa=1e3,ln=1001,jc=1002,It=1003,Hh=1004,Vh=1005,un=1006,Ex=1007,_a=1008,mr=1009,pC=1010,mC=1011,$c=1012,gC=1013,Tc=1014,vi=1015,$s=1016,vC=1017,yC=1018,_C=1019,fo=1020,xC=1021,Xr=1022,Kt=1023,bC=1024,wC=1025,MC=Kt,qs=1026,Uo=1027,SC=1028,EC=1029,TC=1030,AC=1031,RC=1032,LC=1033,zg=33776,Hg=33777,Vg=33778,Gg=33779,Wg=35840,jg=35841,$g=35842,qg=35843,CC=36196,Xg=37492,Yg=37496,PC=37808,IC=37809,NC=37810,DC=37811,OC=37812,FC=37813,kC=37814,UC=37815,BC=37816,zC=37817,HC=37818,VC=37819,GC=37820,WC=37821,jC=36492,$C=37840,qC=37841,XC=37842,YC=37843,KC=37844,ZC=37845,JC=37846,QC=37847,e2=37848,t2=37849,n2=37850,i2=37851,r2=37852,s2=37853,a2=2200,o2=2201,l2=2202,Bo=2300,la=2301,mf=2302,ks=2400,Us=2401,qc=2402,ap=2500,Tx=2501,c2=0,u2=1,Ax=2,Zt=3e3,Qn=3001,op=3007,lp=3002,f2=3003,Rx=3004,Lx=3005,Cx=3006,h2=3200,d2=3201,os=0,p2=1,gf=7680,m2=519,zo=35044,Xc=35048,Kg="300 es";class Sr{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}let Ol=1234567;const ho=Math.PI/180,Ho=180/Math.PI,Vt=[];for(let n=0;n<256;n++)Vt[n]=(n<16?"0":"")+n.toString(16);const g2=typeof crypto<"u"&&"randomUUID"in crypto;function En(){if(g2)return crypto.randomUUID().toUpperCase();const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Vt[n&255]+Vt[n>>8&255]+Vt[n>>16&255]+Vt[n>>24&255]+"-"+Vt[e&255]+Vt[e>>8&255]+"-"+Vt[e>>16&15|64]+Vt[e>>24&255]+"-"+Vt[t&63|128]+Vt[t>>8&255]+"-"+Vt[t>>16&255]+Vt[t>>24&255]+Vt[i&255]+Vt[i>>8&255]+Vt[i>>16&255]+Vt[i>>24&255]).toUpperCase()}function en(n,e,t){return Math.max(e,Math.min(t,n))}function cp(n,e){return(n%e+e)%e}function v2(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function y2(n,e,t){return n!==e?(t-n)/(e-n):0}function po(n,e,t){return(1-t)*n+t*e}function _2(n,e,t,i){return po(n,e,1-Math.exp(-t*i))}function x2(n,e=1){return e-Math.abs(cp(n,e*2)-e)}function b2(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function w2(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function M2(n,e){return n+Math.floor(Math.random()*(e-n+1))}function S2(n,e){return n+Math.random()*(e-n)}function E2(n){return n*(.5-Math.random())}function T2(n){return n!==void 0&&(Ol=n%2147483647),Ol=Ol*16807%2147483647,(Ol-1)/2147483646}function A2(n){return n*ho}function R2(n){return n*Ho}function Gh(n){return(n&n-1)===0&&n!==0}function Px(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ix(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function L2(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),c=s((e+i)/2),u=a((e+i)/2),f=s((e-i)/2),h=a((e-i)/2),d=s((i-e)/2),g=a((i-e)/2);switch(r){case"XYX":n.set(o*u,l*f,l*h,o*c);break;case"YZY":n.set(l*h,o*u,l*f,o*c);break;case"ZXZ":n.set(l*f,l*h,o*u,o*c);break;case"XZX":n.set(o*u,l*g,l*d,o*c);break;case"YXY":n.set(l*d,o*u,l*g,o*c);break;case"ZYZ":n.set(l*g,l*d,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}var C2=Object.freeze({__proto__:null,DEG2RAD:ho,RAD2DEG:Ho,generateUUID:En,clamp:en,euclideanModulo:cp,mapLinear:v2,inverseLerp:y2,lerp:po,damp:_2,pingpong:x2,smoothstep:b2,smootherstep:w2,randInt:M2,randFloat:S2,randFloatSpread:E2,seededRandom:T2,degToRad:A2,radToDeg:R2,isPowerOfTwo:Gh,ceilPowerOfTwo:Px,floorPowerOfTwo:Ix,setQuaternionFromProperEuler:L2});class ye{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}ye.prototype.isVector2=!0;class Wt{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,a,o,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=o,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=a,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],c=i[1],u=i[4],f=i[7],h=i[2],d=i[5],g=i[8],v=r[0],y=r[3],p=r[6],m=r[1],_=r[4],w=r[7],E=r[2],A=r[5],b=r[8];return s[0]=a*v+o*m+l*E,s[3]=a*y+o*_+l*A,s[6]=a*p+o*w+l*b,s[1]=c*v+u*m+f*E,s[4]=c*y+u*_+f*A,s[7]=c*p+u*w+f*b,s[2]=h*v+d*m+g*E,s[5]=h*y+d*_+g*A,s[8]=h*p+d*w+g*b,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*a*u-t*o*c-i*s*u+i*o*l+r*s*c-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=u*a-o*c,h=o*l-u*s,d=c*s-a*l,g=t*f+i*h+r*d;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return e[0]=f*v,e[1]=(r*c-u*i)*v,e[2]=(o*i-r*a)*v,e[3]=h*v,e[4]=(u*t-r*l)*v,e[5]=(r*s-o*t)*v,e[6]=d*v,e[7]=(i*l-c*t)*v,e[8]=(a*t-i*s)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*a+c*o)+a+e,-r*c,r*l,-r*(-c*a+l*o)+o+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],c=r[4],u=r[7];return r[0]=t*s+i*l,r[3]=t*a+i*c,r[6]=t*o+i*u,r[1]=-i*s+t*l,r[4]=-i*a+t*c,r[7]=-i*o+t*u,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}Wt.prototype.isMatrix3=!0;function Nx(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}function Du(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Zg(n,e=0){let t=3735928559^e,i=1103547991^e;for(let r=0,s;r<n.length;r++)s=n.charCodeAt(r),t=Math.imul(t^s,2654435761),i=Math.imul(i^s,1597334677);return t=Math.imul(t^t>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507)^Math.imul(t^t>>>13,3266489909),4294967296*(2097151&i)+(t>>>0)}let fs;class xa{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{fs===void 0&&(fs=Du("canvas")),fs.width=e.width,fs.height=e.height;const i=fs.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=fs}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}let P2=0;class Ft extends Sr{constructor(e=Ft.DEFAULT_IMAGE,t=Ft.DEFAULT_MAPPING,i=ln,r=ln,s=un,a=_a,o=Kt,l=mr,c=1,u=Zt){super(),Object.defineProperty(this,"id",{value:P2++}),this.uuid=En(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new ye(0,0),this.repeat=new ye(1,1),this.center=new ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const r=this.image;if(r.uuid===void 0&&(r.uuid=En()),!t&&e.images[r.uuid]===void 0){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(vf(r[a].image)):s.push(vf(r[a]))}else s=vf(r);e.images[r.uuid]={uuid:r.uuid,url:s}}i.image=r.uuid}return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Sx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case oa:e.x=e.x-Math.floor(e.x);break;case ln:e.x=e.x<0?0:1;break;case jc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case oa:e.y=e.y-Math.floor(e.y);break;case ln:e.y=e.y<0?0:1;break;case jc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Ft.DEFAULT_IMAGE=void 0;Ft.DEFAULT_MAPPING=Sx;Ft.prototype.isTexture=!0;function vf(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?xa.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class st{constructor(e=0,t=0,i=0,r=1){this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],h=l[1],d=l[5],g=l[9],v=l[2],y=l[6],p=l[10];if(Math.abs(u-h)<.01&&Math.abs(f-v)<.01&&Math.abs(g-y)<.01){if(Math.abs(u+h)<.1&&Math.abs(f+v)<.1&&Math.abs(g+y)<.1&&Math.abs(c+d+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(c+1)/2,w=(d+1)/2,E=(p+1)/2,A=(u+h)/4,b=(f+v)/4,N=(g+y)/4;return _>w&&_>E?_<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(_),r=A/i,s=b/i):w>E?w<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(w),i=A/r,s=N/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=b/s,r=N/s),this.set(i,r,s,t),this}let m=Math.sqrt((y-g)*(y-g)+(f-v)*(f-v)+(h-u)*(h-u));return Math.abs(m)<.001&&(m=1),this.x=(y-g)/m,this.y=(f-v)/m,this.z=(h-u)/m,this.w=Math.acos((c+d+p-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}st.prototype.isVector4=!0;class Yn extends Sr{constructor(e,t,i={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new st(0,0,e,t),this.scissorTest=!1,this.viewport=new st(0,0,e,t),this.texture=new Ft(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:un,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Yn.prototype.isWebGLRenderTarget=!0;class I2 extends Yn{constructor(e,t,i){super(e,t);const r=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=r.clone()}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone();return this}}I2.prototype.isWebGLMultipleRenderTargets=!0;class Dx extends Yn{constructor(e,t,i){super(e,t,i),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}Dx.prototype.isWebGLMultisampleRenderTarget=!0;class jt{constructor(e=0,t=0,i=0,r=1){this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),i.slerpQuaternions(e,t,r)}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const h=s[a+0],d=s[a+1],g=s[a+2],v=s[a+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(o===1){e[t+0]=h,e[t+1]=d,e[t+2]=g,e[t+3]=v;return}if(f!==v||l!==h||c!==d||u!==g){let y=1-o;const p=l*h+c*d+u*g+f*v,m=p>=0?1:-1,_=1-p*p;if(_>Number.EPSILON){const E=Math.sqrt(_),A=Math.atan2(E,p*m);y=Math.sin(y*A)/E,o=Math.sin(o*A)/E}const w=o*m;if(l=l*y+h*w,c=c*y+d*w,u=u*y+g*w,f=f*y+v*w,y===1-o){const E=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=E,c*=E,u*=E,f*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[a],h=s[a+1],d=s[a+2],g=s[a+3];return e[t]=o*g+u*f+l*d-c*h,e[t+1]=l*g+u*h+c*f-o*d,e[t+2]=c*g+u*d+o*h-l*f,e[t+3]=u*g-o*f-l*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(r/2),f=o(s/2),h=l(i/2),d=l(r/2),g=l(s/2);switch(a){case"XYZ":this._x=h*u*f+c*d*g,this._y=c*d*f-h*u*g,this._z=c*u*g+h*d*f,this._w=c*u*f-h*d*g;break;case"YXZ":this._x=h*u*f+c*d*g,this._y=c*d*f-h*u*g,this._z=c*u*g-h*d*f,this._w=c*u*f+h*d*g;break;case"ZXY":this._x=h*u*f-c*d*g,this._y=c*d*f+h*u*g,this._z=c*u*g+h*d*f,this._w=c*u*f-h*d*g;break;case"ZYX":this._x=h*u*f-c*d*g,this._y=c*d*f+h*u*g,this._z=c*u*g-h*d*f,this._w=c*u*f+h*d*g;break;case"YZX":this._x=h*u*f+c*d*g,this._y=c*d*f+h*u*g,this._z=c*u*g-h*d*f,this._w=c*u*f-h*d*g;break;case"XZY":this._x=h*u*f-c*d*g,this._y=c*d*f-h*u*g,this._z=c*u*g+h*d*f,this._w=c*u*f+h*d*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],c=t[2],u=t[6],f=t[10],h=i+o+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(u-l)*d,this._y=(s-c)*d,this._z=(a-r)*d}else if(i>o&&i>f){const d=2*Math.sqrt(1+i-o-f);this._w=(u-l)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(s+c)/d}else if(o>f){const d=2*Math.sqrt(1+o-i-f);this._w=(s-c)/d,this._x=(r+a)/d,this._y=.25*d,this._z=(l+u)/d}else{const d=2*Math.sqrt(1+f-i-o);this._w=(a-r)/d,this._x=(s+c)/d,this._y=(l+u)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(en(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+a*o+r*c-s*l,this._y=r*u+a*l+s*o-i*c,this._z=s*u+a*c+i*l-r*o,this._w=a*u-i*o-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const d=1-t;return this._w=d*a+t*this._w,this._x=d*i+t*this._x,this._y=d*r+t*this._y,this._z=d*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),f=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=a*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}jt.prototype.isQuaternion=!0;class C{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Jg.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Jg.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,c=l*t+a*r-o*i,u=l*i+o*t-s*r,f=l*r+s*i-a*t,h=-s*t-a*i-o*r;return this.x=c*l+h*-s+u*-o-f*-a,this.y=u*l+h*-a+f*-s-c*-o,this.z=f*l+h*-o+c*-a-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return yf.copy(this).projectOnVector(e),this.sub(yf)}reflect(e){return this.sub(yf.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(en(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}C.prototype.isVector3=!0;const yf=new C,Jg=new jt;class mn{constructor(e=new C(1/0,1/0,1/0),t=new C(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,c=e.length;l<c;l+=3){const u=e[l],f=e[l+1],h=e[l+2];u<t&&(t=u),f<i&&(i=f),h<r&&(r=h),u>s&&(s=u),f>a&&(a=f),h>o&&(o=h)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,c=e.count;l<c;l++){const u=e.getX(l),f=e.getY(l),h=e.getZ(l);u<t&&(t=u),f<i&&(i=f),h<r&&(r=h),u>s&&(s=u),f>a&&(a=f),h>o&&(o=h)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Da.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),_f.copy(t.boundingBox),_f.applyMatrix4(e.matrixWorld),this.union(_f));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Da),Da.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Oa),Fl.subVectors(this.max,Oa),hs.subVectors(e.a,Oa),ds.subVectors(e.b,Oa),ps.subVectors(e.c,Oa),Ui.subVectors(ds,hs),Bi.subVectors(ps,ds),Nr.subVectors(hs,ps);let t=[0,-Ui.z,Ui.y,0,-Bi.z,Bi.y,0,-Nr.z,Nr.y,Ui.z,0,-Ui.x,Bi.z,0,-Bi.x,Nr.z,0,-Nr.x,-Ui.y,Ui.x,0,-Bi.y,Bi.x,0,-Nr.y,Nr.x,0];return!xf(t,hs,ds,ps,Fl)||(t=[1,0,0,0,1,0,0,0,1],!xf(t,hs,ds,ps,Fl))?!1:(kl.crossVectors(Ui,Bi),t=[kl.x,kl.y,kl.z],xf(t,hs,ds,ps,Fl))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return Da.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(Da).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ai[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ai[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ai[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ai[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ai[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ai[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ai[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ai[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ai),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}mn.prototype.isBox3=!0;const ai=[new C,new C,new C,new C,new C,new C,new C,new C],Da=new C,_f=new mn,hs=new C,ds=new C,ps=new C,Ui=new C,Bi=new C,Nr=new C,Oa=new C,Fl=new C,kl=new C,Dr=new C;function xf(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Dr.fromArray(n,s);const o=r.x*Math.abs(Dr.x)+r.y*Math.abs(Dr.y)+r.z*Math.abs(Dr.z),l=e.dot(Dr),c=t.dot(Dr),u=i.dot(Dr);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const N2=new mn,Qg=new C,bf=new C,wf=new C;class ls{constructor(e=new C,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):N2.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){wf.subVectors(e,this.center);const t=wf.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(wf.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return bf.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Qg.copy(e.center).add(bf)),this.expandByPoint(Qg.copy(e.center).sub(bf)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const oi=new C,Mf=new C,Ul=new C,zi=new C,Sf=new C,Bl=new C,Ef=new C;class ba{constructor(e=new C,t=new C(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oi)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=oi.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(oi.copy(this.direction).multiplyScalar(t).add(this.origin),oi.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Mf.copy(e).add(t).multiplyScalar(.5),Ul.copy(t).sub(e).normalize(),zi.copy(this.origin).sub(Mf);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Ul),o=zi.dot(this.direction),l=-zi.dot(Ul),c=zi.lengthSq(),u=Math.abs(1-a*a);let f,h,d,g;if(u>0)if(f=a*l-o,h=a*o-l,g=s*u,f>=0)if(h>=-g)if(h<=g){const v=1/u;f*=v,h*=v,d=f*(f+a*h+2*o)+h*(a*f+h+2*l)+c}else h=s,f=Math.max(0,-(a*h+o)),d=-f*f+h*(h+2*l)+c;else h=-s,f=Math.max(0,-(a*h+o)),d=-f*f+h*(h+2*l)+c;else h<=-g?(f=Math.max(0,-(-a*s+o)),h=f>0?-s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c):h<=g?(f=0,h=Math.min(Math.max(-s,-l),s),d=h*(h+2*l)+c):(f=Math.max(0,-(a*s+o)),h=f>0?s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+c);else h=a>0?-s:s,f=Math.max(0,-(a*h+o)),d=-f*f+h*(h+2*l)+c;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(Ul).multiplyScalar(h).add(Mf),d}intersectSphere(e,t){oi.subVectors(e.center,this.origin);const i=oi.dot(this.direction),r=oi.dot(oi)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),i>a||s>r||((s>i||i!==i)&&(i=s),(a<r||r!==r)&&(r=a),f>=0?(o=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(o=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,oi)!==null}intersectTriangle(e,t,i,r,s){Sf.subVectors(t,e),Bl.subVectors(i,e),Ef.crossVectors(Sf,Bl);let a=this.direction.dot(Ef),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;zi.subVectors(this.origin,e);const l=o*this.direction.dot(Bl.crossVectors(zi,Bl));if(l<0)return null;const c=o*this.direction.dot(Sf.cross(zi));if(c<0||l+c>a)return null;const u=-o*zi.dot(Ef);return u<0?null:this.at(u/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ce{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,a,o,l,c,u,f,h,d,g,v,y){const p=this.elements;return p[0]=e,p[4]=t,p[8]=i,p[12]=r,p[1]=s,p[5]=a,p[9]=o,p[13]=l,p[2]=c,p[6]=u,p[10]=f,p[14]=h,p[3]=d,p[7]=g,p[11]=v,p[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ce().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/ms.setFromMatrixColumn(e,0).length(),s=1/ms.setFromMatrixColumn(e,1).length(),a=1/ms.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=a*u,d=a*f,g=o*u,v=o*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=d+g*c,t[5]=h-v*c,t[9]=-o*l,t[2]=v-h*c,t[6]=g+d*c,t[10]=a*l}else if(e.order==="YXZ"){const h=l*u,d=l*f,g=c*u,v=c*f;t[0]=h+v*o,t[4]=g*o-d,t[8]=a*c,t[1]=a*f,t[5]=a*u,t[9]=-o,t[2]=d*o-g,t[6]=v+h*o,t[10]=a*l}else if(e.order==="ZXY"){const h=l*u,d=l*f,g=c*u,v=c*f;t[0]=h-v*o,t[4]=-a*f,t[8]=g+d*o,t[1]=d+g*o,t[5]=a*u,t[9]=v-h*o,t[2]=-a*c,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const h=a*u,d=a*f,g=o*u,v=o*f;t[0]=l*u,t[4]=g*c-d,t[8]=h*c+v,t[1]=l*f,t[5]=v*c+h,t[9]=d*c-g,t[2]=-c,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const h=a*l,d=a*c,g=o*l,v=o*c;t[0]=l*u,t[4]=v-h*f,t[8]=g*f+d,t[1]=f,t[5]=a*u,t[9]=-o*u,t[2]=-c*u,t[6]=d*f+g,t[10]=h-v*f}else if(e.order==="XZY"){const h=a*l,d=a*c,g=o*l,v=o*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=h*f+v,t[5]=a*u,t[9]=d*f-g,t[2]=g*f-d,t[6]=o*u,t[10]=v*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(D2,e,O2)}lookAt(e,t,i){const r=this.elements;return hn.subVectors(e,t),hn.lengthSq()===0&&(hn.z=1),hn.normalize(),Hi.crossVectors(i,hn),Hi.lengthSq()===0&&(Math.abs(i.z)===1?hn.x+=1e-4:hn.z+=1e-4,hn.normalize(),Hi.crossVectors(i,hn)),Hi.normalize(),zl.crossVectors(hn,Hi),r[0]=Hi.x,r[4]=zl.x,r[8]=hn.x,r[1]=Hi.y,r[5]=zl.y,r[9]=hn.y,r[2]=Hi.z,r[6]=zl.z,r[10]=hn.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],c=i[12],u=i[1],f=i[5],h=i[9],d=i[13],g=i[2],v=i[6],y=i[10],p=i[14],m=i[3],_=i[7],w=i[11],E=i[15],A=r[0],b=r[4],N=r[8],K=r[12],H=r[1],R=r[5],J=r[9],P=r[13],z=r[2],G=r[6],W=r[10],V=r[14],Y=r[3],oe=r[7],te=r[11],ie=r[15];return s[0]=a*A+o*H+l*z+c*Y,s[4]=a*b+o*R+l*G+c*oe,s[8]=a*N+o*J+l*W+c*te,s[12]=a*K+o*P+l*V+c*ie,s[1]=u*A+f*H+h*z+d*Y,s[5]=u*b+f*R+h*G+d*oe,s[9]=u*N+f*J+h*W+d*te,s[13]=u*K+f*P+h*V+d*ie,s[2]=g*A+v*H+y*z+p*Y,s[6]=g*b+v*R+y*G+p*oe,s[10]=g*N+v*J+y*W+p*te,s[14]=g*K+v*P+y*V+p*ie,s[3]=m*A+_*H+w*z+E*Y,s[7]=m*b+_*R+w*G+E*oe,s[11]=m*N+_*J+w*W+E*te,s[15]=m*K+_*P+w*V+E*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],c=e[13],u=e[2],f=e[6],h=e[10],d=e[14],g=e[3],v=e[7],y=e[11],p=e[15];return g*(+s*l*f-r*c*f-s*o*h+i*c*h+r*o*d-i*l*d)+v*(+t*l*d-t*c*h+s*a*h-r*a*d+r*c*u-s*l*u)+y*(+t*c*f-t*o*d-s*a*f+i*a*d+s*o*u-i*c*u)+p*(-r*o*u-t*l*f+t*o*h+r*a*f-i*a*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],g=e[12],v=e[13],y=e[14],p=e[15],m=f*y*c-v*h*c+v*l*d-o*y*d-f*l*p+o*h*p,_=g*h*c-u*y*c-g*l*d+a*y*d+u*l*p-a*h*p,w=u*v*c-g*f*c+g*o*d-a*v*d-u*o*p+a*f*p,E=g*f*l-u*v*l-g*o*h+a*v*h+u*o*y-a*f*y,A=t*m+i*_+r*w+s*E;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const b=1/A;return e[0]=m*b,e[1]=(v*h*s-f*y*s-v*r*d+i*y*d+f*r*p-i*h*p)*b,e[2]=(o*y*s-v*l*s+v*r*c-i*y*c-o*r*p+i*l*p)*b,e[3]=(f*l*s-o*h*s-f*r*c+i*h*c+o*r*d-i*l*d)*b,e[4]=_*b,e[5]=(u*y*s-g*h*s+g*r*d-t*y*d-u*r*p+t*h*p)*b,e[6]=(g*l*s-a*y*s-g*r*c+t*y*c+a*r*p-t*l*p)*b,e[7]=(a*h*s-u*l*s+u*r*c-t*h*c-a*r*d+t*l*d)*b,e[8]=w*b,e[9]=(g*f*s-u*v*s-g*i*d+t*v*d+u*i*p-t*f*p)*b,e[10]=(a*v*s-g*o*s+g*i*c-t*v*c-a*i*p+t*o*p)*b,e[11]=(u*o*s-a*f*s-u*i*c+t*f*c+a*i*d-t*o*d)*b,e[12]=E*b,e[13]=(u*v*r-g*f*r+g*i*h-t*v*h-u*i*y+t*f*y)*b,e[14]=(g*o*r-a*v*r-g*i*l+t*v*l+a*i*y-t*o*y)*b,e[15]=(a*f*r-u*o*r+u*i*l-t*f*l-a*i*h+t*o*h)*b,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,c=s*a,u=s*o;return this.set(c*a+i,c*o-r*l,c*l+r*o,0,c*o+r*l,u*o+i,u*l-r*a,0,c*l-r*o,u*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,c=s+s,u=a+a,f=o+o,h=s*c,d=s*u,g=s*f,v=a*u,y=a*f,p=o*f,m=l*c,_=l*u,w=l*f,E=i.x,A=i.y,b=i.z;return r[0]=(1-(v+p))*E,r[1]=(d+w)*E,r[2]=(g-_)*E,r[3]=0,r[4]=(d-w)*A,r[5]=(1-(h+p))*A,r[6]=(y+m)*A,r[7]=0,r[8]=(g+_)*b,r[9]=(y-m)*b,r[10]=(1-(h+v))*b,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=ms.set(r[0],r[1],r[2]).length();const a=ms.set(r[4],r[5],r[6]).length(),o=ms.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Cn.copy(this);const c=1/s,u=1/a,f=1/o;return Cn.elements[0]*=c,Cn.elements[1]*=c,Cn.elements[2]*=c,Cn.elements[4]*=u,Cn.elements[5]*=u,Cn.elements[6]*=u,Cn.elements[8]*=f,Cn.elements[9]*=f,Cn.elements[10]*=f,t.setFromRotationMatrix(Cn),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a){a===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,l=2*s/(t-e),c=2*s/(i-r),u=(t+e)/(t-e),f=(i+r)/(i-r),h=-(a+s)/(a-s),d=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=c,o[9]=f,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,s,a){const o=this.elements,l=1/(t-e),c=1/(i-r),u=1/(a-s),f=(t+e)*l,h=(i+r)*c,d=(a+s)*u;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-f,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}Ce.prototype.isMatrix4=!0;const ms=new C,Cn=new Ce,D2=new C(0,0,0),O2=new C(1,1,1),Hi=new C,zl=new C,hn=new C,ev=new Ce,tv=new jt;class wa{constructor(e=0,t=0,i=0,r=wa.DefaultOrder){this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],c=r[5],u=r[9],f=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(en(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-en(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(en(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-en(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(en(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-en(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-u,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return ev.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ev,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return tv.setFromEuler(this),this.setFromQuaternion(tv,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new C(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}wa.prototype.isEuler=!0;wa.DefaultOrder="XYZ";wa.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class F2{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let k2=0;const nv=new C,gs=new jt,li=new Ce,Hl=new C,Fa=new C,U2=new C,B2=new jt,iv=new C(1,0,0),rv=new C(0,1,0),sv=new C(0,0,1),z2={type:"added"},av={type:"removed"};class tt extends Sr{constructor(){super(),Object.defineProperty(this,"id",{value:k2++}),this.uuid=En(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=tt.DefaultUp.clone();const e=new C,t=new wa,i=new jt,r=new C(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ce},normalMatrix:{value:new Wt}}),this.matrix=new Ce,this.matrixWorld=new Ce,this.matrixAutoUpdate=tt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new F2,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return gs.setFromAxisAngle(e,t),this.quaternion.multiply(gs),this}rotateOnWorldAxis(e,t){return gs.setFromAxisAngle(e,t),this.quaternion.premultiply(gs),this}rotateX(e){return this.rotateOnAxis(iv,e)}rotateY(e){return this.rotateOnAxis(rv,e)}rotateZ(e){return this.rotateOnAxis(sv,e)}translateOnAxis(e,t){return nv.copy(e).applyQuaternion(this.quaternion),this.position.add(nv.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(iv,e)}translateY(e){return this.translateOnAxis(rv,e)}translateZ(e){return this.translateOnAxis(sv,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(li.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Hl.copy(e):Hl.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Fa.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?li.lookAt(Fa,Hl,this.up):li.lookAt(Hl,Fa,this.up),this.quaternion.setFromRotationMatrix(li),r&&(li.extractRotation(r.matrixWorld),gs.setFromRotationMatrix(li),this.quaternion.premultiply(gs.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(z2)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(av)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(av)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),li.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),li.multiply(e.parent.matrixWorld)),e.applyMatrix4(li),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fa,e,U2),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fa,B2,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),c=a(e.textures),u=a(e.images),f=a(e.shapes),h=a(e.skeletons),d=a(e.animations);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),d.length>0&&(i.animations=d)}return i.object=r,i;function a(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}tt.DefaultUp=new C(0,1,0);tt.DefaultMatrixAutoUpdate=!0;tt.prototype.isObject3D=!0;const Pn=new C,ci=new C,Tf=new C,ui=new C,vs=new C,ys=new C,ov=new C,Af=new C,Rf=new C,Lf=new C;class Nt{constructor(e=new C,t=new C,i=new C){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Pn.subVectors(e,t),r.cross(Pn);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Pn.subVectors(r,t),ci.subVectors(i,t),Tf.subVectors(e,t);const a=Pn.dot(Pn),o=Pn.dot(ci),l=Pn.dot(Tf),c=ci.dot(ci),u=ci.dot(Tf),f=a*c-o*o;if(f===0)return s.set(-2,-1,-1);const h=1/f,d=(c*l-o*u)*h,g=(a*u-o*l)*h;return s.set(1-d-g,g,d)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ui),ui.x>=0&&ui.y>=0&&ui.x+ui.y<=1}static getUV(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,ui),l.set(0,0),l.addScaledVector(s,ui.x),l.addScaledVector(a,ui.y),l.addScaledVector(o,ui.z),l}static isFrontFacing(e,t,i,r){return Pn.subVectors(i,t),ci.subVectors(e,t),Pn.cross(ci).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Pn.subVectors(this.c,this.b),ci.subVectors(this.a,this.b),Pn.cross(ci).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Nt.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Nt.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Nt.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Nt.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Nt.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;vs.subVectors(r,i),ys.subVectors(s,i),Af.subVectors(e,i);const l=vs.dot(Af),c=ys.dot(Af);if(l<=0&&c<=0)return t.copy(i);Rf.subVectors(e,r);const u=vs.dot(Rf),f=ys.dot(Rf);if(u>=0&&f<=u)return t.copy(r);const h=l*f-u*c;if(h<=0&&l>=0&&u<=0)return a=l/(l-u),t.copy(i).addScaledVector(vs,a);Lf.subVectors(e,s);const d=vs.dot(Lf),g=ys.dot(Lf);if(g>=0&&d<=g)return t.copy(s);const v=d*c-l*g;if(v<=0&&c>=0&&g<=0)return o=c/(c-g),t.copy(i).addScaledVector(ys,o);const y=u*g-d*f;if(y<=0&&f-u>=0&&d-g>=0)return ov.subVectors(s,r),o=(f-u)/(f-u+(d-g)),t.copy(r).addScaledVector(ov,o);const p=1/(y+v+h);return a=v*p,o=h*p,t.copy(i).addScaledVector(vs,a).addScaledVector(ys,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let H2=0;class Dt extends Sr{constructor(){super(),Object.defineProperty(this,"id",{value:H2++}),this.uuid=En(),this.name="",this.type="Material",this.fog=!0,this.blending=uo,this.side=aa,this.vertexColors=!1,this.opacity=1,this.format=Kt,this.transparent=!1,this.blendSrc=wx,this.blendDst=Mx,this.blendEquation=Ns,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Uh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=m2,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gf,this.stencilZFail=gf,this.stencilZPass=gf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===bx;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==uo&&(i.blending=this.blending),this.side!==aa&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.format!==Kt&&(i.format=this.format),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Dt.prototype.isMaterial=!0;const Ox={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},In={h:0,s:0,l:0},Vl={h:0,s:0,l:0};function Cf(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function Pf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function If(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}class Ae{constructor(e,t,i){return t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=cp(e,1),t=en(t,0,1),i=en(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,s=2*i-r;this.r=Cf(s,r,e+1/3),this.g=Cf(s,r,e),this.b=Cf(s,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const o=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,l,c)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=Ox[e.toLowerCase()];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=Pf(e.r),this.g=Pf(e.g),this.b=Pf(e.b),this}copyLinearToSRGB(e){return this.r=If(e.r),this.g=If(e.g),this.b=If(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,i=this.g,r=this.b,s=Math.max(t,i,r),a=Math.min(t,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const u=s-a;switch(l=c<=.5?u/(s+a):u/(2-s-a),s){case t:o=(i-r)/u+(i<r?6:0);break;case i:o=(r-t)/u+2;break;case r:o=(t-i)/u+4;break}o/=6}return e.h=o,e.s=l,e.l=c,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,i){return this.getHSL(In),In.h+=e,In.s+=t,In.l+=i,this.setHSL(In.h,In.s,In.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(In),e.getHSL(Vl);const i=po(In.h,Vl.h,t),r=po(In.s,Vl.s,t),s=po(In.l,Vl.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Ae.NAMES=Ox;Ae.prototype.isColor=!0;Ae.prototype.r=1;Ae.prototype.g=1;Ae.prototype.b=1;class Qi extends Dt{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Iu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}Qi.prototype.isMeshBasicMaterial=!0;const at=new C,Gl=new ye;class Et{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=zo,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Ae),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new ye),t[i++]=a.x,t[i++]=a.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new C),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new st),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Gl.fromBufferAttribute(this,t),Gl.applyMatrix3(e),this.setXY(t,Gl.x,Gl.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)at.fromBufferAttribute(this,t),at.applyMatrix3(e),this.setXYZ(t,at.x,at.y,at.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)at.x=this.getX(t),at.y=this.getY(t),at.z=this.getZ(t),at.applyMatrix4(e),this.setXYZ(t,at.x,at.y,at.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)at.x=this.getX(t),at.y=this.getY(t),at.z=this.getZ(t),at.applyNormalMatrix(e),this.setXYZ(t,at.x,at.y,at.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)at.x=this.getX(t),at.y=this.getY(t),at.z=this.getZ(t),at.transformDirection(e),this.setXYZ(t,at.x,at.y,at.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==zo&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Et.prototype.isBufferAttribute=!0;class Fx extends Et{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class kx extends Et{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class V2 extends Et{constructor(e,t,i){super(new Uint16Array(e),t,i)}}V2.prototype.isFloat16BufferAttribute=!0;class Bt extends Et{constructor(e,t,i){super(new Float32Array(e),t,i)}}let G2=0;const vn=new Ce,Nf=new tt,_s=new C,dn=new mn,ka=new mn,kt=new C;class mt extends Sr{constructor(){super(),Object.defineProperty(this,"id",{value:G2++}),this.uuid=En(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Nx(e)>65535?kx:Fx)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Wt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return vn.makeRotationFromQuaternion(e),this.applyMatrix4(vn),this}rotateX(e){return vn.makeRotationX(e),this.applyMatrix4(vn),this}rotateY(e){return vn.makeRotationY(e),this.applyMatrix4(vn),this}rotateZ(e){return vn.makeRotationZ(e),this.applyMatrix4(vn),this}translate(e,t,i){return vn.makeTranslation(e,t,i),this.applyMatrix4(vn),this}scale(e,t,i){return vn.makeScale(e,t,i),this.applyMatrix4(vn),this}lookAt(e){return Nf.lookAt(e),Nf.updateMatrix(),this.applyMatrix4(Nf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_s).negate(),this.translate(_s.x,_s.y,_s.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Bt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new mn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new C(-1/0,-1/0,-1/0),new C(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];dn.setFromBufferAttribute(s),this.morphTargetsRelative?(kt.addVectors(this.boundingBox.min,dn.min),this.boundingBox.expandByPoint(kt),kt.addVectors(this.boundingBox.max,dn.max),this.boundingBox.expandByPoint(kt)):(this.boundingBox.expandByPoint(dn.min),this.boundingBox.expandByPoint(dn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ls);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new C,1/0);return}if(e){const i=this.boundingSphere.center;if(dn.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];ka.setFromBufferAttribute(o),this.morphTargetsRelative?(kt.addVectors(dn.min,ka.min),dn.expandByPoint(kt),kt.addVectors(dn.max,ka.max),dn.expandByPoint(kt)):(dn.expandByPoint(ka.min),dn.expandByPoint(ka.max))}dn.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)kt.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(kt));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)kt.fromBufferAttribute(o,c),l&&(_s.fromBufferAttribute(e,c),kt.add(_s)),r=Math.max(r,i.distanceToSquared(kt))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;t.tangent===void 0&&this.setAttribute("tangent",new Et(new Float32Array(4*o),4));const l=t.tangent.array,c=[],u=[];for(let H=0;H<o;H++)c[H]=new C,u[H]=new C;const f=new C,h=new C,d=new C,g=new ye,v=new ye,y=new ye,p=new C,m=new C;function _(H,R,J){f.fromArray(r,H*3),h.fromArray(r,R*3),d.fromArray(r,J*3),g.fromArray(a,H*2),v.fromArray(a,R*2),y.fromArray(a,J*2),h.sub(f),d.sub(f),v.sub(g),y.sub(g);const P=1/(v.x*y.y-y.x*v.y);isFinite(P)&&(p.copy(h).multiplyScalar(y.y).addScaledVector(d,-v.y).multiplyScalar(P),m.copy(d).multiplyScalar(v.x).addScaledVector(h,-y.x).multiplyScalar(P),c[H].add(p),c[R].add(p),c[J].add(p),u[H].add(m),u[R].add(m),u[J].add(m))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let H=0,R=w.length;H<R;++H){const J=w[H],P=J.start,z=J.count;for(let G=P,W=P+z;G<W;G+=3)_(i[G+0],i[G+1],i[G+2])}const E=new C,A=new C,b=new C,N=new C;function K(H){b.fromArray(s,H*3),N.copy(b);const R=c[H];E.copy(R),E.sub(b.multiplyScalar(b.dot(R))).normalize(),A.crossVectors(N,R);const P=A.dot(u[H])<0?-1:1;l[H*4]=E.x,l[H*4+1]=E.y,l[H*4+2]=E.z,l[H*4+3]=P}for(let H=0,R=w.length;H<R;++H){const J=w[H],P=J.start,z=J.count;for(let G=P,W=P+z;G<W;G+=3)K(i[G+0]),K(i[G+1]),K(i[G+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Et(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,d=i.count;h<d;h++)i.setXYZ(h,0,0,0);const r=new C,s=new C,a=new C,o=new C,l=new C,c=new C,u=new C,f=new C;if(e)for(let h=0,d=e.count;h<d;h+=3){const g=e.getX(h+0),v=e.getX(h+1),y=e.getX(h+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),a.fromBufferAttribute(t,y),u.subVectors(a,s),f.subVectors(r,s),u.cross(f),o.fromBufferAttribute(i,g),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,y),o.add(u),l.add(u),c.add(u),i.setXYZ(g,o.x,o.y,o.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z)}else for(let h=0,d=t.count;h<d;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),a.fromBufferAttribute(t,h+2),u.subVectors(a,s),f.subVectors(r,s),u.cross(f),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const a=i[r].array,o=e.attributes[r],l=o.array,c=o.itemSize*t,u=Math.min(l.length,a.length-c);for(let f=0,h=c;f<u;f++,h++)a[h]=l[f]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)kt.fromBufferAttribute(e,t),kt.normalize(),e.setXYZ(t,kt.x,kt.y,kt.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,f=o.normalized,h=new c.constructor(l.length*u);let d=0,g=0;for(let v=0,y=l.length;v<y;v++){o.isInterleavedBufferAttribute?d=l[v]*o.data.stride+o.offset:d=l[v]*u;for(let p=0;p<u;p++)h[g++]=c[d++]}return new Et(h,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new mt,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],c=e(l,i);t.setAttribute(o,c)}const s=this.morphAttributes;for(const o in s){const l=[],c=s[o];for(let u=0,f=c.length;u<f;u++){const h=c[u],d=e(h,i);l.push(d)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const c=a[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,h=c.length;f<h;f++){const d=c[f];u.push(d.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let h=0,d=f.length;h<d;h++)u.push(f[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let c=0,u=a.length;c<u;c++){const f=a[c];this.addGroup(f.start,f.count,f.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}mt.prototype.isBufferGeometry=!0;const lv=new Ce,xs=new ba,Df=new ls,Vi=new C,Gi=new C,Wi=new C,Of=new C,Ff=new C,kf=new C,Wl=new C,jl=new C,$l=new C,ql=new ye,Xl=new ye,Yl=new ye,Uf=new C,Kl=new C;class tn extends tt{constructor(e=new mt,t=new Qi){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Df.copy(i.boundingSphere),Df.applyMatrix4(s),e.ray.intersectsSphere(Df)===!1)||(lv.copy(s).invert(),xs.copy(e.ray).applyMatrix4(lv),i.boundingBox!==null&&xs.intersectsBox(i.boundingBox)===!1))return;let a;if(i.isBufferGeometry){const o=i.index,l=i.attributes.position,c=i.morphAttributes.position,u=i.morphTargetsRelative,f=i.attributes.uv,h=i.attributes.uv2,d=i.groups,g=i.drawRange;if(o!==null)if(Array.isArray(r))for(let v=0,y=d.length;v<y;v++){const p=d[v],m=r[p.materialIndex],_=Math.max(p.start,g.start),w=Math.min(o.count,Math.min(p.start+p.count,g.start+g.count));for(let E=_,A=w;E<A;E+=3){const b=o.getX(E),N=o.getX(E+1),K=o.getX(E+2);a=Zl(this,m,e,xs,l,c,u,f,h,b,N,K),a&&(a.faceIndex=Math.floor(E/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{const v=Math.max(0,g.start),y=Math.min(o.count,g.start+g.count);for(let p=v,m=y;p<m;p+=3){const _=o.getX(p),w=o.getX(p+1),E=o.getX(p+2);a=Zl(this,r,e,xs,l,c,u,f,h,_,w,E),a&&(a.faceIndex=Math.floor(p/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(r))for(let v=0,y=d.length;v<y;v++){const p=d[v],m=r[p.materialIndex],_=Math.max(p.start,g.start),w=Math.min(l.count,Math.min(p.start+p.count,g.start+g.count));for(let E=_,A=w;E<A;E+=3){const b=E,N=E+1,K=E+2;a=Zl(this,m,e,xs,l,c,u,f,h,b,N,K),a&&(a.faceIndex=Math.floor(E/3),a.face.materialIndex=p.materialIndex,t.push(a))}}else{const v=Math.max(0,g.start),y=Math.min(l.count,g.start+g.count);for(let p=v,m=y;p<m;p+=3){const _=p,w=p+1,E=p+2;a=Zl(this,r,e,xs,l,c,u,f,h,_,w,E),a&&(a.faceIndex=Math.floor(p/3),t.push(a))}}}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}tn.prototype.isMesh=!0;function W2(n,e,t,i,r,s,a,o){let l;if(e.side===Ct?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side!==Qr,o),l===null)return null;Kl.copy(o),Kl.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Kl);return c<t.near||c>t.far?null:{distance:c,point:Kl.clone(),object:n}}function Zl(n,e,t,i,r,s,a,o,l,c,u,f){Vi.fromBufferAttribute(r,c),Gi.fromBufferAttribute(r,u),Wi.fromBufferAttribute(r,f);const h=n.morphTargetInfluences;if(s&&h){Wl.set(0,0,0),jl.set(0,0,0),$l.set(0,0,0);for(let g=0,v=s.length;g<v;g++){const y=h[g],p=s[g];y!==0&&(Of.fromBufferAttribute(p,c),Ff.fromBufferAttribute(p,u),kf.fromBufferAttribute(p,f),a?(Wl.addScaledVector(Of,y),jl.addScaledVector(Ff,y),$l.addScaledVector(kf,y)):(Wl.addScaledVector(Of.sub(Vi),y),jl.addScaledVector(Ff.sub(Gi),y),$l.addScaledVector(kf.sub(Wi),y)))}Vi.add(Wl),Gi.add(jl),Wi.add($l)}n.isSkinnedMesh&&(n.boneTransform(c,Vi),n.boneTransform(u,Gi),n.boneTransform(f,Wi));const d=W2(n,e,t,i,Vi,Gi,Wi,Uf);if(d){o&&(ql.fromBufferAttribute(o,c),Xl.fromBufferAttribute(o,u),Yl.fromBufferAttribute(o,f),d.uv=Nt.getUV(Uf,Vi,Gi,Wi,ql,Xl,Yl,new ye)),l&&(ql.fromBufferAttribute(l,c),Xl.fromBufferAttribute(l,u),Yl.fromBufferAttribute(l,f),d.uv2=Nt.getUV(Uf,Vi,Gi,Wi,ql,Xl,Yl,new ye));const g={a:c,b:u,c:f,normal:new C,materialIndex:0};Nt.getNormal(Vi,Gi,Wi,g.normal),d.face=g}return d}class pl extends mt{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],c=[],u=[],f=[];let h=0,d=0;g("z","y","x",-1,-1,i,t,e,a,s,0),g("z","y","x",1,-1,i,t,-e,a,s,1),g("x","z","y",1,1,e,i,t,r,a,2),g("x","z","y",1,-1,e,i,-t,r,a,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Bt(c,3)),this.setAttribute("normal",new Bt(u,3)),this.setAttribute("uv",new Bt(f,2));function g(v,y,p,m,_,w,E,A,b,N,K){const H=w/b,R=E/N,J=w/2,P=E/2,z=A/2,G=b+1,W=N+1;let V=0,Y=0;const oe=new C;for(let te=0;te<W;te++){const ie=te*R-P;for(let _e=0;_e<G;_e++){const le=_e*H-J;oe[v]=le*m,oe[y]=ie*_,oe[p]=z,c.push(oe.x,oe.y,oe.z),oe[v]=0,oe[y]=0,oe[p]=A>0?1:-1,u.push(oe.x,oe.y,oe.z),f.push(_e/b),f.push(1-te/N),V+=1}}for(let te=0;te<N;te++)for(let ie=0;ie<b;ie++){const _e=h+ie+G*te,le=h+ie+G*(te+1),he=h+(ie+1)+G*(te+1),Ee=h+(ie+1)+G*te;l.push(_e,le,Ee),l.push(le,he,Ee),Y+=6}o.addGroup(d,Y,K),d+=Y,h+=V}}static fromJSON(e){return new pl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ca(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function $t(n){const e={};for(let t=0;t<n.length;t++){const i=ca(n[t]);for(const r in i)e[r]=i[r]}return e}const j2={clone:ca,merge:$t};var $2=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,q2=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class es extends Dt{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=$2,this.fragmentShader=q2,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ca(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}es.prototype.isShaderMaterial=!0;class up extends tt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Ce,this.projectionMatrix=new Ce,this.projectionMatrixInverse=new Ce}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}up.prototype.isCamera=!0;class qt extends up{constructor(e=50,t=1,i=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ho*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ho*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ho*2*Math.atan(Math.tan(ho*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ho*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,c=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/c,r*=a.width/l,i*=a.height/c}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}qt.prototype.isPerspectiveCamera=!0;const bs=90,ws=1;class fp extends tt{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new qt(bs,ws,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new C(1,0,0)),this.add(r);const s=new qt(bs,ws,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new C(-1,0,0)),this.add(s);const a=new qt(bs,ws,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new C(0,1,0)),this.add(a);const o=new qt(bs,ws,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new C(0,-1,0)),this.add(o);const l=new qt(bs,ws,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new C(0,0,1)),this.add(l);const c=new qt(bs,ws,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new C(0,0,-1)),this.add(c)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,a,o,l,c]=this.children,u=e.xr.enabled,f=e.getRenderTarget();e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(f),e.xr.enabled=u}}class Ou extends Ft{constructor(e,t,i,r,s,a,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:hl,super(e,t,i,r,s,a,o,l,c,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}Ou.prototype.isCubeTexture=!0;class Ux extends Yn{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),t=t||{},this.texture=new Ou(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:un,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Kt,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new pl(5,5,5),s=new es({name:"CubemapFromEquirect",uniforms:ca(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ct,blending:ir});s.uniforms.tEquirect.value=t;const a=new tn(r,s),o=t.minFilter;return t.minFilter===_a&&(t.minFilter=un),new fp(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}Ux.prototype.isWebGLCubeRenderTarget=!0;const Bf=new C,X2=new C,Y2=new Wt;class mi{constructor(e=new C(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Bf.subVectors(i,t).cross(X2.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(Bf),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Y2.getNormalMatrix(e),r=this.coplanarPoint(Bf).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}mi.prototype.isPlane=!0;const Ms=new ls,Jl=new C;class Fu{constructor(e=new mi,t=new mi,i=new mi,r=new mi,s=new mi,a=new mi){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],u=i[6],f=i[7],h=i[8],d=i[9],g=i[10],v=i[11],y=i[12],p=i[13],m=i[14],_=i[15];return t[0].setComponents(o-r,f-l,v-h,_-y).normalize(),t[1].setComponents(o+r,f+l,v+h,_+y).normalize(),t[2].setComponents(o+s,f+c,v+d,_+p).normalize(),t[3].setComponents(o-s,f-c,v-d,_-p).normalize(),t[4].setComponents(o-a,f-u,v-g,_-m).normalize(),t[5].setComponents(o+a,f+u,v+g,_+m).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Ms.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Ms)}intersectsSprite(e){return Ms.center.set(0,0,0),Ms.radius=.7071067811865476,Ms.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ms)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Jl.x=r.normal.x>0?e.max.x:e.min.x,Jl.y=r.normal.y>0?e.max.y:e.min.y,Jl.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Jl)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Bx(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function K2(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,u){const f=c.array,h=c.usage,d=n.createBuffer();n.bindBuffer(u,d),n.bufferData(u,f,h),c.onUploadCallback();let g=5126;return f instanceof Float32Array?g=5126:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):f instanceof Uint16Array?c.isFloat16BufferAttribute?t?g=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):g=5123:f instanceof Int16Array?g=5122:f instanceof Uint32Array?g=5125:f instanceof Int32Array?g=5124:f instanceof Int8Array?g=5120:(f instanceof Uint8Array||f instanceof Uint8ClampedArray)&&(g=5121),{buffer:d,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,f){const h=u.array,d=u.updateRange;n.bindBuffer(f,c),d.count===-1?n.bufferSubData(f,0,h):(t?n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):n.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1)}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);f===void 0?i.set(c,r(c,u)):f.version<c.version&&(s(f.buffer,c,u),f.version=c.version)}return{get:a,remove:o,update:l}}class hp extends mt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),c=o+1,u=l+1,f=e/o,h=t/l,d=[],g=[],v=[],y=[];for(let p=0;p<u;p++){const m=p*h-a;for(let _=0;_<c;_++){const w=_*f-s;g.push(w,-m,0),v.push(0,0,1),y.push(_/o),y.push(1-p/l)}}for(let p=0;p<l;p++)for(let m=0;m<o;m++){const _=m+c*p,w=m+c*(p+1),E=m+1+c*(p+1),A=m+1+c*p;d.push(_,w,A),d.push(w,E,A)}this.setIndex(d),this.setAttribute("position",new Bt(g,3)),this.setAttribute("normal",new Bt(v,3)),this.setAttribute("uv",new Bt(y,2))}static fromJSON(e){return new hp(e.width,e.height,e.widthSegments,e.heightSegments)}}var Z2=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,J2=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Q2=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,eP=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,tP=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,nP=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,iP="vec3 transformed = vec3( position );",rP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sP=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,aP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,oP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,lP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,cP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,uP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,hP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,dP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,pP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,mP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,gP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,vP=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,yP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_P=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,xP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,bP=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,wP="gl_FragColor = linearToOutputTexel( gl_FragColor );",MP=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,SP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,EP=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,TP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,AP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,RP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,LP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,CP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,PP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,IP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,NP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,DP=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,OP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,FP=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,kP=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,UP=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,BP=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zP=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,HP=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,VP=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,GP=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,WP=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,jP=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,$P=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qP=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,XP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,YP=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,KP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,ZP=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,JP=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,QP=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,e3=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,t3=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,n3=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,i3=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,r3=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,s3=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,a3=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,o3=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,l3=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,c3=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,u3=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,f3=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,h3=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,d3=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,p3=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,m3=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,g3=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,v3=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,y3=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,_3=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,x3=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,b3=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,w3=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,M3=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,S3=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,E3=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,T3=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,A3=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,R3=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,L3=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,C3=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,P3=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,I3=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,N3=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,D3=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,O3=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,F3=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,k3=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,U3=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,B3=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,z3=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,H3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,V3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,G3=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,W3=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const j3=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$3=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,q3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,X3=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Y3=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,K3=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Z3=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,J3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Q3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,eI=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tI=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nI=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iI=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rI=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sI=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aI=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oI=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,lI=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,cI=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,uI=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,fI=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hI=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dI=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,pI=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mI=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gI=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vI=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,_I=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xI=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bI=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,We={alphamap_fragment:Z2,alphamap_pars_fragment:J2,alphatest_fragment:Q2,alphatest_pars_fragment:eP,aomap_fragment:tP,aomap_pars_fragment:nP,begin_vertex:iP,beginnormal_vertex:rP,bsdfs:sP,bumpmap_pars_fragment:aP,clipping_planes_fragment:oP,clipping_planes_pars_fragment:lP,clipping_planes_pars_vertex:cP,clipping_planes_vertex:uP,color_fragment:fP,color_pars_fragment:hP,color_pars_vertex:dP,color_vertex:pP,common:mP,cube_uv_reflection_fragment:gP,defaultnormal_vertex:vP,displacementmap_pars_vertex:yP,displacementmap_vertex:_P,emissivemap_fragment:xP,emissivemap_pars_fragment:bP,encodings_fragment:wP,encodings_pars_fragment:MP,envmap_fragment:SP,envmap_common_pars_fragment:EP,envmap_pars_fragment:TP,envmap_pars_vertex:AP,envmap_physical_pars_fragment:UP,envmap_vertex:RP,fog_vertex:LP,fog_pars_vertex:CP,fog_fragment:PP,fog_pars_fragment:IP,gradientmap_pars_fragment:NP,lightmap_fragment:DP,lightmap_pars_fragment:OP,lights_lambert_vertex:FP,lights_pars_begin:kP,lights_toon_fragment:BP,lights_toon_pars_fragment:zP,lights_phong_fragment:HP,lights_phong_pars_fragment:VP,lights_physical_fragment:GP,lights_physical_pars_fragment:WP,lights_fragment_begin:jP,lights_fragment_maps:$P,lights_fragment_end:qP,logdepthbuf_fragment:XP,logdepthbuf_pars_fragment:YP,logdepthbuf_pars_vertex:KP,logdepthbuf_vertex:ZP,map_fragment:JP,map_pars_fragment:QP,map_particle_fragment:e3,map_particle_pars_fragment:t3,metalnessmap_fragment:n3,metalnessmap_pars_fragment:i3,morphnormal_vertex:r3,morphtarget_pars_vertex:s3,morphtarget_vertex:a3,normal_fragment_begin:o3,normal_fragment_maps:l3,normal_pars_fragment:c3,normal_pars_vertex:u3,normal_vertex:f3,normalmap_pars_fragment:h3,clearcoat_normal_fragment_begin:d3,clearcoat_normal_fragment_maps:p3,clearcoat_pars_fragment:m3,output_fragment:g3,packing:v3,premultiplied_alpha_fragment:y3,project_vertex:_3,dithering_fragment:x3,dithering_pars_fragment:b3,roughnessmap_fragment:w3,roughnessmap_pars_fragment:M3,shadowmap_pars_fragment:S3,shadowmap_pars_vertex:E3,shadowmap_vertex:T3,shadowmask_pars_fragment:A3,skinbase_vertex:R3,skinning_pars_vertex:L3,skinning_vertex:C3,skinnormal_vertex:P3,specularmap_fragment:I3,specularmap_pars_fragment:N3,tonemapping_fragment:D3,tonemapping_pars_fragment:O3,transmission_fragment:F3,transmission_pars_fragment:k3,uv_pars_fragment:U3,uv_pars_vertex:B3,uv_vertex:z3,uv2_pars_fragment:H3,uv2_pars_vertex:V3,uv2_vertex:G3,worldpos_vertex:W3,background_vert:j3,background_frag:$3,cube_vert:q3,cube_frag:X3,depth_vert:Y3,depth_frag:K3,distanceRGBA_vert:Z3,distanceRGBA_frag:J3,equirect_vert:Q3,equirect_frag:eI,linedashed_vert:tI,linedashed_frag:nI,meshbasic_vert:iI,meshbasic_frag:rI,meshlambert_vert:sI,meshlambert_frag:aI,meshmatcap_vert:oI,meshmatcap_frag:lI,meshnormal_vert:cI,meshnormal_frag:uI,meshphong_vert:fI,meshphong_frag:hI,meshphysical_vert:dI,meshphysical_frag:pI,meshtoon_vert:mI,meshtoon_frag:gI,points_vert:vI,points_frag:yI,shadow_vert:_I,shadow_frag:xI,sprite_vert:bI,sprite_frag:wI},Se={common:{diffuse:{value:new Ae(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Wt},uv2Transform:{value:new Wt},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ae(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ae(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new Ae(16777215)},opacity:{value:1},center:{value:new ye(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Wt}}},jn={basic:{uniforms:$t([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.fog]),vertexShader:We.meshbasic_vert,fragmentShader:We.meshbasic_frag},lambert:{uniforms:$t([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.fog,Se.lights,{emissive:{value:new Ae(0)}}]),vertexShader:We.meshlambert_vert,fragmentShader:We.meshlambert_frag},phong:{uniforms:$t([Se.common,Se.specularmap,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.fog,Se.lights,{emissive:{value:new Ae(0)},specular:{value:new Ae(1118481)},shininess:{value:30}}]),vertexShader:We.meshphong_vert,fragmentShader:We.meshphong_frag},standard:{uniforms:$t([Se.common,Se.envmap,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.roughnessmap,Se.metalnessmap,Se.fog,Se.lights,{emissive:{value:new Ae(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:We.meshphysical_vert,fragmentShader:We.meshphysical_frag},toon:{uniforms:$t([Se.common,Se.aomap,Se.lightmap,Se.emissivemap,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.gradientmap,Se.fog,Se.lights,{emissive:{value:new Ae(0)}}]),vertexShader:We.meshtoon_vert,fragmentShader:We.meshtoon_frag},matcap:{uniforms:$t([Se.common,Se.bumpmap,Se.normalmap,Se.displacementmap,Se.fog,{matcap:{value:null}}]),vertexShader:We.meshmatcap_vert,fragmentShader:We.meshmatcap_frag},points:{uniforms:$t([Se.points,Se.fog]),vertexShader:We.points_vert,fragmentShader:We.points_frag},dashed:{uniforms:$t([Se.common,Se.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:We.linedashed_vert,fragmentShader:We.linedashed_frag},depth:{uniforms:$t([Se.common,Se.displacementmap]),vertexShader:We.depth_vert,fragmentShader:We.depth_frag},normal:{uniforms:$t([Se.common,Se.bumpmap,Se.normalmap,Se.displacementmap,{opacity:{value:1}}]),vertexShader:We.meshnormal_vert,fragmentShader:We.meshnormal_frag},sprite:{uniforms:$t([Se.sprite,Se.fog]),vertexShader:We.sprite_vert,fragmentShader:We.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null}},vertexShader:We.background_vert,fragmentShader:We.background_frag},cube:{uniforms:$t([Se.envmap,{opacity:{value:1}}]),vertexShader:We.cube_vert,fragmentShader:We.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:We.equirect_vert,fragmentShader:We.equirect_frag},distanceRGBA:{uniforms:$t([Se.common,Se.displacementmap,{referencePosition:{value:new C},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:We.distanceRGBA_vert,fragmentShader:We.distanceRGBA_frag},shadow:{uniforms:$t([Se.lights,Se.fog,{color:{value:new Ae(0)},opacity:{value:1}}]),vertexShader:We.shadow_vert,fragmentShader:We.shadow_frag}};jn.physical={uniforms:$t([jn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ye(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ae(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ae(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new Ae(1,1,1)},specularColorMap:{value:null}}]),vertexShader:We.meshphysical_vert,fragmentShader:We.meshphysical_frag};function MI(n,e,t,i,r){const s=new Ae(0);let a=0,o,l,c=null,u=0,f=null;function h(g,v){let y=!1,p=v.isScene===!0?v.background:null;p&&p.isTexture&&(p=e.get(p));const m=n.xr,_=m.getSession&&m.getSession();_&&_.environmentBlendMode==="additive"&&(p=null),p===null?d(s,a):p&&p.isColor&&(d(p,1),y=!0),(n.autoClear||y)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),p&&(p.isCubeTexture||p.mapping===Nu)?(l===void 0&&(l=new tn(new pl(1,1,1),new es({name:"BackgroundCubeMaterial",uniforms:ca(jn.cube.uniforms),vertexShader:jn.cube.vertexShader,fragmentShader:jn.cube.fragmentShader,side:Ct,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(w,E,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p.isRenderTargetTexture===!1?-1:1,(c!==p||u!==p.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,c=p,u=p.version,f=n.toneMapping),g.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(o===void 0&&(o=new tn(new hp(2,2),new es({name:"BackgroundMaterial",uniforms:ca(jn.background.uniforms),vertexShader:jn.background.vertexShader,fragmentShader:jn.background.fragmentShader,side:aa,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=p,p.matrixAutoUpdate===!0&&p.updateMatrix(),o.material.uniforms.uvTransform.value.copy(p.matrix),(c!==p||u!==p.version||f!==n.toneMapping)&&(o.material.needsUpdate=!0,c=p,u=p.version,f=n.toneMapping),g.unshift(o,o.geometry,o.material,0,0,null))}function d(g,v){t.buffers.color.setClear(g.r,g.g,g.b,v,r)}return{getClearColor:function(){return s},setClearColor:function(g,v=1){s.set(g),a=v,d(s,a)},getClearAlpha:function(){return a},setClearAlpha:function(g){a=g,d(s,a)},render:h}}function SI(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=v(null);let c=l;function u(P,z,G,W,V){let Y=!1;if(a){const oe=g(W,G,z);c!==oe&&(c=oe,h(c.object)),Y=y(W,V),Y&&p(W,V)}else{const oe=z.wireframe===!0;(c.geometry!==W.id||c.program!==G.id||c.wireframe!==oe)&&(c.geometry=W.id,c.program=G.id,c.wireframe=oe,Y=!0)}P.isInstancedMesh===!0&&(Y=!0),V!==null&&t.update(V,34963),Y&&(b(P,z,G,W),V!==null&&n.bindBuffer(34963,t.get(V).buffer))}function f(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(P){return i.isWebGL2?n.bindVertexArray(P):s.bindVertexArrayOES(P)}function d(P){return i.isWebGL2?n.deleteVertexArray(P):s.deleteVertexArrayOES(P)}function g(P,z,G){const W=G.wireframe===!0;let V=o[P.id];V===void 0&&(V={},o[P.id]=V);let Y=V[z.id];Y===void 0&&(Y={},V[z.id]=Y);let oe=Y[W];return oe===void 0&&(oe=v(f()),Y[W]=oe),oe}function v(P){const z=[],G=[],W=[];for(let V=0;V<r;V++)z[V]=0,G[V]=0,W[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:G,attributeDivisors:W,object:P,attributes:{},index:null}}function y(P,z){const G=c.attributes,W=P.attributes;let V=0;for(const Y in W){const oe=G[Y],te=W[Y];if(oe===void 0||oe.attribute!==te||oe.data!==te.data)return!0;V++}return c.attributesNum!==V||c.index!==z}function p(P,z){const G={},W=P.attributes;let V=0;for(const Y in W){const oe=W[Y],te={};te.attribute=oe,oe.data&&(te.data=oe.data),G[Y]=te,V++}c.attributes=G,c.attributesNum=V,c.index=z}function m(){const P=c.newAttributes;for(let z=0,G=P.length;z<G;z++)P[z]=0}function _(P){w(P,0)}function w(P,z){const G=c.newAttributes,W=c.enabledAttributes,V=c.attributeDivisors;G[P]=1,W[P]===0&&(n.enableVertexAttribArray(P),W[P]=1),V[P]!==z&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](P,z),V[P]=z)}function E(){const P=c.newAttributes,z=c.enabledAttributes;for(let G=0,W=z.length;G<W;G++)z[G]!==P[G]&&(n.disableVertexAttribArray(G),z[G]=0)}function A(P,z,G,W,V,Y){i.isWebGL2===!0&&(G===5124||G===5125)?n.vertexAttribIPointer(P,z,G,V,Y):n.vertexAttribPointer(P,z,G,W,V,Y)}function b(P,z,G,W){if(i.isWebGL2===!1&&(P.isInstancedMesh||W.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;m();const V=W.attributes,Y=G.getAttributes(),oe=z.defaultAttributeValues;for(const te in Y){const ie=Y[te];if(ie.location>=0){let _e=V[te];if(_e===void 0&&(te==="instanceMatrix"&&P.instanceMatrix&&(_e=P.instanceMatrix),te==="instanceColor"&&P.instanceColor&&(_e=P.instanceColor)),_e!==void 0){const le=_e.normalized,he=_e.itemSize,Ee=t.get(_e);if(Ee===void 0)continue;const F=Ee.buffer,U=Ee.type,ae=Ee.bytesPerElement;if(_e.isInterleavedBufferAttribute){const X=_e.data,ne=X.stride,we=_e.offset;if(X&&X.isInstancedInterleavedBuffer){for(let Q=0;Q<ie.locationSize;Q++)w(ie.location+Q,X.meshPerAttribute);P.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let Q=0;Q<ie.locationSize;Q++)_(ie.location+Q);n.bindBuffer(34962,F);for(let Q=0;Q<ie.locationSize;Q++)A(ie.location+Q,he/ie.locationSize,U,le,ne*ae,(we+he/ie.locationSize*Q)*ae)}else{if(_e.isInstancedBufferAttribute){for(let X=0;X<ie.locationSize;X++)w(ie.location+X,_e.meshPerAttribute);P.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=_e.meshPerAttribute*_e.count)}else for(let X=0;X<ie.locationSize;X++)_(ie.location+X);n.bindBuffer(34962,F);for(let X=0;X<ie.locationSize;X++)A(ie.location+X,he/ie.locationSize,U,le,he*ae,he/ie.locationSize*X*ae)}}else if(oe!==void 0){const le=oe[te];if(le!==void 0)switch(le.length){case 2:n.vertexAttrib2fv(ie.location,le);break;case 3:n.vertexAttrib3fv(ie.location,le);break;case 4:n.vertexAttrib4fv(ie.location,le);break;default:n.vertexAttrib1fv(ie.location,le)}}}}E()}function N(){R();for(const P in o){const z=o[P];for(const G in z){const W=z[G];for(const V in W)d(W[V].object),delete W[V];delete z[G]}delete o[P]}}function K(P){if(o[P.id]===void 0)return;const z=o[P.id];for(const G in z){const W=z[G];for(const V in W)d(W[V].object),delete W[V];delete z[G]}delete o[P.id]}function H(P){for(const z in o){const G=o[z];if(G[P.id]===void 0)continue;const W=G[P.id];for(const V in W)d(W[V].object),delete W[V];delete G[P.id]}}function R(){J(),c!==l&&(c=l,h(c.object))}function J(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:R,resetDefaultState:J,dispose:N,releaseStatesOfGeometry:K,releaseStatesOfProgram:H,initAttributes:m,enableAttribute:_,disableUnusedAttributes:E}}function EI(n,e,t,i){const r=i.isWebGL2;let s;function a(c){s=c}function o(c,u){n.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,f){if(f===0)return;let h,d;if(r)h=n,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](s,c,u,f),t.update(u,s,f)}this.setMode=a,this.render=o,this.renderInstances=l}function TI(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const b=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(b){if(b==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";b="mediump"}return b==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=a||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,f=n.getParameter(34930),h=n.getParameter(35660),d=n.getParameter(3379),g=n.getParameter(34076),v=n.getParameter(34921),y=n.getParameter(36347),p=n.getParameter(36348),m=n.getParameter(36349),_=h>0,w=a||e.has("OES_texture_float"),E=_&&w,A=a?n.getParameter(36183):0;return{isWebGL2:a,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:y,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:_,floatFragmentTextures:w,floatVertexTextures:E,maxSamples:A}}function AI(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new mi,o=new Wt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h,d){const g=f.length!==0||h||i!==0||r;return r=h,t=u(f,d,0),i=f.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1,c()},this.setState=function(f,h,d){const g=f.clippingPlanes,v=f.clipIntersection,y=f.clipShadows,p=n.get(f);if(!r||g===null||g.length===0||s&&!y)s?u(null):c();else{const m=s?0:i,_=m*4;let w=p.clippingState||null;l.value=w,w=u(g,h,_,d);for(let E=0;E!==_;++E)w[E]=t[E];p.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=m}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,h,d,g){const v=f!==null?f.length:0;let y=null;if(v!==0){if(y=l.value,g!==!0||y===null){const p=d+v*4,m=h.matrixWorldInverse;o.getNormalMatrix(m),(y===null||y.length<p)&&(y=new Float32Array(p));for(let _=0,w=d;_!==v;++_,w+=4)a.copy(f[_]).applyMatrix4(m,o),a.normal.toArray(y,w),y[w+3]=a.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,y}}function RI(n){let e=new WeakMap;function t(a,o){return o===Bh?a.mapping=hl:o===zh&&(a.mapping=dl),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===Bh||o===zh)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const c=n.getRenderTarget(),u=new Ux(l.height/2);return u.fromEquirectangularTexture(n,a),e.set(a,u),n.setRenderTarget(c),a.addEventListener("dispose",r),t(u.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ku extends up{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,a=s+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}ku.prototype.isOrthographicCamera=!0;class Uu extends es{constructor(e){super(e),this.type="RawShaderMaterial"}}Uu.prototype.isRawShaderMaterial=!0;const Xs=4,rr=8,Gn=Math.pow(2,rr),zx=[.125,.215,.35,.446,.526,.582],Hx=rr-Xs+1+zx.length,Ss=20,gr={[Zt]:0,[Qn]:1,[lp]:2,[Rx]:3,[Lx]:4,[Cx]:5,[op]:6},zf=new ku,{_lodPlanes:Ua,_sizeLods:cv,_sigmas:Ql}=PI(),uv=new Ae;let Hf=null;const Fr=(1+Math.sqrt(5))/2,Es=1/Fr,fv=[new C(1,1,1),new C(-1,1,1),new C(1,1,-1),new C(-1,1,-1),new C(0,Fr,Es),new C(0,Fr,-Es),new C(Es,0,Fr),new C(-Es,0,Fr),new C(Fr,Es,0),new C(-Fr,Es,0)];class LI{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=II(Ss),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Hf=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=pv(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=dv(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<Ua.length;e++)Ua[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Hf),e.scissorTest=!1,ec(e,0,0,e.width,e.height)}_fromTexture(e){Hf=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:It,minFilter:It,generateMipmaps:!1,type:mr,format:MC,encoding:CI(e)?e.encoding:lp,depthBuffer:!1},i=hv(t);return i.depthBuffer=!e,this._pingPongRenderTarget=hv(t),i}_compileMaterial(e){const t=new tn(Ua[0],e);this._renderer.compile(t,zf)}_sceneToCubeUV(e,t,i,r){const o=new qt(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,h=u.outputEncoding,d=u.toneMapping;u.getClearColor(uv),u.toneMapping=qr,u.outputEncoding=Zt,u.autoClear=!1;const g=new Qi({name:"PMREM.Background",side:Ct,depthWrite:!1,depthTest:!1}),v=new tn(new pl,g);let y=!1;const p=e.background;p?p.isColor&&(g.color.copy(p),e.background=null,y=!0):(g.color.copy(uv),y=!0);for(let m=0;m<6;m++){const _=m%3;_==0?(o.up.set(0,l[m],0),o.lookAt(c[m],0,0)):_==1?(o.up.set(0,0,l[m]),o.lookAt(0,c[m],0)):(o.up.set(0,l[m],0),o.lookAt(0,0,c[m])),ec(r,_*Gn,m>2?Gn:0,Gn,Gn),u.setRenderTarget(r),y&&u.render(v,o),u.render(e,o)}v.geometry.dispose(),v.material.dispose(),u.toneMapping=d,u.outputEncoding=h,u.autoClear=f,e.background=p}_setEncoding(e,t){this._renderer.capabilities.isWebGL2===!0&&t.format===Kt&&t.type===mr&&t.encoding===Qn?e.value=gr[Zt]:e.value=gr[t.encoding]}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===hl||e.mapping===dl;r?this._cubemapShader==null&&(this._cubemapShader=pv()):this._equirectShader==null&&(this._equirectShader=dv());const s=r?this._cubemapShader:this._equirectShader,a=new tn(Ua[0],s),o=s.uniforms;o.envMap.value=e,r||o.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(o.inputEncoding,e),this._setEncoding(o.outputEncoding,t.texture),ec(t,0,0,3*Gn,2*Gn),i.setRenderTarget(t),i.render(a,zf)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<Hx;r++){const s=Math.sqrt(Ql[r]*Ql[r]-Ql[r-1]*Ql[r-1]),a=fv[(r-1)%fv.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,c=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new tn(Ua[r],c),h=c.uniforms,d=cv[i]-1,g=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Ss-1),v=s/g,y=isFinite(s)?1+Math.floor(u*v):Ss;y>Ss&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to ${Ss}`);const p=[];let m=0;for(let A=0;A<Ss;++A){const b=A/v,N=Math.exp(-b*b/2);p.push(N),A==0?m+=N:A<y&&(m+=2*N)}for(let A=0;A<p.length;A++)p[A]=p[A]/m;h.envMap.value=e.texture,h.samples.value=y,h.weights.value=p,h.latitudinal.value=a==="latitudinal",o&&(h.poleAxis.value=o),h.dTheta.value=g,h.mipInt.value=rr-i,this._setEncoding(h.inputEncoding,e.texture),this._setEncoding(h.outputEncoding,e.texture);const _=cv[r],w=3*Math.max(0,Gn-2*_),E=(r===0?0:2*Gn)+2*_*(r>rr-Xs?r-rr+Xs:0);ec(t,w,E,3*_,2*_),l.setRenderTarget(t),l.render(f,zf)}}function CI(n){return n===void 0||n.type!==mr?!1:n.encoding===Zt||n.encoding===Qn||n.encoding===op}function PI(){const n=[],e=[],t=[];let i=rr;for(let r=0;r<Hx;r++){const s=Math.pow(2,i);e.push(s);let a=1/s;r>rr-Xs?a=zx[r-rr+Xs-1]:r==0&&(a=0),t.push(a);const o=1/(s-1),l=-o/2,c=1+o/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],f=6,h=6,d=3,g=2,v=1,y=new Float32Array(d*h*f),p=new Float32Array(g*h*f),m=new Float32Array(v*h*f);for(let w=0;w<f;w++){const E=w%3*2/3-1,A=w>2?0:-1,b=[E,A,0,E+2/3,A,0,E+2/3,A+1,0,E,A,0,E+2/3,A+1,0,E,A+1,0];y.set(b,d*h*w),p.set(u,g*h*w);const N=[w,w,w,w,w,w];m.set(N,v*h*w)}const _=new mt;_.setAttribute("position",new Et(y,d)),_.setAttribute("uv",new Et(p,g)),_.setAttribute("faceIndex",new Et(m,v)),n.push(_),i>Xs&&i--}return{_lodPlanes:n,_sizeLods:e,_sigmas:t}}function hv(n){const e=new Yn(3*Gn,3*Gn,n);return e.texture.mapping=Nu,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function ec(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function II(n){const e=new Float32Array(n),t=new C(0,1,0);return new Uu({name:"SphericalGaussianBlur",defines:{n},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:t},inputEncoding:{value:gr[Zt]},outputEncoding:{value:gr[Zt]}},vertexShader:dp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${pp()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ir,depthTest:!1,depthWrite:!1})}function dv(){const n=new ye(1,1);return new Uu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:n},inputEncoding:{value:gr[Zt]},outputEncoding:{value:gr[Zt]}},vertexShader:dp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${pp()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ir,depthTest:!1,depthWrite:!1})}function pv(){return new Uu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:gr[Zt]},outputEncoding:{value:gr[Zt]}},vertexShader:dp(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${pp()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:ir,depthTest:!1,depthWrite:!1})}function dp(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function pp(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function NI(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const l=o.mapping,c=l===Bh||l===zh,u=l===hl||l===dl;if(c||u){if(e.has(o))return e.get(o).texture;{const f=o.image;if(c&&f&&f.height>0||u&&f&&r(f)){const h=n.getRenderTarget();t===null&&(t=new LI(n));const d=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,d),n.setRenderTarget(h),o.addEventListener("dispose",s),d.texture}else return null}}}return o}function r(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function s(o){const l=o.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function DI(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function OI(n,e,t,i){const r={},s=new WeakMap;function a(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const g in h.attributes)e.remove(h.attributes[g]);h.removeEventListener("dispose",a),delete r[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function o(f,h){return r[h.id]===!0||(h.addEventListener("dispose",a),r[h.id]=!0,t.memory.geometries++),h}function l(f){const h=f.attributes;for(const g in h)e.update(h[g],34962);const d=f.morphAttributes;for(const g in d){const v=d[g];for(let y=0,p=v.length;y<p;y++)e.update(v[y],34962)}}function c(f){const h=[],d=f.index,g=f.attributes.position;let v=0;if(d!==null){const m=d.array;v=d.version;for(let _=0,w=m.length;_<w;_+=3){const E=m[_+0],A=m[_+1],b=m[_+2];h.push(E,A,A,b,b,E)}}else{const m=g.array;v=g.version;for(let _=0,w=m.length/3-1;_<w;_+=3){const E=_+0,A=_+1,b=_+2;h.push(E,A,A,b,b,E)}}const y=new(Nx(h)>65535?kx:Fx)(h,1);y.version=v;const p=s.get(f);p&&e.remove(p),s.set(f,y)}function u(f){const h=s.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&c(f)}else c(f);return s.get(f)}return{get:o,update:l,getWireframeAttribute:u}}function FI(n,e,t,i){const r=i.isWebGL2;let s;function a(h){s=h}let o,l;function c(h){o=h.type,l=h.bytesPerElement}function u(h,d){n.drawElements(s,d,o,h*l),t.update(d,s,1)}function f(h,d,g){if(g===0)return;let v,y;if(r)v=n,y="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](s,d,o,h*l,g),t.update(d,s,g)}this.setMode=a,this.setIndex=c,this.render=u,this.renderInstances=f}function kI(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}class mp extends Ft{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=It,this.minFilter=It,this.wrapR=ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}mp.prototype.isDataTexture2DArray=!0;function UI(n,e){return n[0]-e[0]}function BI(n,e){return Math.abs(e[1])-Math.abs(n[1])}function mv(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function zI(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new C,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,f,h){const d=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=u.morphAttributes.position.length;let v=s.get(u);if(v===void 0||v.count!==g){v!==void 0&&v.texture.dispose();const m=u.morphAttributes.normal!==void 0,_=u.morphAttributes.position,w=u.morphAttributes.normal||[],E=u.attributes.position.count,A=m===!0?2:1;let b=E*A,N=1;b>e.maxTextureSize&&(N=Math.ceil(b/e.maxTextureSize),b=e.maxTextureSize);const K=new Float32Array(b*N*4*g),H=new mp(K,b,N,g);H.format=Kt,H.type=vi;const R=A*4;for(let J=0;J<g;J++){const P=_[J],z=w[J],G=b*N*4*J;for(let W=0;W<P.count;W++){a.fromBufferAttribute(P,W),P.normalized===!0&&mv(a,P);const V=W*R;K[G+V+0]=a.x,K[G+V+1]=a.y,K[G+V+2]=a.z,K[G+V+3]=0,m===!0&&(a.fromBufferAttribute(z,W),z.normalized===!0&&mv(a,z),K[G+V+4]=a.x,K[G+V+5]=a.y,K[G+V+6]=a.z,K[G+V+7]=0)}}v={count:g,texture:H,size:new ye(b,N)},s.set(u,v)}let y=0;for(let m=0;m<d.length;m++)y+=d[m];const p=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",p),h.getUniforms().setValue(n,"morphTargetInfluences",d),h.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const g=d===void 0?0:d.length;let v=i[u.id];if(v===void 0||v.length!==g){v=[];for(let w=0;w<g;w++)v[w]=[w,0];i[u.id]=v}for(let w=0;w<g;w++){const E=v[w];E[0]=w,E[1]=d[w]}v.sort(BI);for(let w=0;w<8;w++)w<g&&v[w][1]?(o[w][0]=v[w][0],o[w][1]=v[w][1]):(o[w][0]=Number.MAX_SAFE_INTEGER,o[w][1]=0);o.sort(UI);const y=u.morphAttributes.position,p=u.morphAttributes.normal;let m=0;for(let w=0;w<8;w++){const E=o[w],A=E[0],b=E[1];A!==Number.MAX_SAFE_INTEGER&&b?(y&&u.getAttribute("morphTarget"+w)!==y[A]&&u.setAttribute("morphTarget"+w,y[A]),p&&u.getAttribute("morphNormal"+w)!==p[A]&&u.setAttribute("morphNormal"+w,p[A]),r[w]=b,m+=b):(y&&u.hasAttribute("morphTarget"+w)===!0&&u.deleteAttribute("morphTarget"+w),p&&u.hasAttribute("morphNormal"+w)===!0&&u.deleteAttribute("morphNormal"+w),r[w]=0)}const _=u.morphTargetsRelative?1:1-m;h.getUniforms().setValue(n,"morphTargetBaseInfluence",_),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function HI(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);return r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),f}function a(){r=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:a}}class Vx extends Ft{constructor(e=null,t=1,i=1,r=1){super(null),this.image={data:e,width:t,height:i,depth:r},this.magFilter=It,this.minFilter=It,this.wrapR=ln,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}Vx.prototype.isDataTexture3D=!0;const Gx=new Ft,VI=new mp,GI=new Vx,Wx=new Ou,gv=[],vv=[],yv=new Float32Array(16),_v=new Float32Array(9),xv=new Float32Array(4);function Ma(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=gv[r];if(s===void 0&&(s=new Float32Array(r),gv[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function sn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Jt(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function jx(n,e){let t=vv[e];t===void 0&&(t=new Int32Array(e),vv[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function WI(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function jI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(sn(t,e))return;n.uniform2fv(this.addr,e),Jt(t,e)}}function $I(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(sn(t,e))return;n.uniform3fv(this.addr,e),Jt(t,e)}}function qI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(sn(t,e))return;n.uniform4fv(this.addr,e),Jt(t,e)}}function XI(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(sn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Jt(t,e)}else{if(sn(t,i))return;xv.set(i),n.uniformMatrix2fv(this.addr,!1,xv),Jt(t,i)}}function YI(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(sn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Jt(t,e)}else{if(sn(t,i))return;_v.set(i),n.uniformMatrix3fv(this.addr,!1,_v),Jt(t,i)}}function KI(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(sn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Jt(t,e)}else{if(sn(t,i))return;yv.set(i),n.uniformMatrix4fv(this.addr,!1,yv),Jt(t,i)}}function ZI(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function JI(n,e){const t=this.cache;sn(t,e)||(n.uniform2iv(this.addr,e),Jt(t,e))}function QI(n,e){const t=this.cache;sn(t,e)||(n.uniform3iv(this.addr,e),Jt(t,e))}function eN(n,e){const t=this.cache;sn(t,e)||(n.uniform4iv(this.addr,e),Jt(t,e))}function tN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function nN(n,e){const t=this.cache;sn(t,e)||(n.uniform2uiv(this.addr,e),Jt(t,e))}function iN(n,e){const t=this.cache;sn(t,e)||(n.uniform3uiv(this.addr,e),Jt(t,e))}function rN(n,e){const t=this.cache;sn(t,e)||(n.uniform4uiv(this.addr,e),Jt(t,e))}function sN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||Gx,r)}function aN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||GI,r)}function oN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||Wx,r)}function lN(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||VI,r)}function cN(n){switch(n){case 5126:return WI;case 35664:return jI;case 35665:return $I;case 35666:return qI;case 35674:return XI;case 35675:return YI;case 35676:return KI;case 5124:case 35670:return ZI;case 35667:case 35671:return JI;case 35668:case 35672:return QI;case 35669:case 35673:return eN;case 5125:return tN;case 36294:return nN;case 36295:return iN;case 36296:return rN;case 35678:case 36198:case 36298:case 36306:case 35682:return sN;case 35679:case 36299:case 36307:return aN;case 35680:case 36300:case 36308:case 36293:return oN;case 36289:case 36303:case 36311:case 36292:return lN}}function uN(n,e){n.uniform1fv(this.addr,e)}function fN(n,e){const t=Ma(e,this.size,2);n.uniform2fv(this.addr,t)}function hN(n,e){const t=Ma(e,this.size,3);n.uniform3fv(this.addr,t)}function dN(n,e){const t=Ma(e,this.size,4);n.uniform4fv(this.addr,t)}function pN(n,e){const t=Ma(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function mN(n,e){const t=Ma(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function gN(n,e){const t=Ma(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function vN(n,e){n.uniform1iv(this.addr,e)}function yN(n,e){n.uniform2iv(this.addr,e)}function _N(n,e){n.uniform3iv(this.addr,e)}function xN(n,e){n.uniform4iv(this.addr,e)}function bN(n,e){n.uniform1uiv(this.addr,e)}function wN(n,e){n.uniform2uiv(this.addr,e)}function MN(n,e){n.uniform3uiv(this.addr,e)}function SN(n,e){n.uniform4uiv(this.addr,e)}function EN(n,e,t){const i=e.length,r=jx(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||Gx,r[s])}function TN(n,e,t){const i=e.length,r=jx(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||Wx,r[s])}function AN(n){switch(n){case 5126:return uN;case 35664:return fN;case 35665:return hN;case 35666:return dN;case 35674:return pN;case 35675:return mN;case 35676:return gN;case 5124:case 35670:return vN;case 35667:case 35671:return yN;case 35668:case 35672:return _N;case 35669:case 35673:return xN;case 5125:return bN;case 36294:return wN;case 36295:return MN;case 36296:return SN;case 35678:case 36198:case 36298:case 36306:case 35682:return EN;case 35680:case 36300:case 36308:case 36293:return TN}}function RN(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=cN(e.type)}function $x(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=AN(e.type)}$x.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),Jt(e,n)};function qx(n){this.id=n,this.seq=[],this.map={}}qx.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const a=i[r];a.setValue(n,e[a.id],t)}};const Vf=/(\w+)(\])?(\[|\.)?/g;function bv(n,e){n.seq.push(e),n.map[e.id]=e}function LN(n,e,t){const i=n.name,r=i.length;for(Vf.lastIndex=0;;){const s=Vf.exec(i),a=Vf.lastIndex;let o=s[1];const l=s[2]==="]",c=s[3];if(l&&(o=o|0),c===void 0||c==="["&&a+2===r){bv(t,c===void 0?new RN(o,n,e):new $x(o,n,e));break}else{let f=t.map[o];f===void 0&&(f=new qx(o),bv(t,f)),t=f}}}function sr(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);LN(r,s,this)}}sr.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};sr.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};sr.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const a=e[r],o=t[a.id];o.needsUpdate!==!1&&a.setValue(n,o.value,i)}};sr.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function wv(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let CN=0;function PN(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function Xx(n){switch(n){case Zt:return["Linear","( value )"];case Qn:return["sRGB","( value )"];case lp:return["RGBE","( value )"];case Rx:return["RGBM","( value, 7.0 )"];case Lx:return["RGBM","( value, 16.0 )"];case Cx:return["RGBD","( value, 256.0 )"];case op:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case f2:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function Mv(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();return i&&r===""?"":t.toUpperCase()+`

`+r+`

`+PN(n.getShaderSource(e))}function Or(n,e){const t=Xx(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function IN(n,e){const t=Xx(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function NN(n,e){let t;switch(e){case cC:t="Linear";break;case uC:t="Reinhard";break;case fC:t="OptimizedCineon";break;case hC:t="ACESFilmic";break;case dC:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function DN(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ka).join(`
`)}function ON(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function FN(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function Ka(n){return n!==""}function Sv(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Ev(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kN=/^[ \t]*#include +<([\w\d./]+)>/gm;function Wh(n){return n.replace(kN,UN)}function UN(n,e){const t=We[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return Wh(t)}const BN=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,zN=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Tv(n){return n.replace(zN,Yx).replace(BN,HN)}function HN(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Yx(n,e,t,i)}function Yx(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function Av(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function VN(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===xx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===HL?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ya&&(e="SHADOWMAP_TYPE_VSM"),e}function GN(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case hl:case dl:e="ENVMAP_TYPE_CUBE";break;case Nu:case sp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function WN(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case dl:case sp:e="ENVMAP_MODE_REFRACTION";break}return e}function jN(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Iu:e="ENVMAP_BLENDING_MULTIPLY";break;case oC:e="ENVMAP_BLENDING_MIX";break;case lC:e="ENVMAP_BLENDING_ADD";break}return e}function $N(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=VN(t),c=GN(t),u=WN(t),f=jN(t),h=n.gammaFactor>0?n.gammaFactor:1,d=t.isWebGL2?"":DN(t),g=ON(s),v=r.createProgram();let y,p,m=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(y=[g].filter(Ka).join(`
`),y.length>0&&(y+=`
`),p=[d,g].filter(Ka).join(`
`),p.length>0&&(p+=`
`)):(y=[Av(t),"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargets&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ka).join(`
`),p=[d,Av(t),"#define SHADER_NAME "+t.shaderName,g,"#define GAMMA_FACTOR "+h,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==qr?"#define TONE_MAPPING":"",t.toneMapping!==qr?We.tonemapping_pars_fragment:"",t.toneMapping!==qr?NN("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.format===Xr?"#define OPAQUE":"",We.encodings_pars_fragment,t.map?Or("mapTexelToLinear",t.mapEncoding):"",t.matcap?Or("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?Or("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?Or("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.specularColorMap?Or("specularColorMapTexelToLinear",t.specularColorMapEncoding):"",t.sheenColorMap?Or("sheenColorMapTexelToLinear",t.sheenColorMapEncoding):"",t.lightMap?Or("lightMapTexelToLinear",t.lightMapEncoding):"",IN("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ka).join(`
`)),a=Wh(a),a=Sv(a,t),a=Ev(a,t),o=Wh(o),o=Sv(o,t),o=Ev(o,t),a=Tv(a),o=Tv(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(m=`#version 300 es
`,y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,p=["#define varying in",t.glslVersion===Kg?"":"out highp vec4 pc_fragColor;",t.glslVersion===Kg?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+p);const _=m+y+a,w=m+p+o,E=wv(r,35633,_),A=wv(r,35632,w);if(r.attachShader(v,E),r.attachShader(v,A),t.index0AttributeName!==void 0?r.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),n.debug.checkShaderErrors){const K=r.getProgramInfoLog(v).trim(),H=r.getShaderInfoLog(E).trim(),R=r.getShaderInfoLog(A).trim();let J=!0,P=!0;if(r.getProgramParameter(v,35714)===!1){J=!1;const z=Mv(r,E,"vertex"),G=Mv(r,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(v,35715)+`

Program Info Log: `+K+`
`+z+`
`+G)}else K!==""?console.warn("THREE.WebGLProgram: Program Info Log:",K):(H===""||R==="")&&(P=!1);P&&(this.diagnostics={runnable:J,programLog:K,vertexShader:{log:H,prefix:y},fragmentShader:{log:R,prefix:p}})}r.deleteShader(E),r.deleteShader(A);let b;this.getUniforms=function(){return b===void 0&&(b=new sr(r,v)),b};let N;return this.getAttributes=function(){return N===void 0&&(N=FN(r,v)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=t.shaderName,this.id=CN++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=E,this.fragmentShader=A,this}function qN(n,e,t,i,r,s,a){const o=[],l=r.isWebGL2,c=r.logarithmicDepthBuffer,u=r.floatVertexTextures,f=r.maxVertexUniforms,h=r.vertexTextures;let d=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function y(b){const K=b.skeleton.bones;if(u)return 1024;{const R=Math.floor((f-20)/4),J=Math.min(R,K.length);return J<K.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+K.length+" bones. This GPU supports "+J+"."),0):J}}function p(b){let N;return b&&b.isTexture?N=b.encoding:b&&b.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),N=b.texture.encoding):N=Zt,l&&b&&b.isTexture&&b.format===Kt&&b.type===mr&&b.encoding===Qn&&(N=Zt),N}function m(b,N,K,H,R){const J=H.fog,P=b.isMeshStandardMaterial?H.environment:null,z=(b.isMeshStandardMaterial?t:e).get(b.envMap||P),G=g[b.type],W=R.isSkinnedMesh?y(R):0;b.precision!==null&&(d=r.getMaxPrecision(b.precision),d!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",d,"instead."));let V,Y;if(G){const le=jn[G];V=le.vertexShader,Y=le.fragmentShader}else V=b.vertexShader,Y=b.fragmentShader;const oe=n.getRenderTarget(),te=b.alphaTest>0,ie=b.clearcoat>0;return{isWebGL2:l,shaderID:G,shaderName:b.type,vertexShader:V,fragmentShader:Y,defines:b.defines,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:d,instancing:R.isInstancedMesh===!0,instancingColor:R.isInstancedMesh===!0&&R.instanceColor!==null,supportsVertexTextures:h,outputEncoding:oe!==null?p(oe.texture):n.outputEncoding,map:!!b.map,mapEncoding:p(b.map),matcap:!!b.matcap,matcapEncoding:p(b.matcap),envMap:!!z,envMapMode:z&&z.mapping,envMapEncoding:p(z),envMapCubeUV:!!z&&(z.mapping===Nu||z.mapping===sp),lightMap:!!b.lightMap,lightMapEncoding:p(b.lightMap),aoMap:!!b.aoMap,emissiveMap:!!b.emissiveMap,emissiveMapEncoding:p(b.emissiveMap),bumpMap:!!b.bumpMap,normalMap:!!b.normalMap,objectSpaceNormalMap:b.normalMapType===p2,tangentSpaceNormalMap:b.normalMapType===os,clearcoat:ie,clearcoatMap:ie&&!!b.clearcoatMap,clearcoatRoughnessMap:ie&&!!b.clearcoatRoughnessMap,clearcoatNormalMap:ie&&!!b.clearcoatNormalMap,displacementMap:!!b.displacementMap,roughnessMap:!!b.roughnessMap,metalnessMap:!!b.metalnessMap,specularMap:!!b.specularMap,specularIntensityMap:!!b.specularIntensityMap,specularColorMap:!!b.specularColorMap,specularColorMapEncoding:p(b.specularColorMap),alphaMap:!!b.alphaMap,alphaTest:te,gradientMap:!!b.gradientMap,sheen:b.sheen>0,sheenColorMap:!!b.sheenColorMap,sheenColorMapEncoding:p(b.sheenColorMap),sheenRoughnessMap:!!b.sheenRoughnessMap,transmission:b.transmission>0,transmissionMap:!!b.transmissionMap,thicknessMap:!!b.thicknessMap,combine:b.combine,vertexTangents:!!b.normalMap&&!!R.geometry&&!!R.geometry.attributes.tangent,vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!R.geometry&&!!R.geometry.attributes.color&&R.geometry.attributes.color.itemSize===4,vertexUvs:!!b.map||!!b.bumpMap||!!b.normalMap||!!b.specularMap||!!b.alphaMap||!!b.emissiveMap||!!b.roughnessMap||!!b.metalnessMap||!!b.clearcoatMap||!!b.clearcoatRoughnessMap||!!b.clearcoatNormalMap||!!b.displacementMap||!!b.transmissionMap||!!b.thicknessMap||!!b.specularIntensityMap||!!b.specularColorMap||!!b.sheenColorMap||b.sheenRoughnessMap,uvsVertexOnly:!(b.map||b.bumpMap||b.normalMap||b.specularMap||b.alphaMap||b.emissiveMap||b.roughnessMap||b.metalnessMap||b.clearcoatNormalMap||b.transmission>0||b.transmissionMap||b.thicknessMap||b.specularIntensityMap||b.specularColorMap||!!b.sheen>0||b.sheenColorMap||b.sheenRoughnessMap)&&!!b.displacementMap,fog:!!J,useFog:b.fog,fogExp2:J&&J.isFogExp2,flatShading:!!b.flatShading,sizeAttenuation:b.sizeAttenuation,logarithmicDepthBuffer:c,skinning:R.isSkinnedMesh===!0&&W>0,maxBones:W,useVertexTexture:u,morphTargets:!!R.geometry&&!!R.geometry.morphAttributes.position,morphNormals:!!R.geometry&&!!R.geometry.morphAttributes.normal,morphTargetsCount:R.geometry&&R.geometry.morphAttributes.position?R.geometry.morphAttributes.position.length:0,numDirLights:N.directional.length,numPointLights:N.point.length,numSpotLights:N.spot.length,numRectAreaLights:N.rectArea.length,numHemiLights:N.hemi.length,numDirLightShadows:N.directionalShadowMap.length,numPointLightShadows:N.pointShadowMap.length,numSpotLightShadows:N.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,format:b.format,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&K.length>0,shadowMapType:n.shadowMap.type,toneMapping:b.toneMapped?n.toneMapping:qr,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===Qr,flipSided:b.side===Ct,depthPacking:b.depthPacking!==void 0?b.depthPacking:!1,index0AttributeName:b.index0AttributeName,extensionDerivatives:b.extensions&&b.extensions.derivatives,extensionFragDepth:b.extensions&&b.extensions.fragDepth,extensionDrawBuffers:b.extensions&&b.extensions.drawBuffers,extensionShaderTextureLOD:b.extensions&&b.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||i.has("EXT_shader_texture_lod"),customProgramCacheKey:b.customProgramCacheKey()}}function _(b){const N=[];if(b.shaderID?N.push(b.shaderID):(N.push(Zg(b.fragmentShader)),N.push(Zg(b.vertexShader))),b.defines!==void 0)for(const K in b.defines)N.push(K),N.push(b.defines[K]);if(b.isRawShaderMaterial===!1){for(let K=0;K<v.length;K++)N.push(b[v[K]]);N.push(n.outputEncoding),N.push(n.gammaFactor)}return N.push(b.customProgramCacheKey),N.join()}function w(b){const N=g[b.type];let K;if(N){const H=jn[N];K=j2.clone(H.uniforms)}else K=b.uniforms;return K}function E(b,N){let K;for(let H=0,R=o.length;H<R;H++){const J=o[H];if(J.cacheKey===N){K=J,++K.usedTimes;break}}return K===void 0&&(K=new $N(n,N,b,s),o.push(K)),K}function A(b){if(--b.usedTimes===0){const N=o.indexOf(b);o[N]=o[o.length-1],o.pop(),b.destroy()}}return{getParameters:m,getProgramCacheKey:_,getUniforms:w,acquireProgram:E,releaseProgram:A,programs:o}}function XN(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function YN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Rv(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Lv(n){const e=[];let t=0;const i=[],r=[],s=[],a={id:-1};function o(){t=0,i.length=0,r.length=0,s.length=0}function l(d,g,v,y,p,m){let _=e[t];const w=n.get(v);return _===void 0?(_={id:d.id,object:d,geometry:g,material:v,program:w.program||a,groupOrder:y,renderOrder:d.renderOrder,z:p,group:m},e[t]=_):(_.id=d.id,_.object=d,_.geometry=g,_.material=v,_.program=w.program||a,_.groupOrder=y,_.renderOrder=d.renderOrder,_.z=p,_.group=m),t++,_}function c(d,g,v,y,p,m){const _=l(d,g,v,y,p,m);v.transmission>0?r.push(_):v.transparent===!0?s.push(_):i.push(_)}function u(d,g,v,y,p,m){const _=l(d,g,v,y,p,m);v.transmission>0?r.unshift(_):v.transparent===!0?s.unshift(_):i.unshift(_)}function f(d,g){i.length>1&&i.sort(d||YN),r.length>1&&r.sort(g||Rv),s.length>1&&s.sort(g||Rv)}function h(){for(let d=t,g=e.length;d<g;d++){const v=e[d];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.program=null,v.group=null}}return{opaque:i,transmissive:r,transparent:s,init:o,push:c,unshift:u,finish:h,sort:f}}function KN(n){let e=new WeakMap;function t(r,s){let a;return e.has(r)===!1?(a=new Lv(n),e.set(r,[a])):s>=e.get(r).length?(a=new Lv(n),e.get(r).push(a)):a=e.get(r)[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}function ZN(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new C,color:new Ae};break;case"SpotLight":t={position:new C,direction:new C,color:new Ae,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new C,color:new Ae,distance:0,decay:0};break;case"HemisphereLight":t={direction:new C,skyColor:new Ae,groundColor:new Ae};break;case"RectAreaLight":t={color:new Ae,position:new C,halfWidth:new C,halfHeight:new C};break}return n[e.id]=t,t}}}function JN(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ye,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let QN=0;function eD(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function tD(n,e){const t=new ZN,i=JN(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new C);const s=new C,a=new Ce,o=new Ce;function l(u,f){let h=0,d=0,g=0;for(let K=0;K<9;K++)r.probe[K].set(0,0,0);let v=0,y=0,p=0,m=0,_=0,w=0,E=0,A=0;u.sort(eD);const b=f!==!0?Math.PI:1;for(let K=0,H=u.length;K<H;K++){const R=u[K],J=R.color,P=R.intensity,z=R.distance,G=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)h+=J.r*P*b,d+=J.g*P*b,g+=J.b*P*b;else if(R.isLightProbe)for(let W=0;W<9;W++)r.probe[W].addScaledVector(R.sh.coefficients[W],P);else if(R.isDirectionalLight){const W=t.get(R);if(W.color.copy(R.color).multiplyScalar(R.intensity*b),R.castShadow){const V=R.shadow,Y=i.get(R);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,r.directionalShadow[v]=Y,r.directionalShadowMap[v]=G,r.directionalShadowMatrix[v]=R.shadow.matrix,w++}r.directional[v]=W,v++}else if(R.isSpotLight){const W=t.get(R);if(W.position.setFromMatrixPosition(R.matrixWorld),W.color.copy(J).multiplyScalar(P*b),W.distance=z,W.coneCos=Math.cos(R.angle),W.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),W.decay=R.decay,R.castShadow){const V=R.shadow,Y=i.get(R);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,r.spotShadow[p]=Y,r.spotShadowMap[p]=G,r.spotShadowMatrix[p]=R.shadow.matrix,A++}r.spot[p]=W,p++}else if(R.isRectAreaLight){const W=t.get(R);W.color.copy(J).multiplyScalar(P),W.halfWidth.set(R.width*.5,0,0),W.halfHeight.set(0,R.height*.5,0),r.rectArea[m]=W,m++}else if(R.isPointLight){const W=t.get(R);if(W.color.copy(R.color).multiplyScalar(R.intensity*b),W.distance=R.distance,W.decay=R.decay,R.castShadow){const V=R.shadow,Y=i.get(R);Y.shadowBias=V.bias,Y.shadowNormalBias=V.normalBias,Y.shadowRadius=V.radius,Y.shadowMapSize=V.mapSize,Y.shadowCameraNear=V.camera.near,Y.shadowCameraFar=V.camera.far,r.pointShadow[y]=Y,r.pointShadowMap[y]=G,r.pointShadowMatrix[y]=R.shadow.matrix,E++}r.point[y]=W,y++}else if(R.isHemisphereLight){const W=t.get(R);W.skyColor.copy(R.color).multiplyScalar(P*b),W.groundColor.copy(R.groundColor).multiplyScalar(P*b),r.hemi[_]=W,_++}}m>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Se.LTC_FLOAT_1,r.rectAreaLTC2=Se.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Se.LTC_HALF_1,r.rectAreaLTC2=Se.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=g;const N=r.hash;(N.directionalLength!==v||N.pointLength!==y||N.spotLength!==p||N.rectAreaLength!==m||N.hemiLength!==_||N.numDirectionalShadows!==w||N.numPointShadows!==E||N.numSpotShadows!==A)&&(r.directional.length=v,r.spot.length=p,r.rectArea.length=m,r.point.length=y,r.hemi.length=_,r.directionalShadow.length=w,r.directionalShadowMap.length=w,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=w,r.pointShadowMatrix.length=E,r.spotShadowMatrix.length=A,N.directionalLength=v,N.pointLength=y,N.spotLength=p,N.rectAreaLength=m,N.hemiLength=_,N.numDirectionalShadows=w,N.numPointShadows=E,N.numSpotShadows=A,r.version=QN++)}function c(u,f){let h=0,d=0,g=0,v=0,y=0;const p=f.matrixWorldInverse;for(let m=0,_=u.length;m<_;m++){const w=u[m];if(w.isDirectionalLight){const E=r.directional[h];E.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(p),h++}else if(w.isSpotLight){const E=r.spot[g];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(p),E.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(p),g++}else if(w.isRectAreaLight){const E=r.rectArea[v];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(p),o.identity(),a.copy(w.matrixWorld),a.premultiply(p),o.extractRotation(a),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){const E=r.point[d];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(p),d++}else if(w.isHemisphereLight){const E=r.hemi[y];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(p),E.direction.normalize(),y++}}}return{setup:l,setupView:c,state:r}}function Cv(n,e){const t=new tD(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(f){i.push(f)}function o(f){r.push(f)}function l(f){t.setup(i,f)}function c(f){t.setupView(i,f)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:a,pushShadow:o}}function nD(n,e){let t=new WeakMap;function i(s,a=0){let o;return t.has(s)===!1?(o=new Cv(n,e),t.set(s,[o])):a>=t.get(s).length?(o=new Cv(n,e),t.get(s).push(o)):o=t.get(s)[a],o}function r(){t=new WeakMap}return{get:i,dispose:r}}class Kx extends Dt{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=h2,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}Kx.prototype.isMeshDepthMaterial=!0;class Zx extends Dt{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new C,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}Zx.prototype.isMeshDistanceMaterial=!0;const iD=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,rD=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Jx(n,e,t){let i=new Fu;const r=new ye,s=new ye,a=new st,o=new Kx({depthPacking:d2}),l=new Zx,c={},u=t.maxTextureSize,f={0:Ct,1:aa,2:Qr},h=new es({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ye},radius:{value:4}},vertexShader:iD,fragmentShader:rD}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const g=new mt;g.setAttribute("position",new Et(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new tn(g,h),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=xx,this.render=function(w,E,A){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||w.length===0)return;const b=n.getRenderTarget(),N=n.getActiveCubeFace(),K=n.getActiveMipmapLevel(),H=n.state;H.setBlending(ir),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);for(let R=0,J=w.length;R<J;R++){const P=w[R],z=P.shadow;if(z===void 0){console.warn("THREE.WebGLShadowMap:",P,"has no shadow.");continue}if(z.autoUpdate===!1&&z.needsUpdate===!1)continue;r.copy(z.mapSize);const G=z.getFrameExtents();if(r.multiply(G),s.copy(z.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/G.x),r.x=s.x*G.x,z.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/G.y),r.y=s.y*G.y,z.mapSize.y=s.y)),z.map===null&&!z.isPointLightShadow&&this.type===Ya){const V={minFilter:un,magFilter:un,format:Kt};z.map=new Yn(r.x,r.y,V),z.map.texture.name=P.name+".shadowMap",z.mapPass=new Yn(r.x,r.y,V),z.camera.updateProjectionMatrix()}if(z.map===null){const V={minFilter:It,magFilter:It,format:Kt};z.map=new Yn(r.x,r.y,V),z.map.texture.name=P.name+".shadowMap",z.camera.updateProjectionMatrix()}n.setRenderTarget(z.map),n.clear();const W=z.getViewportCount();for(let V=0;V<W;V++){const Y=z.getViewport(V);a.set(s.x*Y.x,s.y*Y.y,s.x*Y.z,s.y*Y.w),H.viewport(a),z.updateMatrices(P,V),i=z.getFrustum(),_(E,A,z.camera,P,this.type)}!z.isPointLightShadow&&this.type===Ya&&p(z,A),z.needsUpdate=!1}y.needsUpdate=!1,n.setRenderTarget(b,N,K)};function p(w,E){const A=e.update(v);h.defines.VSM_SAMPLES!==w.blurSamples&&(h.defines.VSM_SAMPLES=w.blurSamples,d.defines.VSM_SAMPLES=w.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),h.uniforms.shadow_pass.value=w.map.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(E,null,A,h,v,null),d.uniforms.shadow_pass.value=w.mapPass.texture,d.uniforms.resolution.value=w.mapSize,d.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(E,null,A,d,v,null)}function m(w,E,A,b,N,K,H){let R=null;const J=b.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(J!==void 0?R=J:R=b.isPointLight===!0?l:o,n.localClippingEnabled&&A.clipShadows===!0&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0){const P=R.uuid,z=A.uuid;let G=c[P];G===void 0&&(G={},c[P]=G);let W=G[z];W===void 0&&(W=R.clone(),G[z]=W),R=W}return R.visible=A.visible,R.wireframe=A.wireframe,H===Ya?R.side=A.shadowSide!==null?A.shadowSide:A.side:R.side=A.shadowSide!==null?A.shadowSide:f[A.side],R.alphaMap=A.alphaMap,R.alphaTest=A.alphaTest,R.clipShadows=A.clipShadows,R.clippingPlanes=A.clippingPlanes,R.clipIntersection=A.clipIntersection,R.displacementMap=A.displacementMap,R.displacementScale=A.displacementScale,R.displacementBias=A.displacementBias,R.wireframeLinewidth=A.wireframeLinewidth,R.linewidth=A.linewidth,b.isPointLight===!0&&R.isMeshDistanceMaterial===!0&&(R.referencePosition.setFromMatrixPosition(b.matrixWorld),R.nearDistance=N,R.farDistance=K),R}function _(w,E,A,b,N){if(w.visible===!1)return;if(w.layers.test(E.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&N===Ya)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,w.matrixWorld);const R=e.update(w),J=w.material;if(Array.isArray(J)){const P=R.groups;for(let z=0,G=P.length;z<G;z++){const W=P[z],V=J[W.materialIndex];if(V&&V.visible){const Y=m(w,R,V,b,A.near,A.far,N);n.renderBufferDirect(A,null,R,Y,w,W)}}}else if(J.visible){const P=m(w,R,J,b,A.near,A.far,N);n.renderBufferDirect(A,null,R,P,w,null)}}const H=w.children;for(let R=0,J=H.length;R<J;R++)_(H[R],E,A,b,N)}}function sD(n,e,t){const i=t.isWebGL2;function r(){let D=!1;const ve=new st;let re=null;const be=new st(0,0,0,0);return{setMask:function(I){re!==I&&!D&&(n.colorMask(I,I,I,I),re=I)},setLocked:function(I){D=I},setClear:function(I,xe,Ve,He,yt){yt===!0&&(I*=He,xe*=He,Ve*=He),ve.set(I,xe,Ve,He),be.equals(ve)===!1&&(n.clearColor(I,xe,Ve,He),be.copy(ve))},reset:function(){D=!1,re=null,be.set(-1,0,0,0)}}}function s(){let D=!1,ve=null,re=null,be=null;return{setTest:function(I){I?he(2929):Ee(2929)},setMask:function(I){ve!==I&&!D&&(n.depthMask(I),ve=I)},setFunc:function(I){if(re!==I){if(I)switch(I){case eC:n.depthFunc(512);break;case tC:n.depthFunc(519);break;case nC:n.depthFunc(513);break;case Uh:n.depthFunc(515);break;case iC:n.depthFunc(514);break;case rC:n.depthFunc(518);break;case sC:n.depthFunc(516);break;case aC:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);re=I}},setLocked:function(I){D=I},setClear:function(I){be!==I&&(n.clearDepth(I),be=I)},reset:function(){D=!1,ve=null,re=null,be=null}}}function a(){let D=!1,ve=null,re=null,be=null,I=null,xe=null,Ve=null,He=null,yt=null;return{setTest:function(Ue){D||(Ue?he(2960):Ee(2960))},setMask:function(Ue){ve!==Ue&&!D&&(n.stencilMask(Ue),ve=Ue)},setFunc:function(Ue,ct,Ht){(re!==Ue||be!==ct||I!==Ht)&&(n.stencilFunc(Ue,ct,Ht),re=Ue,be=ct,I=Ht)},setOp:function(Ue,ct,Ht){(xe!==Ue||Ve!==ct||He!==Ht)&&(n.stencilOp(Ue,ct,Ht),xe=Ue,Ve=ct,He=Ht)},setLocked:function(Ue){D=Ue},setClear:function(Ue){yt!==Ue&&(n.clearStencil(Ue),yt=Ue)},reset:function(){D=!1,ve=null,re=null,be=null,I=null,xe=null,Ve=null,He=null,yt=null}}}const o=new r,l=new s,c=new a;let u={},f=null,h={},d=null,g=!1,v=null,y=null,p=null,m=null,_=null,w=null,E=null,A=!1,b=null,N=null,K=null,H=null,R=null;const J=n.getParameter(35661);let P=!1,z=0;const G=n.getParameter(7938);G.indexOf("WebGL")!==-1?(z=parseFloat(/^WebGL (\d)/.exec(G)[1]),P=z>=1):G.indexOf("OpenGL ES")!==-1&&(z=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),P=z>=2);let W=null,V={};const Y=n.getParameter(3088),oe=n.getParameter(2978),te=new st().fromArray(Y),ie=new st().fromArray(oe);function _e(D,ve,re){const be=new Uint8Array(4),I=n.createTexture();n.bindTexture(D,I),n.texParameteri(D,10241,9728),n.texParameteri(D,10240,9728);for(let xe=0;xe<re;xe++)n.texImage2D(ve+xe,0,6408,1,1,0,6408,5121,be);return I}const le={};le[3553]=_e(3553,3553,1),le[34067]=_e(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),he(2929),l.setFunc(Uh),x(!1),T(Dg),he(2884),we(ir);function he(D){u[D]!==!0&&(n.enable(D),u[D]=!0)}function Ee(D){u[D]!==!1&&(n.disable(D),u[D]=!1)}function F(D){D!==f&&(n.bindFramebuffer(36160,D),f=D)}function U(D,ve){return ve===null&&f!==null&&(ve=f),h[D]!==ve?(n.bindFramebuffer(D,ve),h[D]=ve,i&&(D===36009&&(h[36160]=ve),D===36160&&(h[36009]=ve)),!0):!1}function ae(D){return d!==D?(n.useProgram(D),d=D,!0):!1}const X={[Ns]:32774,[GL]:32778,[WL]:32779};if(i)X[Ug]=32775,X[Bg]=32776;else{const D=e.get("EXT_blend_minmax");D!==null&&(X[Ug]=D.MIN_EXT,X[Bg]=D.MAX_EXT)}const ne={[jL]:0,[$L]:1,[qL]:768,[wx]:770,[QL]:776,[ZL]:774,[YL]:772,[XL]:769,[Mx]:771,[JL]:775,[KL]:773};function we(D,ve,re,be,I,xe,Ve,He){if(D===ir){g===!0&&(Ee(3042),g=!1);return}if(g===!1&&(he(3042),g=!0),D!==VL){if(D!==v||He!==A){if((y!==Ns||_!==Ns)&&(n.blendEquation(32774),y=Ns,_=Ns),He)switch(D){case uo:n.blendFuncSeparate(1,771,1,771);break;case Og:n.blendFunc(1,1);break;case Fg:n.blendFuncSeparate(0,0,769,771);break;case kg:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",D);break}else switch(D){case uo:n.blendFuncSeparate(770,771,1,771);break;case Og:n.blendFunc(770,1);break;case Fg:n.blendFunc(0,769);break;case kg:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",D);break}p=null,m=null,w=null,E=null,v=D,A=He}return}I=I||ve,xe=xe||re,Ve=Ve||be,(ve!==y||I!==_)&&(n.blendEquationSeparate(X[ve],X[I]),y=ve,_=I),(re!==p||be!==m||xe!==w||Ve!==E)&&(n.blendFuncSeparate(ne[re],ne[be],ne[xe],ne[Ve]),p=re,m=be,w=xe,E=Ve),v=D,A=null}function Q(D,ve){D.side===Qr?Ee(2884):he(2884);let re=D.side===Ct;ve&&(re=!re),x(re),D.blending===uo&&D.transparent===!1?we(ir):we(D.blending,D.blendEquation,D.blendSrc,D.blendDst,D.blendEquationAlpha,D.blendSrcAlpha,D.blendDstAlpha,D.premultipliedAlpha),l.setFunc(D.depthFunc),l.setTest(D.depthTest),l.setMask(D.depthWrite),o.setMask(D.colorWrite);const be=D.stencilWrite;c.setTest(be),be&&(c.setMask(D.stencilWriteMask),c.setFunc(D.stencilFunc,D.stencilRef,D.stencilFuncMask),c.setOp(D.stencilFail,D.stencilZFail,D.stencilZPass)),B(D.polygonOffset,D.polygonOffsetFactor,D.polygonOffsetUnits),D.alphaToCoverage===!0?he(32926):Ee(32926)}function x(D){b!==D&&(D?n.frontFace(2304):n.frontFace(2305),b=D)}function T(D){D!==BL?(he(2884),D!==N&&(D===Dg?n.cullFace(1029):D===zL?n.cullFace(1028):n.cullFace(1032))):Ee(2884),N=D}function O(D){D!==K&&(P&&n.lineWidth(D),K=D)}function B(D,ve,re){D?(he(32823),(H!==ve||R!==re)&&(n.polygonOffset(ve,re),H=ve,R=re)):Ee(32823)}function M(D){D?he(3089):Ee(3089)}function S(D){D===void 0&&(D=33984+J-1),W!==D&&(n.activeTexture(D),W=D)}function k(D,ve){W===null&&S();let re=V[W];re===void 0&&(re={type:void 0,texture:void 0},V[W]=re),(re.type!==D||re.texture!==ve)&&(n.bindTexture(D,ve||le[D]),re.type=D,re.texture=ve)}function j(){const D=V[W];D!==void 0&&D.type!==void 0&&(n.bindTexture(D.type,null),D.type=void 0,D.texture=void 0)}function $(){try{n.compressedTexImage2D.apply(n,arguments)}catch(D){console.error("THREE.WebGLState:",D)}}function q(){try{n.texImage2D.apply(n,arguments)}catch(D){console.error("THREE.WebGLState:",D)}}function ue(){try{n.texImage3D.apply(n,arguments)}catch(D){console.error("THREE.WebGLState:",D)}}function de(D){te.equals(D)===!1&&(n.scissor(D.x,D.y,D.z,D.w),te.copy(D))}function ge(D){ie.equals(D)===!1&&(n.viewport(D.x,D.y,D.z,D.w),ie.copy(D))}function me(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},W=null,V={},f=null,h={},d=null,g=!1,v=null,y=null,p=null,m=null,_=null,w=null,E=null,A=!1,b=null,N=null,K=null,H=null,R=null,te.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:he,disable:Ee,bindFramebuffer:U,bindXRFramebuffer:F,useProgram:ae,setBlending:we,setMaterial:Q,setFlipSided:x,setCullFace:T,setLineWidth:O,setPolygonOffset:B,setScissorTest:M,activeTexture:S,bindTexture:k,unbindTexture:j,compressedTexImage2D:$,texImage2D:q,texImage3D:ue,scissor:de,viewport:ge,reset:me}}function aD(n,e,t,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,f=r.maxSamples,h=new WeakMap;let d,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(M,S){return g?new OffscreenCanvas(M,S):Du("canvas")}function y(M,S,k,j){let $=1;if((M.width>j||M.height>j)&&($=j/Math.max(M.width,M.height)),$<1||S===!0)if(typeof HTMLImageElement<"u"&&M instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&M instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&M instanceof ImageBitmap){const q=S?Ix:Math.floor,ue=q($*M.width),de=q($*M.height);d===void 0&&(d=v(ue,de));const ge=k?v(ue,de):d;return ge.width=ue,ge.height=de,ge.getContext("2d").drawImage(M,0,0,ue,de),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+M.width+"x"+M.height+") to ("+ue+"x"+de+")."),ge}else return"data"in M&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+M.width+"x"+M.height+")."),M;return M}function p(M){return Gh(M.width)&&Gh(M.height)}function m(M){return o?!1:M.wrapS!==ln||M.wrapT!==ln||M.minFilter!==It&&M.minFilter!==un}function _(M,S){return M.generateMipmaps&&S&&M.minFilter!==It&&M.minFilter!==un}function w(M,S,k,j,$=1){n.generateMipmap(M);const q=i.get(S);q.__maxMipLevel=Math.log2(Math.max(k,j,$))}function E(M,S,k,j){if(o===!1)return S;if(M!==null){if(n[M]!==void 0)return n[M];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+M+"'")}let $=S;return S===6403&&(k===5126&&($=33326),k===5131&&($=33325),k===5121&&($=33321)),S===6407&&(k===5126&&($=34837),k===5131&&($=34843),k===5121&&($=32849)),S===6408&&(k===5126&&($=34836),k===5131&&($=34842),k===5121&&($=j===Qn?35907:32856)),($===33325||$===33326||$===34842||$===34836)&&e.get("EXT_color_buffer_float"),$}function A(M){return M===It||M===Hh||M===Vh?9728:9729}function b(M){const S=M.target;S.removeEventListener("dispose",b),K(S),S.isVideoTexture&&h.delete(S),a.memory.textures--}function N(M){const S=M.target;S.removeEventListener("dispose",N),H(S)}function K(M){const S=i.get(M);S.__webglInit!==void 0&&(n.deleteTexture(S.__webglTexture),i.remove(M))}function H(M){const S=M.texture,k=i.get(M),j=i.get(S);if(M){if(j.__webglTexture!==void 0&&(n.deleteTexture(j.__webglTexture),a.memory.textures--),M.depthTexture&&M.depthTexture.dispose(),M.isWebGLCubeRenderTarget)for(let $=0;$<6;$++)n.deleteFramebuffer(k.__webglFramebuffer[$]),k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer[$]);else n.deleteFramebuffer(k.__webglFramebuffer),k.__webglDepthbuffer&&n.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&n.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer&&n.deleteRenderbuffer(k.__webglColorRenderbuffer),k.__webglDepthRenderbuffer&&n.deleteRenderbuffer(k.__webglDepthRenderbuffer);if(M.isWebGLMultipleRenderTargets)for(let $=0,q=S.length;$<q;$++){const ue=i.get(S[$]);ue.__webglTexture&&(n.deleteTexture(ue.__webglTexture),a.memory.textures--),i.remove(S[$])}i.remove(S),i.remove(M)}}let R=0;function J(){R=0}function P(){const M=R;return M>=l&&console.warn("THREE.WebGLTextures: Trying to use "+M+" texture units while this GPU supports only "+l),R+=1,M}function z(M,S){const k=i.get(M);if(M.isVideoTexture&&Q(M),M.version>0&&k.__version!==M.version){const j=M.image;if(j===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(j.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_e(k,M,S);return}}t.activeTexture(33984+S),t.bindTexture(3553,k.__webglTexture)}function G(M,S){const k=i.get(M);if(M.version>0&&k.__version!==M.version){_e(k,M,S);return}t.activeTexture(33984+S),t.bindTexture(35866,k.__webglTexture)}function W(M,S){const k=i.get(M);if(M.version>0&&k.__version!==M.version){_e(k,M,S);return}t.activeTexture(33984+S),t.bindTexture(32879,k.__webglTexture)}function V(M,S){const k=i.get(M);if(M.version>0&&k.__version!==M.version){le(k,M,S);return}t.activeTexture(33984+S),t.bindTexture(34067,k.__webglTexture)}const Y={[oa]:10497,[ln]:33071,[jc]:33648},oe={[It]:9728,[Hh]:9984,[Vh]:9986,[un]:9729,[Ex]:9985,[_a]:9987};function te(M,S,k){if(k?(n.texParameteri(M,10242,Y[S.wrapS]),n.texParameteri(M,10243,Y[S.wrapT]),(M===32879||M===35866)&&n.texParameteri(M,32882,Y[S.wrapR]),n.texParameteri(M,10240,oe[S.magFilter]),n.texParameteri(M,10241,oe[S.minFilter])):(n.texParameteri(M,10242,33071),n.texParameteri(M,10243,33071),(M===32879||M===35866)&&n.texParameteri(M,32882,33071),(S.wrapS!==ln||S.wrapT!==ln)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(M,10240,A(S.magFilter)),n.texParameteri(M,10241,A(S.minFilter)),S.minFilter!==It&&S.minFilter!==un&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const j=e.get("EXT_texture_filter_anisotropic");if(S.type===vi&&e.has("OES_texture_float_linear")===!1||o===!1&&S.type===$s&&e.has("OES_texture_half_float_linear")===!1)return;(S.anisotropy>1||i.get(S).__currentAnisotropy)&&(n.texParameterf(M,j.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(S.anisotropy,r.getMaxAnisotropy())),i.get(S).__currentAnisotropy=S.anisotropy)}}function ie(M,S){M.__webglInit===void 0&&(M.__webglInit=!0,S.addEventListener("dispose",b),M.__webglTexture=n.createTexture(),a.memory.textures++)}function _e(M,S,k){let j=3553;S.isDataTexture2DArray&&(j=35866),S.isDataTexture3D&&(j=32879),ie(M,S),t.activeTexture(33984+k),t.bindTexture(j,M.__webglTexture),n.pixelStorei(37440,S.flipY),n.pixelStorei(37441,S.premultiplyAlpha),n.pixelStorei(3317,S.unpackAlignment),n.pixelStorei(37443,0);const $=m(S)&&p(S.image)===!1,q=y(S.image,$,!1,u),ue=p(q)||o,de=s.convert(S.format);let ge=s.convert(S.type),me=E(S.internalFormat,de,ge,S.encoding);te(j,S,ue);let D;const ve=S.mipmaps;if(S.isDepthTexture)me=6402,o?S.type===vi?me=36012:S.type===Tc?me=33190:S.type===fo?me=35056:me=33189:S.type===vi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),S.format===qs&&me===6402&&S.type!==$c&&S.type!==Tc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),S.type=$c,ge=s.convert(S.type)),S.format===Uo&&me===6402&&(me=34041,S.type!==fo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),S.type=fo,ge=s.convert(S.type))),t.texImage2D(3553,0,me,q.width,q.height,0,de,ge,null);else if(S.isDataTexture)if(ve.length>0&&ue){for(let re=0,be=ve.length;re<be;re++)D=ve[re],t.texImage2D(3553,re,me,D.width,D.height,0,de,ge,D.data);S.generateMipmaps=!1,M.__maxMipLevel=ve.length-1}else t.texImage2D(3553,0,me,q.width,q.height,0,de,ge,q.data),M.__maxMipLevel=0;else if(S.isCompressedTexture){for(let re=0,be=ve.length;re<be;re++)D=ve[re],S.format!==Kt&&S.format!==Xr?de!==null?t.compressedTexImage2D(3553,re,me,D.width,D.height,0,D.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,re,me,D.width,D.height,0,de,ge,D.data);M.__maxMipLevel=ve.length-1}else if(S.isDataTexture2DArray)t.texImage3D(35866,0,me,q.width,q.height,q.depth,0,de,ge,q.data),M.__maxMipLevel=0;else if(S.isDataTexture3D)t.texImage3D(32879,0,me,q.width,q.height,q.depth,0,de,ge,q.data),M.__maxMipLevel=0;else if(ve.length>0&&ue){for(let re=0,be=ve.length;re<be;re++)D=ve[re],t.texImage2D(3553,re,me,de,ge,D);S.generateMipmaps=!1,M.__maxMipLevel=ve.length-1}else t.texImage2D(3553,0,me,de,ge,q),M.__maxMipLevel=0;_(S,ue)&&w(j,S,q.width,q.height),M.__version=S.version,S.onUpdate&&S.onUpdate(S)}function le(M,S,k){if(S.image.length!==6)return;ie(M,S),t.activeTexture(33984+k),t.bindTexture(34067,M.__webglTexture),n.pixelStorei(37440,S.flipY),n.pixelStorei(37441,S.premultiplyAlpha),n.pixelStorei(3317,S.unpackAlignment),n.pixelStorei(37443,0);const j=S&&(S.isCompressedTexture||S.image[0].isCompressedTexture),$=S.image[0]&&S.image[0].isDataTexture,q=[];for(let re=0;re<6;re++)!j&&!$?q[re]=y(S.image[re],!1,!0,c):q[re]=$?S.image[re].image:S.image[re];const ue=q[0],de=p(ue)||o,ge=s.convert(S.format),me=s.convert(S.type),D=E(S.internalFormat,ge,me,S.encoding);te(34067,S,de);let ve;if(j){for(let re=0;re<6;re++){ve=q[re].mipmaps;for(let be=0;be<ve.length;be++){const I=ve[be];S.format!==Kt&&S.format!==Xr?ge!==null?t.compressedTexImage2D(34069+re,be,D,I.width,I.height,0,I.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+re,be,D,I.width,I.height,0,ge,me,I.data)}}M.__maxMipLevel=ve.length-1}else{ve=S.mipmaps;for(let re=0;re<6;re++)if($){t.texImage2D(34069+re,0,D,q[re].width,q[re].height,0,ge,me,q[re].data);for(let be=0;be<ve.length;be++){const xe=ve[be].image[re].image;t.texImage2D(34069+re,be+1,D,xe.width,xe.height,0,ge,me,xe.data)}}else{t.texImage2D(34069+re,0,D,ge,me,q[re]);for(let be=0;be<ve.length;be++){const I=ve[be];t.texImage2D(34069+re,be+1,D,ge,me,I.image[re])}}M.__maxMipLevel=ve.length}_(S,de)&&w(34067,S,ue.width,ue.height),M.__version=S.version,S.onUpdate&&S.onUpdate(S)}function he(M,S,k,j,$){const q=s.convert(k.format),ue=s.convert(k.type),de=E(k.internalFormat,q,ue,k.encoding);$===32879||$===35866?t.texImage3D($,0,de,S.width,S.height,S.depth,0,q,ue,null):t.texImage2D($,0,de,S.width,S.height,0,q,ue,null),t.bindFramebuffer(36160,M),n.framebufferTexture2D(36160,j,$,i.get(k).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ee(M,S,k){if(n.bindRenderbuffer(36161,M),S.depthBuffer&&!S.stencilBuffer){let j=33189;if(k){const $=S.depthTexture;$&&$.isDepthTexture&&($.type===vi?j=36012:$.type===Tc&&(j=33190));const q=we(S);n.renderbufferStorageMultisample(36161,q,j,S.width,S.height)}else n.renderbufferStorage(36161,j,S.width,S.height);n.framebufferRenderbuffer(36160,36096,36161,M)}else if(S.depthBuffer&&S.stencilBuffer){if(k){const j=we(S);n.renderbufferStorageMultisample(36161,j,35056,S.width,S.height)}else n.renderbufferStorage(36161,34041,S.width,S.height);n.framebufferRenderbuffer(36160,33306,36161,M)}else{const j=S.isWebGLMultipleRenderTargets===!0?S.texture[0]:S.texture,$=s.convert(j.format),q=s.convert(j.type),ue=E(j.internalFormat,$,q,j.encoding);if(k){const de=we(S);n.renderbufferStorageMultisample(36161,de,ue,S.width,S.height)}else n.renderbufferStorage(36161,ue,S.width,S.height)}n.bindRenderbuffer(36161,null)}function F(M,S){if(S&&S.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,M),!(S.depthTexture&&S.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(S.depthTexture).__webglTexture||S.depthTexture.image.width!==S.width||S.depthTexture.image.height!==S.height)&&(S.depthTexture.image.width=S.width,S.depthTexture.image.height=S.height,S.depthTexture.needsUpdate=!0),z(S.depthTexture,0);const j=i.get(S.depthTexture).__webglTexture;if(S.depthTexture.format===qs)n.framebufferTexture2D(36160,36096,3553,j,0);else if(S.depthTexture.format===Uo)n.framebufferTexture2D(36160,33306,3553,j,0);else throw new Error("Unknown depthTexture format")}function U(M){const S=i.get(M),k=M.isWebGLCubeRenderTarget===!0;if(M.depthTexture){if(k)throw new Error("target.depthTexture not supported in Cube render targets");F(S.__webglFramebuffer,M)}else if(k){S.__webglDepthbuffer=[];for(let j=0;j<6;j++)t.bindFramebuffer(36160,S.__webglFramebuffer[j]),S.__webglDepthbuffer[j]=n.createRenderbuffer(),Ee(S.__webglDepthbuffer[j],M,!1)}else t.bindFramebuffer(36160,S.__webglFramebuffer),S.__webglDepthbuffer=n.createRenderbuffer(),Ee(S.__webglDepthbuffer,M,!1);t.bindFramebuffer(36160,null)}function ae(M){const S=M.texture,k=i.get(M),j=i.get(S);M.addEventListener("dispose",N),M.isWebGLMultipleRenderTargets!==!0&&(j.__webglTexture=n.createTexture(),j.__version=S.version,a.memory.textures++);const $=M.isWebGLCubeRenderTarget===!0,q=M.isWebGLMultipleRenderTargets===!0,ue=M.isWebGLMultisampleRenderTarget===!0,de=S.isDataTexture3D||S.isDataTexture2DArray,ge=p(M)||o;if(o&&S.format===Xr&&(S.type===vi||S.type===$s)&&(S.format=Kt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),$){k.__webglFramebuffer=[];for(let me=0;me<6;me++)k.__webglFramebuffer[me]=n.createFramebuffer()}else if(k.__webglFramebuffer=n.createFramebuffer(),q)if(r.drawBuffers){const me=M.texture;for(let D=0,ve=me.length;D<ve;D++){const re=i.get(me[D]);re.__webglTexture===void 0&&(re.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(ue)if(o){k.__webglMultisampledFramebuffer=n.createFramebuffer(),k.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,k.__webglColorRenderbuffer);const me=s.convert(S.format),D=s.convert(S.type),ve=E(S.internalFormat,me,D,S.encoding),re=we(M);n.renderbufferStorageMultisample(36161,re,ve,M.width,M.height),t.bindFramebuffer(36160,k.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,k.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),M.depthBuffer&&(k.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(k.__webglDepthRenderbuffer,M,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if($){t.bindTexture(34067,j.__webglTexture),te(34067,S,ge);for(let me=0;me<6;me++)he(k.__webglFramebuffer[me],M,S,36064,34069+me);_(S,ge)&&w(34067,S,M.width,M.height),t.unbindTexture()}else if(q){const me=M.texture;for(let D=0,ve=me.length;D<ve;D++){const re=me[D],be=i.get(re);t.bindTexture(3553,be.__webglTexture),te(3553,re,ge),he(k.__webglFramebuffer,M,re,36064+D,3553),_(re,ge)&&w(3553,re,M.width,M.height)}t.unbindTexture()}else{let me=3553;de&&(o?me=S.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),t.bindTexture(me,j.__webglTexture),te(me,S,ge),he(k.__webglFramebuffer,M,S,36064,me),_(S,ge)&&w(me,S,M.width,M.height,M.depth),t.unbindTexture()}M.depthBuffer&&U(M)}function X(M){const S=p(M)||o,k=M.isWebGLMultipleRenderTargets===!0?M.texture:[M.texture];for(let j=0,$=k.length;j<$;j++){const q=k[j];if(_(q,S)){const ue=M.isWebGLCubeRenderTarget?34067:3553,de=i.get(q).__webglTexture;t.bindTexture(ue,de),w(ue,q,M.width,M.height),t.unbindTexture()}}}function ne(M){if(M.isWebGLMultisampleRenderTarget)if(o){const S=M.width,k=M.height;let j=16384;M.depthBuffer&&(j|=256),M.stencilBuffer&&(j|=1024);const $=i.get(M);t.bindFramebuffer(36008,$.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,$.__webglFramebuffer),n.blitFramebuffer(0,0,S,k,0,0,S,k,j,9728),t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,$.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function we(M){return o&&M.isWebGLMultisampleRenderTarget?Math.min(f,M.samples):0}function Q(M){const S=a.render.frame;h.get(M)!==S&&(h.set(M,S),M.update())}let x=!1,T=!1;function O(M,S){M&&M.isWebGLRenderTarget&&(x===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),x=!0),M=M.texture),z(M,S)}function B(M,S){M&&M.isWebGLCubeRenderTarget&&(T===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),T=!0),M=M.texture),V(M,S)}this.allocateTextureUnit=P,this.resetTextureUnits=J,this.setTexture2D=z,this.setTexture2DArray=G,this.setTexture3D=W,this.setTextureCube=V,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=X,this.updateMultisampleRenderTarget=ne,this.safeSetTexture2D=O,this.safeSetTextureCube=B}function oD(n,e,t){const i=t.isWebGL2;function r(s){let a;if(s===mr)return 5121;if(s===vC)return 32819;if(s===yC)return 32820;if(s===_C)return 33635;if(s===pC)return 5120;if(s===mC)return 5122;if(s===$c)return 5123;if(s===gC)return 5124;if(s===Tc)return 5125;if(s===vi)return 5126;if(s===$s)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===xC)return 6406;if(s===Xr)return 6407;if(s===Kt)return 6408;if(s===bC)return 6409;if(s===wC)return 6410;if(s===qs)return 6402;if(s===Uo)return 34041;if(s===SC)return 6403;if(s===EC)return 36244;if(s===TC)return 33319;if(s===AC)return 33320;if(s===RC)return 36248;if(s===LC)return 36249;if(s===zg||s===Hg||s===Vg||s===Gg)if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===zg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Hg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Vg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Gg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Wg||s===jg||s===$g||s===qg)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Wg)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===jg)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$g)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===qg)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===CC)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===Xg||s===Yg)&&(a=e.get("WEBGL_compressed_texture_etc"),a!==null)){if(s===Xg)return a.COMPRESSED_RGB8_ETC2;if(s===Yg)return a.COMPRESSED_RGBA8_ETC2_EAC}if(s===PC||s===IC||s===NC||s===DC||s===OC||s===FC||s===kC||s===UC||s===BC||s===zC||s===HC||s===VC||s===GC||s===WC||s===$C||s===qC||s===XC||s===YC||s===KC||s===ZC||s===JC||s===QC||s===e2||s===t2||s===n2||s===i2||s===r2||s===s2)return a=e.get("WEBGL_compressed_texture_astc"),a!==null?s:null;if(s===jC)return a=e.get("EXT_texture_compression_bptc"),a!==null?s:null;if(s===fo)return i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}class Qx extends qt{constructor(e=[]){super(),this.cameras=e}}Qx.prototype.isArrayCamera=!0;class er extends tt{constructor(){super(),this.type="Group"}}er.prototype.isGroup=!0;const lD={type:"move"};class Gf{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new er,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new er,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new C,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new C),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new er,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new C,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new C),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(o!==null&&(r=t.getPose(e.targetRaySpace,i),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(lD))),c&&e.hand){a=!0;for(const v of e.hand.values()){const y=t.getJointPose(v,i);if(c.joints[v.jointName]===void 0){const m=new er;m.matrixAutoUpdate=!1,m.visible=!1,c.joints[v.jointName]=m,c.add(m)}const p=c.joints[v.jointName];y!==null&&(p.matrix.fromArray(y.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=y.radius),p.visible=y!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],h=u.position.distanceTo(f.position),d=.02,g=.005;c.inputState.pinching&&h>d+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=d-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),this}}class cD extends Sr{constructor(e,t){super();const i=this,r=e.state;let s=null,a=1,o=null,l="local-floor",c=null,u=null,f=null,h=null,d=null,g=!1,v=null,y=null,p=null,m=null,_=null,w=null;const E=[],A=new Map,b=new qt;b.layers.enable(1),b.viewport=new st;const N=new qt;N.layers.enable(2),N.viewport=new st;const K=[b,N],H=new Qx;H.layers.enable(1),H.layers.enable(2);let R=null,J=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let he=E[le];return he===void 0&&(he=new Gf,E[le]=he),he.getTargetRaySpace()},this.getControllerGrip=function(le){let he=E[le];return he===void 0&&(he=new Gf,E[le]=he),he.getGripSpace()},this.getHand=function(le){let he=E[le];return he===void 0&&(he=new Gf,E[le]=he),he.getHandSpace()};function P(le){const he=A.get(le.inputSource);he&&he.dispatchEvent({type:le.type,data:le.inputSource})}function z(){A.forEach(function(le,he){le.disconnect(he)}),A.clear(),R=null,J=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),f&&t.deleteFramebuffer(f),v&&t.deleteFramebuffer(v),y&&t.deleteRenderbuffer(y),p&&t.deleteRenderbuffer(p),f=null,v=null,y=null,p=null,d=null,h=null,u=null,s=null,_e.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){a=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){l=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return u},this.getFrame=function(){return m},this.getSession=function(){return s},this.setSession=async function(le){if(s=le,s!==null){s.addEventListener("select",P),s.addEventListener("selectstart",P),s.addEventListener("selectend",P),s.addEventListener("squeeze",P),s.addEventListener("squeezestart",P),s.addEventListener("squeezeend",P),s.addEventListener("end",z),s.addEventListener("inputsourceschange",G);const he=t.getContextAttributes();if(he.xrCompatible!==!0&&await t.makeXRCompatible(),s.renderState.layers===void 0){const Ee={antialias:he.antialias,alpha:he.alpha,depth:he.depth,stencil:he.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(s,t,Ee),s.updateRenderState({baseLayer:d})}else if(t instanceof WebGLRenderingContext){const Ee={antialias:!0,alpha:he.alpha,depth:he.depth,stencil:he.stencil,framebufferScaleFactor:a};d=new XRWebGLLayer(s,t,Ee),s.updateRenderState({layers:[d]})}else{g=he.antialias;let Ee=null;he.depth&&(w=256,he.stencil&&(w|=1024),_=he.stencil?33306:36096,Ee=he.stencil?35056:33190);const F={colorFormat:he.alpha?32856:32849,depthFormat:Ee,scaleFactor:a};u=new XRWebGLBinding(s,t),h=u.createProjectionLayer(F),f=t.createFramebuffer(),s.updateRenderState({layers:[h]}),g&&(v=t.createFramebuffer(),y=t.createRenderbuffer(),t.bindRenderbuffer(36161,y),t.renderbufferStorageMultisample(36161,4,32856,h.textureWidth,h.textureHeight),r.bindFramebuffer(36160,v),t.framebufferRenderbuffer(36160,36064,36161,y),t.bindRenderbuffer(36161,null),Ee!==null&&(p=t.createRenderbuffer(),t.bindRenderbuffer(36161,p),t.renderbufferStorageMultisample(36161,4,Ee,h.textureWidth,h.textureHeight),t.framebufferRenderbuffer(36160,_,36161,p),t.bindRenderbuffer(36161,null)),r.bindFramebuffer(36160,null))}o=await s.requestReferenceSpace(l),_e.setContext(s),_e.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function G(le){const he=s.inputSources;for(let Ee=0;Ee<E.length;Ee++)A.set(he[Ee],E[Ee]);for(let Ee=0;Ee<le.removed.length;Ee++){const F=le.removed[Ee],U=A.get(F);U&&(U.dispatchEvent({type:"disconnected",data:F}),A.delete(F))}for(let Ee=0;Ee<le.added.length;Ee++){const F=le.added[Ee],U=A.get(F);U&&U.dispatchEvent({type:"connected",data:F})}}const W=new C,V=new C;function Y(le,he,Ee){W.setFromMatrixPosition(he.matrixWorld),V.setFromMatrixPosition(Ee.matrixWorld);const F=W.distanceTo(V),U=he.projectionMatrix.elements,ae=Ee.projectionMatrix.elements,X=U[14]/(U[10]-1),ne=U[14]/(U[10]+1),we=(U[9]+1)/U[5],Q=(U[9]-1)/U[5],x=(U[8]-1)/U[0],T=(ae[8]+1)/ae[0],O=X*x,B=X*T,M=F/(-x+T),S=M*-x;he.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(S),le.translateZ(M),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert();const k=X+M,j=ne+M,$=O-S,q=B+(F-S),ue=we*ne/j*k,de=Q*ne/j*k;le.projectionMatrix.makePerspective($,q,ue,de,k,j)}function oe(le,he){he===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(he.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(s===null)return;H.near=N.near=b.near=le.near,H.far=N.far=b.far=le.far,(R!==H.near||J!==H.far)&&(s.updateRenderState({depthNear:H.near,depthFar:H.far}),R=H.near,J=H.far);const he=le.parent,Ee=H.cameras;oe(H,he);for(let U=0;U<Ee.length;U++)oe(Ee[U],he);H.matrixWorld.decompose(H.position,H.quaternion,H.scale),le.position.copy(H.position),le.quaternion.copy(H.quaternion),le.scale.copy(H.scale),le.matrix.copy(H.matrix),le.matrixWorld.copy(H.matrixWorld);const F=le.children;for(let U=0,ae=F.length;U<ae;U++)F[U].updateMatrixWorld(!0);Ee.length===2?Y(H,b,N):H.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return H},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(le){h!==null&&(h.fixedFoveation=le),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=le)};let te=null;function ie(le,he){if(c=he.getViewerPose(o),m=he,c!==null){const F=c.views;d!==null&&r.bindXRFramebuffer(d.framebuffer);let U=!1;F.length!==H.cameras.length&&(H.cameras.length=0,U=!0);for(let ae=0;ae<F.length;ae++){const X=F[ae];let ne=null;if(d!==null)ne=d.getViewport(X);else{const Q=u.getViewSubImage(h,X);r.bindXRFramebuffer(f),Q.depthStencilTexture!==void 0&&t.framebufferTexture2D(36160,_,3553,Q.depthStencilTexture,0),t.framebufferTexture2D(36160,36064,3553,Q.colorTexture,0),ne=Q.viewport}const we=K[ae];we.matrix.fromArray(X.transform.matrix),we.projectionMatrix.fromArray(X.projectionMatrix),we.viewport.set(ne.x,ne.y,ne.width,ne.height),ae===0&&H.matrix.copy(we.matrix),U===!0&&H.cameras.push(we)}g&&(r.bindXRFramebuffer(v),w!==null&&t.clear(w))}const Ee=s.inputSources;for(let F=0;F<E.length;F++){const U=E[F],ae=Ee[F];U.update(ae,he,o)}if(te&&te(le,he),g){const F=h.textureWidth,U=h.textureHeight;r.bindFramebuffer(36008,v),r.bindFramebuffer(36009,f),t.invalidateFramebuffer(36008,[_]),t.invalidateFramebuffer(36009,[_]),t.blitFramebuffer(0,0,F,U,0,0,F,U,16384,9728),t.invalidateFramebuffer(36008,[36064]),r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),r.bindFramebuffer(36160,v)}m=null}const _e=new Bx;_e.setAnimationLoop(ie),this.setAnimationLoop=function(le){te=le},this.dispose=function(){}}}function uD(n){function e(p,m){p.fogColor.value.copy(m.color),m.isFog?(p.fogNear.value=m.near,p.fogFar.value=m.far):m.isFogExp2&&(p.fogDensity.value=m.density)}function t(p,m,_,w,E){m.isMeshBasicMaterial?i(p,m):m.isMeshLambertMaterial?(i(p,m),l(p,m)):m.isMeshToonMaterial?(i(p,m),u(p,m)):m.isMeshPhongMaterial?(i(p,m),c(p,m)):m.isMeshStandardMaterial?(i(p,m),m.isMeshPhysicalMaterial?h(p,m,E):f(p,m)):m.isMeshMatcapMaterial?(i(p,m),d(p,m)):m.isMeshDepthMaterial?(i(p,m),g(p,m)):m.isMeshDistanceMaterial?(i(p,m),v(p,m)):m.isMeshNormalMaterial?(i(p,m),y(p,m)):m.isLineBasicMaterial?(r(p,m),m.isLineDashedMaterial&&s(p,m)):m.isPointsMaterial?a(p,m,_,w):m.isSpriteMaterial?o(p,m):m.isShadowMaterial?(p.color.value.copy(m.color),p.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function i(p,m){p.opacity.value=m.opacity,m.color&&p.diffuse.value.copy(m.color),m.emissive&&p.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.specularMap&&(p.specularMap.value=m.specularMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);const _=n.get(m).envMap;if(_){p.envMap.value=_,p.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,p.reflectivity.value=m.reflectivity,p.ior.value=m.ior,p.refractionRatio.value=m.refractionRatio;const A=n.get(_).__maxMipLevel;A!==void 0&&(p.maxMipLevel.value=A)}m.lightMap&&(p.lightMap.value=m.lightMap,p.lightMapIntensity.value=m.lightMapIntensity),m.aoMap&&(p.aoMap.value=m.aoMap,p.aoMapIntensity.value=m.aoMapIntensity);let w;m.map?w=m.map:m.specularMap?w=m.specularMap:m.displacementMap?w=m.displacementMap:m.normalMap?w=m.normalMap:m.bumpMap?w=m.bumpMap:m.roughnessMap?w=m.roughnessMap:m.metalnessMap?w=m.metalnessMap:m.alphaMap?w=m.alphaMap:m.emissiveMap?w=m.emissiveMap:m.clearcoatMap?w=m.clearcoatMap:m.clearcoatNormalMap?w=m.clearcoatNormalMap:m.clearcoatRoughnessMap?w=m.clearcoatRoughnessMap:m.specularIntensityMap?w=m.specularIntensityMap:m.specularColorMap?w=m.specularColorMap:m.transmissionMap?w=m.transmissionMap:m.thicknessMap?w=m.thicknessMap:m.sheenColorMap?w=m.sheenColorMap:m.sheenRoughnessMap&&(w=m.sheenRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),p.uvTransform.value.copy(w.matrix));let E;m.aoMap?E=m.aoMap:m.lightMap&&(E=m.lightMap),E!==void 0&&(E.isWebGLRenderTarget&&(E=E.texture),E.matrixAutoUpdate===!0&&E.updateMatrix(),p.uv2Transform.value.copy(E.matrix))}function r(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity}function s(p,m){p.dashSize.value=m.dashSize,p.totalSize.value=m.dashSize+m.gapSize,p.scale.value=m.scale}function a(p,m,_,w){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.size.value=m.size*_,p.scale.value=w*.5,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let E;m.map?E=m.map:m.alphaMap&&(E=m.alphaMap),E!==void 0&&(E.matrixAutoUpdate===!0&&E.updateMatrix(),p.uvTransform.value.copy(E.matrix))}function o(p,m){p.diffuse.value.copy(m.color),p.opacity.value=m.opacity,p.rotation.value=m.rotation,m.map&&(p.map.value=m.map),m.alphaMap&&(p.alphaMap.value=m.alphaMap),m.alphaTest>0&&(p.alphaTest.value=m.alphaTest);let _;m.map?_=m.map:m.alphaMap&&(_=m.alphaMap),_!==void 0&&(_.matrixAutoUpdate===!0&&_.updateMatrix(),p.uvTransform.value.copy(_.matrix))}function l(p,m){m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap)}function c(p,m){p.specular.value.copy(m.specular),p.shininess.value=Math.max(m.shininess,1e-4),m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===Ct&&(p.bumpScale.value*=-1)),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===Ct&&p.normalScale.value.negate()),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias)}function u(p,m){m.gradientMap&&(p.gradientMap.value=m.gradientMap),m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===Ct&&(p.bumpScale.value*=-1)),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===Ct&&p.normalScale.value.negate()),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias)}function f(p,m){p.roughness.value=m.roughness,p.metalness.value=m.metalness,m.roughnessMap&&(p.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(p.metalnessMap.value=m.metalnessMap),m.emissiveMap&&(p.emissiveMap.value=m.emissiveMap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===Ct&&(p.bumpScale.value*=-1)),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===Ct&&p.normalScale.value.negate()),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias),n.get(m).envMap&&(p.envMapIntensity.value=m.envMapIntensity)}function h(p,m,_){f(p,m),p.ior.value=m.ior,m.sheen>0&&(p.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),p.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(p.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(p.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(p.clearcoat.value=m.clearcoat,p.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(p.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(p.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),p.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===Ct&&p.clearcoatNormalScale.value.negate())),m.transmission>0&&(p.transmission.value=m.transmission,p.transmissionSamplerMap.value=_.texture,p.transmissionSamplerSize.value.set(_.width,_.height),m.transmissionMap&&(p.transmissionMap.value=m.transmissionMap),p.thickness.value=m.thickness,m.thicknessMap&&(p.thicknessMap.value=m.thicknessMap),p.attenuationDistance.value=m.attenuationDistance,p.attenuationColor.value.copy(m.attenuationColor)),p.specularIntensity.value=m.specularIntensity,p.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(p.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(p.specularColorMap.value=m.specularColorMap)}function d(p,m){m.matcap&&(p.matcap.value=m.matcap),m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===Ct&&(p.bumpScale.value*=-1)),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===Ct&&p.normalScale.value.negate()),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias)}function g(p,m){m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias)}function v(p,m){m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias),p.referencePosition.value.copy(m.referencePosition),p.nearDistance.value=m.nearDistance,p.farDistance.value=m.farDistance}function y(p,m){m.bumpMap&&(p.bumpMap.value=m.bumpMap,p.bumpScale.value=m.bumpScale,m.side===Ct&&(p.bumpScale.value*=-1)),m.normalMap&&(p.normalMap.value=m.normalMap,p.normalScale.value.copy(m.normalScale),m.side===Ct&&p.normalScale.value.negate()),m.displacementMap&&(p.displacementMap.value=m.displacementMap,p.displacementScale.value=m.displacementScale,p.displacementBias.value=m.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function fD(){const n=Du("canvas");return n.style.display="block",n}function rt(n={}){const e=n.canvas!==void 0?n.canvas:fD(),t=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,a=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,c=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let f=null,h=null;const d=[],g=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Zt,this.physicallyCorrectLights=!1,this.toneMapping=qr,this.toneMappingExposure=1;const v=this;let y=!1,p=0,m=0,_=null,w=-1,E=null;const A=new st,b=new st;let N=null,K=e.width,H=e.height,R=1,J=null,P=null;const z=new st(0,0,K,H),G=new st(0,0,K,H);let W=!1;const V=[],Y=new Fu;let oe=!1,te=!1,ie=null;const _e=new Ce,le=new C,he={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return _===null?R:1}let F=t;function U(L,ee){for(let ce=0;ce<L.length;ce++){const se=L[ce],pe=e.getContext(se,ee);if(pe!==null)return pe}return null}try{const L={alpha:i,depth:r,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",Ve,!1),e.addEventListener("webglcontextrestored",He,!1),F===null){const ee=["webgl2","webgl","experimental-webgl"];if(v.isWebGL1Renderer===!0&&ee.shift(),F=U(ee,L),F===null)throw U(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}F.getShaderPrecisionFormat===void 0&&(F.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}let ae,X,ne,we,Q,x,T,O,B,M,S,k,j,$,q,ue,de,ge,me,D,ve,re,be;function I(){ae=new DI(F),X=new TI(F,ae,n),ae.init(X),re=new oD(F,ae,X),ne=new sD(F,ae,X),V[0]=1029,we=new kI,Q=new XN,x=new aD(F,ae,ne,Q,X,re,we),T=new RI(v),O=new NI(v),B=new K2(F,X),be=new SI(F,ae,B,X),M=new OI(F,B,we,be),S=new HI(F,M,B,we),me=new zI(F,X,x),ue=new AI(Q),k=new qN(v,T,O,ae,X,be,ue),j=new uD(Q),$=new KN(Q),q=new nD(ae,X),ge=new MI(v,T,ne,S,o),de=new Jx(v,S,X),D=new EI(F,ae,we,X),ve=new FI(F,ae,we,X),we.programs=k.programs,v.capabilities=X,v.extensions=ae,v.properties=Q,v.renderLists=$,v.shadowMap=de,v.state=ne,v.info=we}I();const xe=new cD(v,F);this.xr=xe,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){const L=ae.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=ae.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(L){L!==void 0&&(R=L,this.setSize(K,H,!1))},this.getSize=function(L){return L.set(K,H)},this.setSize=function(L,ee,ce){if(xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=L,H=ee,e.width=Math.floor(L*R),e.height=Math.floor(ee*R),ce!==!1&&(e.style.width=L+"px",e.style.height=ee+"px"),this.setViewport(0,0,L,ee)},this.getDrawingBufferSize=function(L){return L.set(K*R,H*R).floor()},this.setDrawingBufferSize=function(L,ee,ce){K=L,H=ee,R=ce,e.width=Math.floor(L*ce),e.height=Math.floor(ee*ce),this.setViewport(0,0,L,ee)},this.getCurrentViewport=function(L){return L.copy(A)},this.getViewport=function(L){return L.copy(z)},this.setViewport=function(L,ee,ce,se){L.isVector4?z.set(L.x,L.y,L.z,L.w):z.set(L,ee,ce,se),ne.viewport(A.copy(z).multiplyScalar(R).floor())},this.getScissor=function(L){return L.copy(G)},this.setScissor=function(L,ee,ce,se){L.isVector4?G.set(L.x,L.y,L.z,L.w):G.set(L,ee,ce,se),ne.scissor(b.copy(G).multiplyScalar(R).floor())},this.getScissorTest=function(){return W},this.setScissorTest=function(L){ne.setScissorTest(W=L)},this.setOpaqueSort=function(L){J=L},this.setTransparentSort=function(L){P=L},this.getClearColor=function(L){return L.copy(ge.getClearColor())},this.setClearColor=function(){ge.setClearColor.apply(ge,arguments)},this.getClearAlpha=function(){return ge.getClearAlpha()},this.setClearAlpha=function(){ge.setClearAlpha.apply(ge,arguments)},this.clear=function(L,ee,ce){let se=0;(L===void 0||L)&&(se|=16384),(ee===void 0||ee)&&(se|=256),(ce===void 0||ce)&&(se|=1024),F.clear(se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ve,!1),e.removeEventListener("webglcontextrestored",He,!1),$.dispose(),q.dispose(),Q.dispose(),T.dispose(),O.dispose(),S.dispose(),be.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",gn),xe.removeEventListener("sessionend",Ip),ie&&(ie.dispose(),ie=null),Er.stop()};function Ve(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function He(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const L=we.autoReset,ee=de.enabled,ce=de.autoUpdate,se=de.needsUpdate,pe=de.type;I(),we.autoReset=L,de.enabled=ee,de.autoUpdate=ce,de.needsUpdate=se,de.type=pe}function yt(L){const ee=L.target;ee.removeEventListener("dispose",yt),Ue(ee)}function Ue(L){ct(L),Q.remove(L)}function ct(L){const ee=Q.get(L).programs;ee!==void 0&&ee.forEach(function(ce){k.releaseProgram(ce)})}this.renderBufferDirect=function(L,ee,ce,se,pe,ke){ee===null&&(ee=he);const De=pe.isMesh&&pe.matrixWorld.determinant()<0,Ne=Fb(L,ee,ce,se,pe);ne.setMaterial(se,De);let Ge=ce.index;const nt=ce.attributes.position;if(Ge===null){if(nt===void 0||nt.count===0)return}else if(Ge.count===0)return;let je=1;se.wireframe===!0&&(Ge=M.getWireframeAttribute(ce),je=2),be.setup(pe,se,Ne,ce,Ge);let Ke,bt=D;Ge!==null&&(Ke=B.get(Ge),bt=ve,bt.setIndex(Ke));const Tr=Ge!==null?Ge.count:nt.count,Je=ce.drawRange.start*je,La=ce.drawRange.count*je,ut=ke!==null?ke.start*je:0,Ar=ke!==null?ke.count*je:1/0,Rr=Math.max(Je,ut),Lr=Math.min(Tr,Je+La,ut+Ar)-1,Ni=Math.max(0,Lr-Rr+1);if(Ni!==0){if(pe.isMesh)se.wireframe===!0?(ne.setLineWidth(se.wireframeLinewidth*Ee()),bt.setMode(1)):bt.setMode(4);else if(pe.isLine){let wt=se.linewidth;wt===void 0&&(wt=1),ne.setLineWidth(wt*Ee()),pe.isLineSegments?bt.setMode(1):pe.isLineLoop?bt.setMode(2):bt.setMode(3)}else pe.isPoints?bt.setMode(0):pe.isSprite&&bt.setMode(4);if(pe.isInstancedMesh)bt.renderInstances(Rr,Ni,pe.count);else if(ce.isInstancedBufferGeometry){const wt=Math.min(ce.instanceCount,ce._maxInstanceCount);bt.renderInstances(Rr,Ni,wt)}else bt.render(Rr,Ni)}},this.compile=function(L,ee){h=q.get(L),h.init(),g.push(h),L.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ee.layers)&&(h.pushLight(ce),ce.castShadow&&h.pushShadow(ce))}),h.setupLights(v.physicallyCorrectLights),L.traverse(function(ce){const se=ce.material;if(se)if(Array.isArray(se))for(let pe=0;pe<se.length;pe++){const ke=se[pe];Wu(ke,L,ce)}else Wu(se,L,ce)}),g.pop(),h=null};let Ht=null;function Rn(L){Ht&&Ht(L)}function gn(){Er.stop()}function Ip(){Er.start()}const Er=new Bx;Er.setAnimationLoop(Rn),typeof window<"u"&&Er.setContext(window),this.setAnimationLoop=function(L){Ht=L,xe.setAnimationLoop(L),L===null?Er.stop():Er.start()},xe.addEventListener("sessionstart",gn),xe.addEventListener("sessionend",Ip),this.render=function(L,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;L.autoUpdate===!0&&L.updateMatrixWorld(),ee.parent===null&&ee.updateMatrixWorld(),xe.enabled===!0&&xe.isPresenting===!0&&(xe.cameraAutoUpdate===!0&&xe.updateCamera(ee),ee=xe.getCamera()),L.isScene===!0&&L.onBeforeRender(v,L,ee,_),h=q.get(L,g.length),h.init(),g.push(h),_e.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),Y.setFromProjectionMatrix(_e),te=this.localClippingEnabled,oe=ue.init(this.clippingPlanes,te,ee),f=$.get(L,d.length),f.init(),d.push(f),Np(L,ee,0,v.sortObjects),f.finish(),v.sortObjects===!0&&f.sort(J,P),oe===!0&&ue.beginShadows();const ce=h.state.shadowsArray;if(de.render(ce,L,ee),oe===!0&&ue.endShadows(),this.info.autoReset===!0&&this.info.reset(),ge.render(f,L),h.setupLights(v.physicallyCorrectLights),ee.isArrayCamera){const se=ee.cameras;for(let pe=0,ke=se.length;pe<ke;pe++){const De=se[pe];Dp(f,L,De,De.viewport)}}else Dp(f,L,ee);_!==null&&(x.updateMultisampleRenderTarget(_),x.updateRenderTargetMipmap(_)),L.isScene===!0&&L.onAfterRender(v,L,ee),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1),be.resetDefaultState(),w=-1,E=null,g.pop(),g.length>0?h=g[g.length-1]:h=null,d.pop(),d.length>0?f=d[d.length-1]:f=null};function Np(L,ee,ce,se){if(L.visible===!1)return;if(L.layers.test(ee.layers)){if(L.isGroup)ce=L.renderOrder;else if(L.isLOD)L.autoUpdate===!0&&L.update(ee);else if(L.isLight)h.pushLight(L),L.castShadow&&h.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||Y.intersectsSprite(L)){se&&le.setFromMatrixPosition(L.matrixWorld).applyMatrix4(_e);const De=S.update(L),Ne=L.material;Ne.visible&&f.push(L,De,Ne,ce,le.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(L.isSkinnedMesh&&L.skeleton.frame!==we.render.frame&&(L.skeleton.update(),L.skeleton.frame=we.render.frame),!L.frustumCulled||Y.intersectsObject(L))){se&&le.setFromMatrixPosition(L.matrixWorld).applyMatrix4(_e);const De=S.update(L),Ne=L.material;if(Array.isArray(Ne)){const Ge=De.groups;for(let nt=0,je=Ge.length;nt<je;nt++){const Ke=Ge[nt],bt=Ne[Ke.materialIndex];bt&&bt.visible&&f.push(L,De,bt,ce,le.z,Ke)}}else Ne.visible&&f.push(L,De,Ne,ce,le.z,null)}}const ke=L.children;for(let De=0,Ne=ke.length;De<Ne;De++)Np(ke[De],ee,ce,se)}function Dp(L,ee,ce,se){const pe=L.opaque,ke=L.transmissive,De=L.transparent;h.setupLightsView(ce),ke.length>0&&Db(pe,ee,ce),se&&ne.viewport(A.copy(se)),pe.length>0&&vl(pe,ee,ce),ke.length>0&&vl(ke,ee,ce),De.length>0&&vl(De,ee,ce)}function Db(L,ee,ce){if(ie===null){const De=a===!0&&X.isWebGL2===!0?Dx:Yn;ie=new De(1024,1024,{generateMipmaps:!0,type:re.convert($s)!==null?$s:mr,minFilter:_a,magFilter:It,wrapS:ln,wrapT:ln})}const se=v.getRenderTarget();v.setRenderTarget(ie),v.clear();const pe=v.toneMapping;v.toneMapping=qr,vl(L,ee,ce),v.toneMapping=pe,x.updateMultisampleRenderTarget(ie),x.updateRenderTargetMipmap(ie),v.setRenderTarget(se)}function vl(L,ee,ce){const se=ee.isScene===!0?ee.overrideMaterial:null;for(let pe=0,ke=L.length;pe<ke;pe++){const De=L[pe],Ne=De.object,Ge=De.geometry,nt=se===null?De.material:se,je=De.group;Ne.layers.test(ce.layers)&&Ob(Ne,ee,ce,Ge,nt,je)}}function Ob(L,ee,ce,se,pe,ke){L.onBeforeRender(v,ee,ce,se,pe,ke),L.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),pe.onBeforeRender(v,ee,ce,se,L,ke),pe.transparent===!0&&pe.side===Qr?(pe.side=Ct,pe.needsUpdate=!0,v.renderBufferDirect(ce,ee,se,pe,L,ke),pe.side=aa,pe.needsUpdate=!0,v.renderBufferDirect(ce,ee,se,pe,L,ke),pe.side=Qr):v.renderBufferDirect(ce,ee,se,pe,L,ke),L.onAfterRender(v,ee,ce,se,pe,ke)}function Wu(L,ee,ce){ee.isScene!==!0&&(ee=he);const se=Q.get(L),pe=h.state.lights,ke=h.state.shadowsArray,De=pe.state.version,Ne=k.getParameters(L,pe.state,ke,ee,ce),Ge=k.getProgramCacheKey(Ne);let nt=se.programs;se.environment=L.isMeshStandardMaterial?ee.environment:null,se.fog=ee.fog,se.envMap=(L.isMeshStandardMaterial?O:T).get(L.envMap||se.environment),nt===void 0&&(L.addEventListener("dispose",yt),nt=new Map,se.programs=nt);let je=nt.get(Ge);if(je!==void 0){if(se.currentProgram===je&&se.lightsStateVersion===De)return Op(L,Ne),je}else Ne.uniforms=k.getUniforms(L),L.onBuild(ce,Ne,v),L.onBeforeCompile(Ne,v),je=k.acquireProgram(Ne,Ge),nt.set(Ge,je),se.uniforms=Ne.uniforms;const Ke=se.uniforms;(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)&&(Ke.clippingPlanes=ue.uniform),Op(L,Ne),se.needsLights=Ub(L),se.lightsStateVersion=De,se.needsLights&&(Ke.ambientLightColor.value=pe.state.ambient,Ke.lightProbe.value=pe.state.probe,Ke.directionalLights.value=pe.state.directional,Ke.directionalLightShadows.value=pe.state.directionalShadow,Ke.spotLights.value=pe.state.spot,Ke.spotLightShadows.value=pe.state.spotShadow,Ke.rectAreaLights.value=pe.state.rectArea,Ke.ltc_1.value=pe.state.rectAreaLTC1,Ke.ltc_2.value=pe.state.rectAreaLTC2,Ke.pointLights.value=pe.state.point,Ke.pointLightShadows.value=pe.state.pointShadow,Ke.hemisphereLights.value=pe.state.hemi,Ke.directionalShadowMap.value=pe.state.directionalShadowMap,Ke.directionalShadowMatrix.value=pe.state.directionalShadowMatrix,Ke.spotShadowMap.value=pe.state.spotShadowMap,Ke.spotShadowMatrix.value=pe.state.spotShadowMatrix,Ke.pointShadowMap.value=pe.state.pointShadowMap,Ke.pointShadowMatrix.value=pe.state.pointShadowMatrix);const bt=je.getUniforms(),Tr=sr.seqWithValue(bt.seq,Ke);return se.currentProgram=je,se.uniformsList=Tr,je}function Op(L,ee){const ce=Q.get(L);ce.outputEncoding=ee.outputEncoding,ce.instancing=ee.instancing,ce.skinning=ee.skinning,ce.morphTargets=ee.morphTargets,ce.morphNormals=ee.morphNormals,ce.morphTargetsCount=ee.morphTargetsCount,ce.numClippingPlanes=ee.numClippingPlanes,ce.numIntersection=ee.numClipIntersection,ce.vertexAlphas=ee.vertexAlphas,ce.vertexTangents=ee.vertexTangents}function Fb(L,ee,ce,se,pe){ee.isScene!==!0&&(ee=he),x.resetTextureUnits();const ke=ee.fog,De=se.isMeshStandardMaterial?ee.environment:null,Ne=_===null?v.outputEncoding:_.texture.encoding,Ge=(se.isMeshStandardMaterial?O:T).get(se.envMap||De),nt=se.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,je=!!se.normalMap&&!!ce.attributes.tangent,Ke=!!ce.morphAttributes.position,bt=!!ce.morphAttributes.normal,Tr=ce.morphAttributes.position?ce.morphAttributes.position.length:0,Je=Q.get(se),La=h.state.lights;if(oe===!0&&(te===!0||L!==E)){const Ln=L===E&&se.id===w;ue.setState(se,L,Ln)}let ut=!1;se.version===Je.__version?(Je.needsLights&&Je.lightsStateVersion!==La.state.version||Je.outputEncoding!==Ne||pe.isInstancedMesh&&Je.instancing===!1||!pe.isInstancedMesh&&Je.instancing===!0||pe.isSkinnedMesh&&Je.skinning===!1||!pe.isSkinnedMesh&&Je.skinning===!0||Je.envMap!==Ge||se.fog&&Je.fog!==ke||Je.numClippingPlanes!==void 0&&(Je.numClippingPlanes!==ue.numPlanes||Je.numIntersection!==ue.numIntersection)||Je.vertexAlphas!==nt||Je.vertexTangents!==je||Je.morphTargets!==Ke||Je.morphNormals!==bt||X.isWebGL2===!0&&Je.morphTargetsCount!==Tr)&&(ut=!0):(ut=!0,Je.__version=se.version);let Ar=Je.currentProgram;ut===!0&&(Ar=Wu(se,ee,pe));let Rr=!1,Lr=!1,Ni=!1;const wt=Ar.getUniforms(),Ca=Je.uniforms;if(ne.useProgram(Ar.program)&&(Rr=!0,Lr=!0,Ni=!0),se.id!==w&&(w=se.id,Lr=!0),Rr||E!==L){if(wt.setValue(F,"projectionMatrix",L.projectionMatrix),X.logarithmicDepthBuffer&&wt.setValue(F,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),E!==L&&(E=L,Lr=!0,Ni=!0),se.isShaderMaterial||se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshStandardMaterial||se.envMap){const Ln=wt.map.cameraPosition;Ln!==void 0&&Ln.setValue(F,le.setFromMatrixPosition(L.matrixWorld))}(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial)&&wt.setValue(F,"isOrthographic",L.isOrthographicCamera===!0),(se.isMeshPhongMaterial||se.isMeshToonMaterial||se.isMeshLambertMaterial||se.isMeshBasicMaterial||se.isMeshStandardMaterial||se.isShaderMaterial||se.isShadowMaterial||pe.isSkinnedMesh)&&wt.setValue(F,"viewMatrix",L.matrixWorldInverse)}if(pe.isSkinnedMesh){wt.setOptional(F,pe,"bindMatrix"),wt.setOptional(F,pe,"bindMatrixInverse");const Ln=pe.skeleton;Ln&&(X.floatVertexTextures?(Ln.boneTexture===null&&Ln.computeBoneTexture(),wt.setValue(F,"boneTexture",Ln.boneTexture,x),wt.setValue(F,"boneTextureSize",Ln.boneTextureSize)):wt.setOptional(F,Ln,"boneMatrices"))}return ce&&(ce.morphAttributes.position!==void 0||ce.morphAttributes.normal!==void 0)&&me.update(pe,ce,se,Ar),(Lr||Je.receiveShadow!==pe.receiveShadow)&&(Je.receiveShadow=pe.receiveShadow,wt.setValue(F,"receiveShadow",pe.receiveShadow)),Lr&&(wt.setValue(F,"toneMappingExposure",v.toneMappingExposure),Je.needsLights&&kb(Ca,Ni),ke&&se.fog&&j.refreshFogUniforms(Ca,ke),j.refreshMaterialUniforms(Ca,se,R,H,ie),sr.upload(F,Je.uniformsList,Ca,x)),se.isShaderMaterial&&se.uniformsNeedUpdate===!0&&(sr.upload(F,Je.uniformsList,Ca,x),se.uniformsNeedUpdate=!1),se.isSpriteMaterial&&wt.setValue(F,"center",pe.center),wt.setValue(F,"modelViewMatrix",pe.modelViewMatrix),wt.setValue(F,"normalMatrix",pe.normalMatrix),wt.setValue(F,"modelMatrix",pe.matrixWorld),Ar}function kb(L,ee){L.ambientLightColor.needsUpdate=ee,L.lightProbe.needsUpdate=ee,L.directionalLights.needsUpdate=ee,L.directionalLightShadows.needsUpdate=ee,L.pointLights.needsUpdate=ee,L.pointLightShadows.needsUpdate=ee,L.spotLights.needsUpdate=ee,L.spotLightShadows.needsUpdate=ee,L.rectAreaLights.needsUpdate=ee,L.hemisphereLights.needsUpdate=ee}function Ub(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}this.getActiveCubeFace=function(){return p},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return _},this.setRenderTarget=function(L,ee=0,ce=0){_=L,p=ee,m=ce,L&&Q.get(L).__webglFramebuffer===void 0&&x.setupRenderTarget(L);let se=null,pe=!1,ke=!1;if(L){const Ne=L.texture;(Ne.isDataTexture3D||Ne.isDataTexture2DArray)&&(ke=!0);const Ge=Q.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(se=Ge[ee],pe=!0):L.isWebGLMultisampleRenderTarget?se=Q.get(L).__webglMultisampledFramebuffer:se=Ge,A.copy(L.viewport),b.copy(L.scissor),N=L.scissorTest}else A.copy(z).multiplyScalar(R).floor(),b.copy(G).multiplyScalar(R).floor(),N=W;if(ne.bindFramebuffer(36160,se)&&X.drawBuffers){let Ne=!1;if(L)if(L.isWebGLMultipleRenderTargets){const Ge=L.texture;if(V.length!==Ge.length||V[0]!==36064){for(let nt=0,je=Ge.length;nt<je;nt++)V[nt]=36064+nt;V.length=Ge.length,Ne=!0}}else(V.length!==1||V[0]!==36064)&&(V[0]=36064,V.length=1,Ne=!0);else(V.length!==1||V[0]!==1029)&&(V[0]=1029,V.length=1,Ne=!0);Ne&&(X.isWebGL2?F.drawBuffers(V):ae.get("WEBGL_draw_buffers").drawBuffersWEBGL(V))}if(ne.viewport(A),ne.scissor(b),ne.setScissorTest(N),pe){const Ne=Q.get(L.texture);F.framebufferTexture2D(36160,36064,34069+ee,Ne.__webglTexture,ce)}else if(ke){const Ne=Q.get(L.texture),Ge=ee||0;F.framebufferTextureLayer(36160,36064,Ne.__webglTexture,ce||0,Ge)}w=-1},this.readRenderTargetPixels=function(L,ee,ce,se,pe,ke,De){if(!(L&&L.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ne=Q.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&De!==void 0&&(Ne=Ne[De]),Ne){ne.bindFramebuffer(36160,Ne);try{const Ge=L.texture,nt=Ge.format,je=Ge.type;if(nt!==Kt&&re.convert(nt)!==F.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ke=je===$s&&(ae.has("EXT_color_buffer_half_float")||X.isWebGL2&&ae.has("EXT_color_buffer_float"));if(je!==mr&&re.convert(je)!==F.getParameter(35738)&&!(je===vi&&(X.isWebGL2||ae.has("OES_texture_float")||ae.has("WEBGL_color_buffer_float")))&&!Ke){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}F.checkFramebufferStatus(36160)===36053?ee>=0&&ee<=L.width-se&&ce>=0&&ce<=L.height-pe&&F.readPixels(ee,ce,se,pe,re.convert(nt),re.convert(je),ke):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const Ge=_!==null?Q.get(_).__webglFramebuffer:null;ne.bindFramebuffer(36160,Ge)}}},this.copyFramebufferToTexture=function(L,ee,ce=0){const se=Math.pow(2,-ce),pe=Math.floor(ee.image.width*se),ke=Math.floor(ee.image.height*se);let De=re.convert(ee.format);X.isWebGL2&&(De===6407&&(De=32849),De===6408&&(De=32856)),x.setTexture2D(ee,0),F.copyTexImage2D(3553,ce,De,L.x,L.y,pe,ke,0),ne.unbindTexture()},this.copyTextureToTexture=function(L,ee,ce,se=0){const pe=ee.image.width,ke=ee.image.height,De=re.convert(ce.format),Ne=re.convert(ce.type);x.setTexture2D(ce,0),F.pixelStorei(37440,ce.flipY),F.pixelStorei(37441,ce.premultiplyAlpha),F.pixelStorei(3317,ce.unpackAlignment),ee.isDataTexture?F.texSubImage2D(3553,se,L.x,L.y,pe,ke,De,Ne,ee.image.data):ee.isCompressedTexture?F.compressedTexSubImage2D(3553,se,L.x,L.y,ee.mipmaps[0].width,ee.mipmaps[0].height,De,ee.mipmaps[0].data):F.texSubImage2D(3553,se,L.x,L.y,De,Ne,ee.image),se===0&&ce.generateMipmaps&&F.generateMipmap(3553),ne.unbindTexture()},this.copyTextureToTexture3D=function(L,ee,ce,se,pe=0){if(v.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const ke=L.max.x-L.min.x+1,De=L.max.y-L.min.y+1,Ne=L.max.z-L.min.z+1,Ge=re.convert(se.format),nt=re.convert(se.type);let je;if(se.isDataTexture3D)x.setTexture3D(se,0),je=32879;else if(se.isDataTexture2DArray)x.setTexture2DArray(se,0),je=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}F.pixelStorei(37440,se.flipY),F.pixelStorei(37441,se.premultiplyAlpha),F.pixelStorei(3317,se.unpackAlignment);const Ke=F.getParameter(3314),bt=F.getParameter(32878),Tr=F.getParameter(3316),Je=F.getParameter(3315),La=F.getParameter(32877),ut=ce.isCompressedTexture?ce.mipmaps[0]:ce.image;F.pixelStorei(3314,ut.width),F.pixelStorei(32878,ut.height),F.pixelStorei(3316,L.min.x),F.pixelStorei(3315,L.min.y),F.pixelStorei(32877,L.min.z),ce.isDataTexture||ce.isDataTexture3D?F.texSubImage3D(je,pe,ee.x,ee.y,ee.z,ke,De,Ne,Ge,nt,ut.data):ce.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),F.compressedTexSubImage3D(je,pe,ee.x,ee.y,ee.z,ke,De,Ne,Ge,ut.data)):F.texSubImage3D(je,pe,ee.x,ee.y,ee.z,ke,De,Ne,Ge,nt,ut),F.pixelStorei(3314,Ke),F.pixelStorei(32878,bt),F.pixelStorei(3316,Tr),F.pixelStorei(3315,Je),F.pixelStorei(32877,La),pe===0&&se.generateMipmaps&&F.generateMipmap(je),ne.unbindTexture()},this.initTexture=function(L){x.setTexture2D(L,0),ne.unbindTexture()},this.resetState=function(){p=0,m=0,_=null,ne.reset(),be.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}rt.prototype.isWebGLRenderer=!0;class hD extends rt{}hD.prototype.isWebGL1Renderer=!0;class gp extends tt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}}gp.prototype.isScene=!0;class Sa{constructor(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=zo,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=En()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=En()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=En()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}Sa.prototype.isInterleavedBuffer=!0;const St=new C;class ua{constructor(e,t,i,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)St.x=this.getX(t),St.y=this.getY(t),St.z=this.getZ(t),St.applyMatrix4(e),this.setXYZ(t,St.x,St.y,St.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)St.x=this.getX(t),St.y=this.getY(t),St.z=this.getZ(t),St.applyNormalMatrix(e),this.setXYZ(t,St.x,St.y,St.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)St.x=this.getX(t),St.y=this.getY(t),St.z=this.getZ(t),St.transformDirection(e),this.setXYZ(t,St.x,St.y,St.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Et(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ua(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}ua.prototype.isInterleavedBufferAttribute=!0;class eb extends Dt{constructor(e){super(),this.type="SpriteMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}eb.prototype.isSpriteMaterial=!0;let Ts;const Ba=new C,As=new C,Rs=new C,Ls=new ye,za=new ye,tb=new Ce,tc=new C,Ha=new C,nc=new C,Pv=new ye,Wf=new ye,Iv=new ye;class dD extends tt{constructor(e){if(super(),this.type="Sprite",Ts===void 0){Ts=new mt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Sa(t,5);Ts.setIndex([0,1,2,0,2,3]),Ts.setAttribute("position",new ua(i,3,0,!1)),Ts.setAttribute("uv",new ua(i,2,3,!1))}this.geometry=Ts,this.material=e!==void 0?e:new eb,this.center=new ye(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),As.setFromMatrixScale(this.matrixWorld),tb.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Rs.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&As.multiplyScalar(-Rs.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;ic(tc.set(-.5,-.5,0),Rs,a,As,r,s),ic(Ha.set(.5,-.5,0),Rs,a,As,r,s),ic(nc.set(.5,.5,0),Rs,a,As,r,s),Pv.set(0,0),Wf.set(1,0),Iv.set(1,1);let o=e.ray.intersectTriangle(tc,Ha,nc,!1,Ba);if(o===null&&(ic(Ha.set(-.5,.5,0),Rs,a,As,r,s),Wf.set(0,1),o=e.ray.intersectTriangle(tc,nc,Ha,!1,Ba),o===null))return;const l=e.ray.origin.distanceTo(Ba);l<e.near||l>e.far||t.push({distance:l,point:Ba.clone(),uv:Nt.getUV(Ba,tc,Ha,nc,Pv,Wf,Iv,new ye),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}dD.prototype.isSprite=!0;function ic(n,e,t,i,r,s){Ls.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(za.x=s*Ls.x-r*Ls.y,za.y=r*Ls.x+s*Ls.y):za.copy(Ls),n.copy(e),n.x+=za.x,n.y+=za.y,n.applyMatrix4(tb)}const Nv=new C,Dv=new st,Ov=new st,pD=new C,Fv=new Ce;class vp extends tn{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ce,this.bindMatrixInverse=new Ce}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new st,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.w=t.getW(i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;Dv.fromBufferAttribute(r.attributes.skinIndex,e),Ov.fromBufferAttribute(r.attributes.skinWeight,e),Nv.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=Ov.getComponent(s);if(a!==0){const o=Dv.getComponent(s);Fv.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(pD.copy(Nv).applyMatrix4(Fv),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}vp.prototype.isSkinnedMesh=!0;class yp extends tt{constructor(){super(),this.type="Bone"}}yp.prototype.isBone=!0;class nb extends Ft{constructor(e=null,t=1,i=1,r,s,a,o,l,c=It,u=It,f,h){super(null,a,o,l,c,u,r,s,f,h),this.image={data:e,width:t,height:i},this.magFilter=c,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}nb.prototype.isDataTexture=!0;const kv=new Ce,mD=new Ce;class _p{constructor(e=[],t=[]){this.uuid=En(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Ce)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Ce;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:mD;kv.multiplyMatrices(o,t[s]),kv.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new _p(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Px(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new nb(t,e,e,Kt,vi);return this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new yp),this.bones.push(a),this.boneInverses.push(new Ce().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class jh extends Et{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}jh.prototype.isInstancedBufferAttribute=!0;const Uv=new Ce,Bv=new Ce,rc=[],Va=new tn;class gD extends tn{constructor(e,t,i){super(e,t),this.instanceMatrix=new jh(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Va.geometry=this.geometry,Va.material=this.material,Va.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,Uv),Bv.multiplyMatrices(i,Uv),Va.matrixWorld=Bv,Va.raycast(e,rc);for(let a=0,o=rc.length;a<o;a++){const l=rc[a];l.instanceId=s,l.object=this,t.push(l)}rc.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new jh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}gD.prototype.isInstancedMesh=!0;class Ea extends Dt{constructor(e){super(),this.type="LineBasicMaterial",this.color=new Ae(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Ea.prototype.isLineBasicMaterial=!0;const zv=new C,Hv=new C,Vv=new Ce,jf=new ba,sc=new ls;class Bu extends tt{constructor(e=new mt,t=new Ea){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)zv.fromBufferAttribute(t,r-1),Hv.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=zv.distanceTo(Hv);e.setAttribute("lineDistance",new Bt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),sc.copy(i.boundingSphere),sc.applyMatrix4(r),sc.radius+=s,e.ray.intersectsSphere(sc)===!1)return;Vv.copy(r).invert(),jf.copy(e.ray).applyMatrix4(Vv);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,c=new C,u=new C,f=new C,h=new C,d=this.isLineSegments?2:1;if(i.isBufferGeometry){const g=i.index,y=i.attributes.position;if(g!==null){const p=Math.max(0,a.start),m=Math.min(g.count,a.start+a.count);for(let _=p,w=m-1;_<w;_+=d){const E=g.getX(_),A=g.getX(_+1);if(c.fromBufferAttribute(y,E),u.fromBufferAttribute(y,A),jf.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(h);N<e.near||N>e.far||t.push({distance:N,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const p=Math.max(0,a.start),m=Math.min(y.count,a.start+a.count);for(let _=p,w=m-1;_<w;_+=d){if(c.fromBufferAttribute(y,_),u.fromBufferAttribute(y,_+1),jf.distanceSqToSegment(c,u,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(h);A<e.near||A>e.far||t.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}else i.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Bu.prototype.isLine=!0;const Gv=new C,Wv=new C;class zu extends Bu{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)Gv.fromBufferAttribute(t,r),Wv.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+Gv.distanceTo(Wv);e.setAttribute("lineDistance",new Bt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}zu.prototype.isLineSegments=!0;class ib extends Bu{constructor(e,t){super(e,t),this.type="LineLoop"}}ib.prototype.isLineLoop=!0;class xp extends Dt{constructor(e){super(),this.type="PointsMaterial",this.color=new Ae(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}xp.prototype.isPointsMaterial=!0;const jv=new Ce,$h=new ba,ac=new ls,oc=new C;class rb extends tt{constructor(e=new mt,t=new xp){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ac.copy(i.boundingSphere),ac.applyMatrix4(r),ac.radius+=s,e.ray.intersectsSphere(ac)===!1)return;jv.copy(r).invert(),$h.copy(e.ray).applyMatrix4(jv);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o;if(i.isBufferGeometry){const c=i.index,f=i.attributes.position;if(c!==null){const h=Math.max(0,a.start),d=Math.min(c.count,a.start+a.count);for(let g=h,v=d;g<v;g++){const y=c.getX(g);oc.fromBufferAttribute(f,y),$v(oc,y,l,r,e,t,this)}}else{const h=Math.max(0,a.start),d=Math.min(f.count,a.start+a.count);for(let g=h,v=d;g<v;g++)oc.fromBufferAttribute(f,g),$v(oc,g,l,r,e,t,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}rb.prototype.isPoints=!0;function $v(n,e,t,i,r,s,a){const o=$h.distanceSqToPoint(n);if(o<t){const l=new C;$h.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class vD extends Ft{constructor(e,t,i,r,s,a,o,l,c){super(e,t,i,r,s,a,o,l,c),this.format=o!==void 0?o:Xr,this.minFilter=a!==void 0?a:un,this.magFilter=s!==void 0?s:un,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}vD.prototype.isVideoTexture=!0;class yD extends Ft{constructor(e,t,i,r,s,a,o,l,c,u,f,h){super(null,a,o,l,c,u,r,s,f,h),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}yD.prototype.isCompressedTexture=!0;class sb extends Ft{constructor(e,t,i,r,s,a,o,l,c){super(e,t,i,r,s,a,o,l,c),this.needsUpdate=!0}}sb.prototype.isCanvasTexture=!0;class _D extends Ft{constructor(e,t,i,r,s,a,o,l,c,u){if(u=u!==void 0?u:qs,u!==qs&&u!==Uo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===qs&&(i=$c),i===void 0&&u===Uo&&(i=fo),super(null,r,s,a,o,l,u,i,c),this.image={width:e,height:t},this.magFilter=o!==void 0?o:It,this.minFilter=l!==void 0?l:It,this.flipY=!1,this.generateMipmaps=!1}}_D.prototype.isDepthTexture=!0;class An{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,c;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),c=i[r]-a,c<0)o=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const u=i[r],h=i[r+1]-u,d=(a-u)/h;return(r+d)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new ye:new C);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new C,r=[],s=[],a=[],o=new C,l=new Ce;for(let d=0;d<=e;d++){const g=d/e;r[d]=this.getTangentAt(g,new C)}s[0]=new C,a[0]=new C;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),h<=c&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(r[d-1],r[d]),o.length()>Number.EPSILON){o.normalize();const g=Math.acos(en(r[d-1].dot(r[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(o,g))}a[d].crossVectors(r[d],s[d])}if(t===!0){let d=Math.acos(en(s[0].dot(s[e]),-1,1));d/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(d=-d);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],d*g)),a[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Hu extends An{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const i=t||new ye,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,d=c-this.aY;l=h*u-d*f+this.aX,c=h*f+d*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}Hu.prototype.isEllipseCurve=!0;class ab extends Hu{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.type="ArcCurve"}}ab.prototype.isArcCurve=!0;function bp(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,c){r(a,o,c*(o-s),c*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,c,u,f){let h=(a-s)/c-(o-s)/(c+u)+(o-a)/u,d=(o-a)/u-(l-a)/(u+f)+(l-o)/f;h*=u,d*=u,r(a,o,h,d)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const lc=new C,$f=new bp,qf=new bp,Xf=new bp;class ob extends An{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new C){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let c,u;this.closed||o>0?c=r[(o-1)%s]:(lc.subVectors(r[0],r[1]).add(r[0]),c=lc);const f=r[o%s],h=r[(o+1)%s];if(this.closed||o+2<s?u=r[(o+2)%s]:(lc.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=lc),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let g=Math.pow(c.distanceToSquared(f),d),v=Math.pow(f.distanceToSquared(h),d),y=Math.pow(h.distanceToSquared(u),d);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),$f.initNonuniformCatmullRom(c.x,f.x,h.x,u.x,g,v,y),qf.initNonuniformCatmullRom(c.y,f.y,h.y,u.y,g,v,y),Xf.initNonuniformCatmullRom(c.z,f.z,h.z,u.z,g,v,y)}else this.curveType==="catmullrom"&&($f.initCatmullRom(c.x,f.x,h.x,u.x,this.tension),qf.initCatmullRom(c.y,f.y,h.y,u.y,this.tension),Xf.initCatmullRom(c.z,f.z,h.z,u.z,this.tension));return i.set($f.calc(l),qf.calc(l),Xf.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new C().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}ob.prototype.isCatmullRomCurve3=!0;function qv(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function xD(n,e){const t=1-n;return t*t*e}function bD(n,e){return 2*(1-n)*n*e}function wD(n,e){return n*n*e}function mo(n,e,t,i){return xD(n,e)+bD(n,t)+wD(n,i)}function MD(n,e){const t=1-n;return t*t*t*e}function SD(n,e){const t=1-n;return 3*t*t*n*e}function ED(n,e){return 3*(1-n)*n*n*e}function TD(n,e){return n*n*n*e}function go(n,e,t,i,r){return MD(n,e)+SD(n,t)+ED(n,i)+TD(n,r)}class wp extends An{constructor(e=new ye,t=new ye,i=new ye,r=new ye){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ye){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(go(e,r.x,s.x,a.x,o.x),go(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}wp.prototype.isCubicBezierCurve=!0;class lb extends An{constructor(e=new C,t=new C,i=new C,r=new C){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new C){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(go(e,r.x,s.x,a.x,o.x),go(e,r.y,s.y,a.y,o.y),go(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}lb.prototype.isCubicBezierCurve3=!0;class Vu extends An{constructor(e=new ye,t=new ye){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new ye){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new ye;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Vu.prototype.isLineCurve=!0;class AD extends An{constructor(e=new C,t=new C){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new C){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Mp extends An{constructor(e=new ye,t=new ye,i=new ye){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ye){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(mo(e,r.x,s.x,a.x),mo(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}Mp.prototype.isQuadraticBezierCurve=!0;class cb extends An{constructor(e=new C,t=new C,i=new C){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new C){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(mo(e,r.x,s.x,a.x),mo(e,r.y,s.y,a.y),mo(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}cb.prototype.isQuadraticBezierCurve3=!0;class Sp extends An{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new ye){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],c=r[a],u=r[a>r.length-2?r.length-1:a+1],f=r[a>r.length-3?r.length-1:a+2];return i.set(qv(o,l.x,c.x,u.x,f.x),qv(o,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ye().fromArray(r))}return this}}Sp.prototype.isSplineCurve=!0;var ub=Object.freeze({__proto__:null,ArcCurve:ab,CatmullRomCurve3:ob,CubicBezierCurve:wp,CubicBezierCurve3:lb,EllipseCurve:Hu,LineCurve:Vu,LineCurve3:AD,QuadraticBezierCurve:Mp,QuadraticBezierCurve3:cb,SplineCurve:Sp});class RD extends An{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Vu(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),c=l===0?0:1-a/l;return o.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a&&a.isEllipseCurve?e*2:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new ub[r.type]().fromJSON(r))}return this}}class qh extends RD{constructor(e){super(),this.type="Path",this.currentPoint=new ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Vu(this.currentPoint.clone(),new ye(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Mp(this.currentPoint.clone(),new ye(e,t),new ye(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new wp(this.currentPoint.clone(),new ye(e,t),new ye(i,r),new ye(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Sp(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const c=new Hu(e,t,i,r,s,a,o,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ml extends qh{constructor(e){super(e),this.uuid=En(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new qh().fromJSON(r))}return this}}const LD={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=fb(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,f,h,d;if(i&&(s=DD(n,e,s,t)),n.length>80*t){o=c=n[0],l=u=n[1];for(let g=t;g<r;g+=t)f=n[g],h=n[g+1],f<o&&(o=f),h<l&&(l=h),f>c&&(c=f),h>u&&(u=h);d=Math.max(c-o,u-l),d=d!==0?1/d:0}return Vo(s,a,t,o,l,d),a}};function fb(n,e,t,i,r){let s,a;if(r===jD(n,e,t,i)>0)for(s=e;s<t;s+=i)a=Xv(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=Xv(s,n[s],n[s+1],a);return a&&Gu(a,a.next)&&(Wo(a),a=a.next),a}function vr(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Gu(t,t.next)||_t(t.prev,t,t.next)===0)){if(Wo(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Vo(n,e,t,i,r,s,a){if(!n)return;!a&&s&&BD(n,i,r,s);let o=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?PD(n,i,r,s):CD(n)){e.push(l.i/t),e.push(n.i/t),e.push(c.i/t),Wo(n),n=c.next,o=c.next;continue}if(n=c,n===o){a?a===1?(n=ID(vr(n),e,t),Vo(n,e,t,i,r,s,2)):a===2&&ND(n,e,t,i,r,s):Vo(vr(n),e,t,i,r,s,1);break}}}function CD(n){const e=n.prev,t=n,i=n.next;if(_t(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(Bs(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&_t(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function PD(n,e,t,i){const r=n.prev,s=n,a=n.next;if(_t(r,s,a)>=0)return!1;const o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,c=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,u=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,f=Xh(o,l,e,t,i),h=Xh(c,u,e,t,i);let d=n.prevZ,g=n.nextZ;for(;d&&d.z>=f&&g&&g.z<=h;){if(d!==n.prev&&d!==n.next&&Bs(r.x,r.y,s.x,s.y,a.x,a.y,d.x,d.y)&&_t(d.prev,d,d.next)>=0||(d=d.prevZ,g!==n.prev&&g!==n.next&&Bs(r.x,r.y,s.x,s.y,a.x,a.y,g.x,g.y)&&_t(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;d&&d.z>=f;){if(d!==n.prev&&d!==n.next&&Bs(r.x,r.y,s.x,s.y,a.x,a.y,d.x,d.y)&&_t(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=h;){if(g!==n.prev&&g!==n.next&&Bs(r.x,r.y,s.x,s.y,a.x,a.y,g.x,g.y)&&_t(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function ID(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Gu(r,s)&&hb(r,i,i.next,s)&&Go(r,s)&&Go(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),Wo(i),Wo(i.next),i=n=s),i=i.next}while(i!==n);return vr(i)}function ND(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&VD(a,o)){let l=db(a,o);a=vr(a,a.next),l=vr(l,l.next),Vo(a,e,t,i,r,s),Vo(l,e,t,i,r,s);return}o=o.next}a=a.next}while(a!==n)}function DD(n,e,t,i){const r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,c=fb(n,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(HD(c));for(r.sort(OD),s=0;s<r.length;s++)FD(r[s],t),t=vr(t,t.next);return t}function OD(n,e){return n.x-e.x}function FD(n,e){if(e=kD(n,e),e){const t=db(e,n);vr(e,e.next),vr(t,t.next)}}function kD(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const h=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=i&&h>s){if(s=h,h===i){if(r===t.y)return t;if(r===t.next.y)return t.next}a=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!a)return null;if(i===s)return a;const o=a,l=a.x,c=a.y;let u=1/0,f;t=a;do i>=t.x&&t.x>=l&&i!==t.x&&Bs(r<c?i:s,r,l,c,r<c?s:i,r,t.x,t.y)&&(f=Math.abs(r-t.y)/(i-t.x),Go(t,n)&&(f<u||f===u&&(t.x>a.x||t.x===a.x&&UD(a,t)))&&(a=t,u=f)),t=t.next;while(t!==o);return a}function UD(n,e){return _t(n.prev,n,e.prev)<0&&_t(e.next,n,n.next)<0}function BD(n,e,t,i){let r=n;do r.z===null&&(r.z=Xh(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,zD(r)}function zD(n){let e,t,i,r,s,a,o,l,c=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<c&&(o++,i=i.nextZ,!!i);e++);for(l=c;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(a>1);return n}function Xh(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function HD(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Bs(n,e,t,i,r,s,a,o){return(r-a)*(e-o)-(n-a)*(s-o)>=0&&(n-a)*(i-o)-(t-a)*(e-o)>=0&&(t-a)*(s-o)-(r-a)*(i-o)>=0}function VD(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!GD(n,e)&&(Go(n,e)&&Go(e,n)&&WD(n,e)&&(_t(n.prev,n,e.prev)||_t(n,e.prev,e))||Gu(n,e)&&_t(n.prev,n,n.next)>0&&_t(e.prev,e,e.next)>0)}function _t(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Gu(n,e){return n.x===e.x&&n.y===e.y}function hb(n,e,t,i){const r=uc(_t(n,e,t)),s=uc(_t(n,e,i)),a=uc(_t(t,i,n)),o=uc(_t(t,i,e));return!!(r!==s&&a!==o||r===0&&cc(n,t,e)||s===0&&cc(n,i,e)||a===0&&cc(t,n,i)||o===0&&cc(t,e,i))}function cc(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function uc(n){return n>0?1:n<0?-1:0}function GD(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&hb(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Go(n,e){return _t(n.prev,n,n.next)<0?_t(n,e,n.next)>=0&&_t(n,n.prev,e)>=0:_t(n,e,n.prev)<0||_t(n,n.next,e)<0}function WD(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function db(n,e){const t=new Yh(n.i,n.x,n.y),i=new Yh(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Xv(n,e,t,i){const r=new Yh(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Wo(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Yh(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function jD(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class ar{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ar.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];Yv(e),Kv(i,e);let a=e.length;t.forEach(Yv);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,Kv(i,t[l]);const o=LD.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function Yv(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function Kv(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ta extends mt{constructor(e=new ml([new ye(.5,.5),new ye(-.5,.5),new ye(-.5,-.5),new ye(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];a(c)}this.setAttribute("position",new Bt(r,3)),this.setAttribute("uv",new Bt(s,2)),this.computeVertexNormals();function a(o){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1;let f=t.depth!==void 0?t.depth:1,h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,g=t.bevelSize!==void 0?t.bevelSize:d-.1,v=t.bevelOffset!==void 0?t.bevelOffset:0,y=t.bevelSegments!==void 0?t.bevelSegments:3;const p=t.extrudePath,m=t.UVGenerator!==void 0?t.UVGenerator:$D;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),f=t.amount);let _,w=!1,E,A,b,N;p&&(_=p.getSpacedPoints(u),w=!0,h=!1,E=p.computeFrenetFrames(u,!1),A=new C,b=new C,N=new C),h||(y=0,d=0,g=0,v=0);const K=o.extractPoints(c);let H=K.shape;const R=K.holes;if(!ar.isClockWise(H)){H=H.reverse();for(let Q=0,x=R.length;Q<x;Q++){const T=R[Q];ar.isClockWise(T)&&(R[Q]=T.reverse())}}const P=ar.triangulateShape(H,R),z=H;for(let Q=0,x=R.length;Q<x;Q++){const T=R[Q];H=H.concat(T)}function G(Q,x,T){return x||console.error("THREE.ExtrudeGeometry: vec does not exist"),x.clone().multiplyScalar(T).add(Q)}const W=H.length,V=P.length;function Y(Q,x,T){let O,B,M;const S=Q.x-x.x,k=Q.y-x.y,j=T.x-Q.x,$=T.y-Q.y,q=S*S+k*k,ue=S*$-k*j;if(Math.abs(ue)>Number.EPSILON){const de=Math.sqrt(q),ge=Math.sqrt(j*j+$*$),me=x.x-k/de,D=x.y+S/de,ve=T.x-$/ge,re=T.y+j/ge,be=((ve-me)*$-(re-D)*j)/(S*$-k*j);O=me+S*be-Q.x,B=D+k*be-Q.y;const I=O*O+B*B;if(I<=2)return new ye(O,B);M=Math.sqrt(I/2)}else{let de=!1;S>Number.EPSILON?j>Number.EPSILON&&(de=!0):S<-Number.EPSILON?j<-Number.EPSILON&&(de=!0):Math.sign(k)===Math.sign($)&&(de=!0),de?(O=-k,B=S,M=Math.sqrt(q)):(O=S,B=k,M=Math.sqrt(q/2))}return new ye(O/M,B/M)}const oe=[];for(let Q=0,x=z.length,T=x-1,O=Q+1;Q<x;Q++,T++,O++)T===x&&(T=0),O===x&&(O=0),oe[Q]=Y(z[Q],z[T],z[O]);const te=[];let ie,_e=oe.concat();for(let Q=0,x=R.length;Q<x;Q++){const T=R[Q];ie=[];for(let O=0,B=T.length,M=B-1,S=O+1;O<B;O++,M++,S++)M===B&&(M=0),S===B&&(S=0),ie[O]=Y(T[O],T[M],T[S]);te.push(ie),_e=_e.concat(ie)}for(let Q=0;Q<y;Q++){const x=Q/y,T=d*Math.cos(x*Math.PI/2),O=g*Math.sin(x*Math.PI/2)+v;for(let B=0,M=z.length;B<M;B++){const S=G(z[B],oe[B],O);U(S.x,S.y,-T)}for(let B=0,M=R.length;B<M;B++){const S=R[B];ie=te[B];for(let k=0,j=S.length;k<j;k++){const $=G(S[k],ie[k],O);U($.x,$.y,-T)}}}const le=g+v;for(let Q=0;Q<W;Q++){const x=h?G(H[Q],_e[Q],le):H[Q];w?(b.copy(E.normals[0]).multiplyScalar(x.x),A.copy(E.binormals[0]).multiplyScalar(x.y),N.copy(_[0]).add(b).add(A),U(N.x,N.y,N.z)):U(x.x,x.y,0)}for(let Q=1;Q<=u;Q++)for(let x=0;x<W;x++){const T=h?G(H[x],_e[x],le):H[x];w?(b.copy(E.normals[Q]).multiplyScalar(T.x),A.copy(E.binormals[Q]).multiplyScalar(T.y),N.copy(_[Q]).add(b).add(A),U(N.x,N.y,N.z)):U(T.x,T.y,f/u*Q)}for(let Q=y-1;Q>=0;Q--){const x=Q/y,T=d*Math.cos(x*Math.PI/2),O=g*Math.sin(x*Math.PI/2)+v;for(let B=0,M=z.length;B<M;B++){const S=G(z[B],oe[B],O);U(S.x,S.y,f+T)}for(let B=0,M=R.length;B<M;B++){const S=R[B];ie=te[B];for(let k=0,j=S.length;k<j;k++){const $=G(S[k],ie[k],O);w?U($.x,$.y+_[u-1].y,_[u-1].x+T):U($.x,$.y,f+T)}}}he(),Ee();function he(){const Q=r.length/3;if(h){let x=0,T=W*x;for(let O=0;O<V;O++){const B=P[O];ae(B[2]+T,B[1]+T,B[0]+T)}x=u+y*2,T=W*x;for(let O=0;O<V;O++){const B=P[O];ae(B[0]+T,B[1]+T,B[2]+T)}}else{for(let x=0;x<V;x++){const T=P[x];ae(T[2],T[1],T[0])}for(let x=0;x<V;x++){const T=P[x];ae(T[0]+W*u,T[1]+W*u,T[2]+W*u)}}i.addGroup(Q,r.length/3-Q,0)}function Ee(){const Q=r.length/3;let x=0;F(z,x),x+=z.length;for(let T=0,O=R.length;T<O;T++){const B=R[T];F(B,x),x+=B.length}i.addGroup(Q,r.length/3-Q,1)}function F(Q,x){let T=Q.length;for(;--T>=0;){const O=T;let B=T-1;B<0&&(B=Q.length-1);for(let M=0,S=u+y*2;M<S;M++){const k=W*M,j=W*(M+1),$=x+O+k,q=x+B+k,ue=x+B+j,de=x+O+j;X($,q,ue,de)}}}function U(Q,x,T){l.push(Q),l.push(x),l.push(T)}function ae(Q,x,T){ne(Q),ne(x),ne(T);const O=r.length/3,B=m.generateTopUV(i,r,O-3,O-2,O-1);we(B[0]),we(B[1]),we(B[2])}function X(Q,x,T,O){ne(Q),ne(x),ne(O),ne(x),ne(T),ne(O);const B=r.length/3,M=m.generateSideWallUV(i,r,B-6,B-3,B-2,B-1);we(M[0]),we(M[1]),we(M[3]),we(M[1]),we(M[2]),we(M[3])}function ne(Q){r.push(l[Q*3+0]),r.push(l[Q*3+1]),r.push(l[Q*3+2])}function we(Q){s.push(Q.x),s.push(Q.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return qD(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new ub[r.type]().fromJSON(r)),new Ta(i,e.options)}}const $D={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new ye(s,a),new ye(o,l),new ye(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],h=e[r*3],d=e[r*3+1],g=e[r*3+2],v=e[s*3],y=e[s*3+1],p=e[s*3+2];return Math.abs(o-u)<Math.abs(a-c)?[new ye(a,1-l),new ye(c,1-f),new ye(h,1-g),new ye(v,1-p)]:[new ye(o,1-l),new ye(u,1-f),new ye(d,1-g),new ye(y,1-p)]}};function qD(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ep extends mt{constructor(e=new ml([new ye(0,.5),new ye(-.5,-.5),new ye(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(o,l,u),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Bt(r,3)),this.setAttribute("normal",new Bt(s,3)),this.setAttribute("uv",new Bt(a,2));function c(u){const f=r.length/3,h=u.extractPoints(t);let d=h.shape;const g=h.holes;ar.isClockWise(d)===!1&&(d=d.reverse());for(let y=0,p=g.length;y<p;y++){const m=g[y];ar.isClockWise(m)===!0&&(g[y]=m.reverse())}const v=ar.triangulateShape(d,g);for(let y=0,p=g.length;y<p;y++){const m=g[y];d=d.concat(m)}for(let y=0,p=d.length;y<p;y++){const m=d[y];r.push(m.x,m.y,0),s.push(0,0,1),a.push(m.x,m.y)}for(let y=0,p=v.length;y<p;y++){const m=v[y],_=m[0]+f,w=m[1]+f,E=m[2]+f;i.push(_,w,E),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return XD(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new Ep(i,e.curveSegments)}}function XD(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class YD extends Dt{constructor(e){super(),this.type="ShadowMaterial",this.color=new Ae(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}YD.prototype.isShadowMaterial=!0;class gl extends Dt{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ae(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=os,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}gl.prototype.isMeshStandardMaterial=!0;class cs extends gl{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return en(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new Ae(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Ae(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ae(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}cs.prototype.isMeshPhysicalMaterial=!0;class KD extends Dt{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new Ae(16777215),this.specular=new Ae(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=os,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Iu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}KD.prototype.isMeshPhongMaterial=!0;class ZD extends Dt{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ae(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=os,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}ZD.prototype.isMeshToonMaterial=!0;class JD extends Dt{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=os,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}JD.prototype.isMeshNormalMaterial=!0;class QD extends Dt{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new Ae(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ae(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Iu,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}QD.prototype.isMeshLambertMaterial=!0;class eO extends Dt{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ae(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=os,this.normalScale=new ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}eO.prototype.isMeshMatcapMaterial=!0;class tO extends Ea{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}tO.prototype.isLineDashedMaterial=!0;const gt={arraySlice:function(n,e,t){return gt.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],h=[];for(let d=0;d<c.times.length;++d){const g=c.times[d]*r;if(!(g<t||g>=i)){f.push(c.times[d]);for(let v=0;v<u;++v)h.push(c.values[d*u+v])}}f.length!==0&&(c.times=gt.convertArray(f,c.times.constructor),c.values=gt.convertArray(h,c.values.constructor),a.push(c))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(p){return p.name===o.name&&p.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let h=0;const d=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const g=o.times.length-1;let v;if(s<=o.times[0]){const p=u,m=f-u;v=gt.arraySlice(o.values,p,m)}else if(s>=o.times[g]){const p=g*f+u,m=p+f-u;v=gt.arraySlice(o.values,p,m)}else{const p=o.createInterpolant(),m=u,_=f-u;p.evaluate(s),v=gt.arraySlice(p.resultBuffer,m,_)}l==="quaternion"&&new jt().fromArray(v).normalize().conjugate().toArray(v);const y=c.times.length;for(let p=0;p<y;++p){const m=p*d+h;if(l==="quaternion")jt.multiplyQuaternionsFlat(c.values,m,v,0,c.values,m);else{const _=d-h*2;for(let w=0;w<_;++w)c.values[m+w]-=v[w]}}}return n.blendMode=Tx,n}};class Li{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,s)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(r===void 0)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,s,e)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Li.prototype.beforeStart_=Li.prototype.copySampleValue_;Li.prototype.afterEnd_=Li.prototype.copySampleValue_;class nO extends Li{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ks,endingEnd:ks}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Us:s=e,o=2*t-i;break;case qc:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Us:a=e,l=2*i-t;break;case qc:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=a*u}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,g=(i-t)/(r-t),v=g*g,y=v*g,p=-h*y+2*h*v-h*g,m=(1+h)*y+(-1.5-2*h)*v+(-.5+h)*g+1,_=(-1-d)*y+(1.5+d)*v+.5*g,w=d*y-d*v;for(let E=0;E!==o;++E)s[E]=p*a[u+E]+m*a[c+E]+_*a[l+E]+w*a[f+E];return s}}class pb extends Li{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,c=l-o,u=(i-t)/(r-t),f=1-u;for(let h=0;h!==o;++h)s[h]=a[c+h]*f+a[l+h]*u;return s}}class iO extends Li{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ri{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gt.convertArray(t,this.TimeBufferType),this.values=gt.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:gt.convertArray(e.times,Array),values:gt.convertArray(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new iO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new pb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new nO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Bo:t=this.InterpolantFactoryMethodDiscrete;break;case la:t=this.InterpolantFactoryMethodLinear;break;case mf:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bo;case this.InterpolantFactoryMethodLinear:return la;case this.InterpolantFactoryMethodSmooth:return mf}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=gt.arraySlice(i,s,a),this.values=gt.arraySlice(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&gt.isTypedArray(r))for(let o=0,l=r.length;o!==l;++o){const c=r[o];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,c),e=!1;break}}return e}optimize(){const e=gt.arraySlice(this.times),t=gt.arraySlice(this.values),i=this.getValueSize(),r=this.getInterpolation()===mf,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const c=e[o],u=e[o+1];if(c!==u&&(o!==1||c!==e[0]))if(r)l=!0;else{const f=o*i,h=f-i,d=f+i;for(let g=0;g!==i;++g){const v=t[f+g];if(v!==t[h+g]||v!==t[d+g]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const f=o*i,h=a*i;for(let d=0;d!==i;++d)t[h+d]=t[f+d]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,c=0;c!==i;++c)t[l+c]=t[o+c];++a}return a!==e.length?(this.times=gt.arraySlice(e,0,a),this.values=gt.arraySlice(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=gt.arraySlice(this.times,0),t=gt.arraySlice(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ri.prototype.TimeBufferType=Float32Array;ri.prototype.ValueBufferType=Float32Array;ri.prototype.DefaultInterpolation=la;class Aa extends ri{}Aa.prototype.ValueTypeName="bool";Aa.prototype.ValueBufferType=Array;Aa.prototype.DefaultInterpolation=Bo;Aa.prototype.InterpolantFactoryMethodLinear=void 0;Aa.prototype.InterpolantFactoryMethodSmooth=void 0;class mb extends ri{}mb.prototype.ValueTypeName="color";class jo extends ri{}jo.prototype.ValueTypeName="number";class rO extends Li{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let c=e*o;for(let u=c+o;c!==u;c+=4)jt.slerpFlat(s,0,a,c-o,a,c,l);return s}}class ts extends ri{InterpolantFactoryMethodLinear(e){return new rO(this.times,this.values,this.getValueSize(),e)}}ts.prototype.ValueTypeName="quaternion";ts.prototype.DefaultInterpolation=la;ts.prototype.InterpolantFactoryMethodSmooth=void 0;class Ra extends ri{}Ra.prototype.ValueTypeName="string";Ra.prototype.ValueBufferType=Array;Ra.prototype.DefaultInterpolation=Bo;Ra.prototype.InterpolantFactoryMethodLinear=void 0;Ra.prototype.InterpolantFactoryMethodSmooth=void 0;class $o extends ri{}$o.prototype.ValueTypeName="vector";class Kh{constructor(e,t=-1,i,r=ap){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=En(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(aO(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(ri.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],c=[];l.push((o+s-1)%s,o,(o+1)%s),c.push(0,1,0);const u=gt.getKeyframeOrder(l);l=gt.sortedArray(l,1,u),c=gt.sortedArray(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),a.push(new jo(".morphTargetInfluences["+t[o].name+"]",l,c).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const c=e[o],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let h=r[f];h||(r[f]=h=[]),h.push(c)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,d,g,v){if(d.length!==0){const y=[],p=[];gt.flattenJSON(d,y,p,g),y.length!==0&&v.push(new f(h,y,p))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const h=c[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let g;for(g=0;g<h.length;g++)if(h[g].morphTargets)for(let v=0;v<h[g].morphTargets.length;v++)d[h[g].morphTargets[v]]=-1;for(const v in d){const y=[],p=[];for(let m=0;m!==h[g].morphTargets.length;++m){const _=h[g];y.push(_.time),p.push(_.morphTarget===v?1:0)}r.push(new jo(".morphTargetInfluence["+v+"]",y,p))}l=d.length*(a||1)}else{const d=".bones["+t[f].name+"]";i($o,d+".position",h,"pos",r),i(ts,d+".quaternion",h,"rot",r),i($o,d+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function sO(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return jo;case"vector":case"vector2":case"vector3":case"vector4":return $o;case"color":return mb;case"quaternion":return ts;case"bool":case"boolean":return Aa;case"string":return Ra}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function aO(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=sO(n.type);if(n.times===void 0){const t=[],i=[];gt.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const fa={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class oO{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){o++,s===!1&&r.onStart!==void 0&&r.onStart(u,a,o),s=!0},this.itemEnd=function(u){a++,r.onProgress!==void 0&&r.onProgress(u,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,h=c.length;f<h;f+=2){const d=c[f],g=c[f+1];if(d.global&&(d.lastIndex=0),d.test(u))return g}return null}}}const lO=new oO;class Ii{constructor(e){this.manager=e!==void 0?e:lO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const fi={};class Tp extends Ii{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=fa.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(fi[e]!==void 0){fi[e].push({onLoad:t,onProgress:i,onError:r});return}fi[e]=[],fi[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(a).then(o=>{if(o.status===200||o.status===0){o.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const l=fi[e],c=o.body.getReader(),u=o.headers.get("Content-Length"),f=u?parseInt(u):0,h=f!==0;let d=0;return new ReadableStream({start(g){v();function v(){c.read().then(({done:y,value:p})=>{if(y)g.close();else{d+=p.byteLength;const m=new ProgressEvent("progress",{lengthComputable:h,loaded:d,total:f});for(let _=0,w=l.length;_<w;_++){const E=l[_];E.onProgress&&E.onProgress(m)}g.enqueue(p),v()}})}}})}else throw Error(`fetch for "${o.url}" responded with ${o.status}: ${o.statusText}`)}).then(o=>{const l=new Response(o);switch(this.responseType){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(c=>new DOMParser().parseFromString(c,this.mimeType));case"json":return l.json();default:return l.text()}}).then(o=>{fa.add(e,o);const l=fi[e];delete fi[e];for(let c=0,u=l.length;c<u;c++){const f=l[c];f.onLoad&&f.onLoad(o)}this.manager.itemEnd(e)}).catch(o=>{const l=fi[e];delete fi[e];for(let c=0,u=l.length;c<u;c++){const f=l[c];f.onError&&f.onError(o)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class gb extends Ii{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=fa.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=Du("img");function l(){u(),fa.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){o.removeEventListener("load",l,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",c,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class cO extends Ii{constructor(e){super(e)}load(e,t,i,r){const s=new Ou,a=new gb(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(c){a.load(e[c],function(u){s.images[c]=u,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class vb extends Ii{constructor(e){super(e)}load(e,t,i,r){const s=new Ft,a=new gb(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class ei extends tt{constructor(e,t=1){super(),this.type="Light",this.color=new Ae(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}ei.prototype.isLight=!0;class uO extends ei{constructor(e,t,i){super(e,i),this.type="HemisphereLight",this.position.copy(tt.DefaultUp),this.updateMatrix(),this.groundColor=new Ae(t)}copy(e){return ei.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}uO.prototype.isHemisphereLight=!0;const Zv=new Ce,Jv=new C,Qv=new C;class Ap{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ye(512,512),this.map=null,this.mapPass=null,this.matrix=new Ce,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Fu,this._frameExtents=new ye(1,1),this._viewportCount=1,this._viewports=[new st(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Jv.setFromMatrixPosition(e.matrixWorld),t.position.copy(Jv),Qv.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Qv),t.updateMatrixWorld(),Zv.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Zv),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class yb extends Ap{constructor(){super(new qt(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,i=Ho*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}yb.prototype.isSpotLightShadow=!0;class _b extends ei{constructor(e,t,i=0,r=Math.PI/3,s=0,a=1){super(e,t),this.type="SpotLight",this.position.copy(tt.DefaultUp),this.updateMatrix(),this.target=new tt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.shadow=new yb}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}_b.prototype.isSpotLight=!0;const ey=new Ce,Ga=new C,Yf=new C;class xb extends Ap{constructor(){super(new qt(90,1,.5,500)),this._frameExtents=new ye(4,2),this._viewportCount=6,this._viewports=[new st(2,1,1,1),new st(0,1,1,1),new st(3,1,1,1),new st(1,1,1,1),new st(3,0,1,1),new st(1,0,1,1)],this._cubeDirections=[new C(1,0,0),new C(-1,0,0),new C(0,0,1),new C(0,0,-1),new C(0,1,0),new C(0,-1,0)],this._cubeUps=[new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,1,0),new C(0,0,1),new C(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Ga.setFromMatrixPosition(e.matrixWorld),i.position.copy(Ga),Yf.copy(i.position),Yf.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Yf),i.updateMatrixWorld(),r.makeTranslation(-Ga.x,-Ga.y,-Ga.z),ey.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ey)}}xb.prototype.isPointLightShadow=!0;class bb extends ei{constructor(e,t,i=0,r=1){super(e,t),this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new xb}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}bb.prototype.isPointLight=!0;class wb extends Ap{constructor(){super(new ku(-5,5,5,-5,.5,500))}}wb.prototype.isDirectionalLightShadow=!0;class Yc extends ei{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(tt.DefaultUp),this.updateMatrix(),this.target=new tt,this.shadow=new wb}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}Yc.prototype.isDirectionalLight=!0;class Mb extends ei{constructor(e,t){super(e,t),this.type="AmbientLight"}}Mb.prototype.isAmbientLight=!0;class fO extends ei{constructor(e,t,i=10,r=10){super(e,t),this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}fO.prototype.isRectAreaLight=!0;class Sb{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new C)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}Sb.prototype.isSphericalHarmonics3=!0;class Rp extends ei{constructor(e=new Sb,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}Rp.prototype.isLightProbe=!0;class or{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class hO extends mt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}hO.prototype.isInstancedBufferGeometry=!0;class Eb extends Ii{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=fa.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){fa.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}Eb.prototype.isImageBitmapLoader=!0;let fc;const dO={getContext:function(){return fc===void 0&&(fc=new(window.AudioContext||window.webkitAudioContext)),fc},setContext:function(n){fc=n}};class pO extends Ii{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Tp(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{const l=o.slice(0);dO.getContext().decodeAudioData(l,function(u){t(u)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class mO extends Rp{constructor(e,t,i=1){super(void 0,i);const r=new Ae().set(e),s=new Ae().set(t),a=new C(r.r,r.g,r.b),o=new C(s.r,s.g,s.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(l),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(c)}}mO.prototype.isHemisphereLightProbe=!0;class gO extends Rp{constructor(e,t=1){super(void 0,t);const i=new Ae().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}gO.prototype.isAmbientLightProbe=!0;class vO extends tt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class yO{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){jt.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;jt.multiplyQuaternionsFlat(e,a,e,t,e,i),jt.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const Lp="\\[\\]\\.:\\/",_O=new RegExp("["+Lp+"]","g"),Cp="[^"+Lp+"]",xO="[^"+Lp.replace("\\.","")+"]",bO=/((?:WC+[\/:])*)/.source.replace("WC",Cp),wO=/(WCOD+)?/.source.replace("WCOD",xO),MO=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Cp),SO=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Cp),EO=new RegExp("^"+bO+wO+MO+SO+"$"),TO=["material","materials","bones"];class AO{constructor(e,t,i){const r=i||et.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class et{constructor(e,t,i){this.path=t,this.parsedPath=i||et.parseTrackName(t),this.node=et.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new et.Composite(e,t,i):new et(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_O,"")}static parseTrackName(e){const t=EO.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);TO.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=et.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const a=e[r];if(a===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}et.Composite=AO;et.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};et.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};et.prototype.GetterByBindingType=[et.prototype._getValue_direct,et.prototype._getValue_array,et.prototype._getValue_arrayElement,et.prototype._getValue_toArray];et.prototype.SetterByBindingTypeAndVersioning=[[et.prototype._setValue_direct,et.prototype._setValue_direct_setNeedsUpdate,et.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[et.prototype._setValue_array,et.prototype._setValue_array_setNeedsUpdate,et.prototype._setValue_array_setMatrixWorldNeedsUpdate],[et.prototype._setValue_arrayElement,et.prototype._setValue_arrayElement_setNeedsUpdate,et.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[et.prototype._setValue_fromArray,et.prototype._setValue_fromArray_setNeedsUpdate,et.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class RO{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:ks,endingEnd:ks};for(let c=0;c!==a;++c){const u=s[c].createInterpolant(null);o[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=o2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,c=o.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/a,c[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;if(l<0||i===0)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case Tx:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(a),c[u].accumulateAdditive(o);break;case ap:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(a),c[u].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===l2;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===a2){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Us,r.endingEnd=Us):(e?r.endingStart=this.zeroSlopeAtStart?Us:ks:r.endingStart=qc,t?r.endingEnd=this.zeroSlopeAtEnd?Us:ks:r.endingEnd=qc)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}class LO extends Sr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const h=r[f],d=h.name;let g=u[d];if(g!==void 0)a[f]=g;else{if(g=a[f],g!==void 0){g._cacheIndex===null&&(++g.referenceCount,this._addInactiveBinding(g,l,d));continue}const v=t&&t._propertyBindings[f].binding.parsedPath;g=new yO(et.create(i,d,v),h.ValueTypeName,h.getValueSize()),++g.referenceCount,this._addInactiveBinding(g,l,d),a[f]=g}o[f].resultBuffer=g.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=o.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new pb(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Kh.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let c=null;if(i===void 0&&(a!==null?i=a.blendMode:i=ap),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],a===null&&(a=c._clip)}if(a===null)return null;const u=new RO(this,a,t,i);return this._bindAction(u,c),this._addInactiveAction(u,o,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Kh.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)o[c].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const c=a[o];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}LO.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class CO extends Sa{constructor(e,t,i=1){super(e,t),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}CO.prototype.isInstancedInterleavedBuffer=!0;class ty{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(en(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const ji=new C,hc=new Ce,Kf=new Ce;class PO extends zu{constructor(e){const t=Tb(e),i=new mt,r=[],s=[],a=new Ae(0,0,1),o=new Ae(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new Bt(r,3)),i.setAttribute("color",new Bt(s,3));const l=new Ea({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Kf.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(hc.multiplyMatrices(Kf,o.matrixWorld),ji.setFromMatrixPosition(hc),r.setXYZ(a,ji.x,ji.y,ji.z),hc.multiplyMatrices(Kf,o.parent.matrixWorld),ji.setFromMatrixPosition(hc),r.setXYZ(a+1,ji.x,ji.y,ji.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function Tb(n){const e=[];n&&n.isBone&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,Tb(n.children[t]));return e}class Ab extends zu{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ae(i),r=new Ae(r);const s=t/2,a=e/t,o=e/2,l=[],c=[];for(let h=0,d=0,g=-o;h<=t;h++,g+=a){l.push(-o,0,g,o,0,g),l.push(g,0,-o,g,0,o);const v=h===s?i:r;v.toArray(c,d),d+=3,v.toArray(c,d),d+=3,v.toArray(c,d),d+=3,v.toArray(c,d),d+=3}const u=new mt;u.setAttribute("position",new Bt(l,3)),u.setAttribute("color",new Bt(c,3));const f=new Ea({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}}const IO=new Float32Array(1);new Int32Array(IO.buffer);An.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(An.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};qh.prototype.fromPoints=function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)};Ab.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};PO.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Ii.prototype.extractUrlBase=function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),or.extractUrlBase(n)};Ii.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};mn.prototype.center=function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)};mn.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};mn.prototype.isIntersectionBox=function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};mn.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};mn.prototype.size=function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)};ls.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Fu.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};Wt.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Wt.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Wt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};Wt.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)};Wt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};Wt.prototype.getInverse=function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};Ce.prototype.extractPosition=function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)};Ce.prototype.flattenToArrayOffset=function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)};Ce.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new C().setFromMatrixColumn(this,3)};Ce.prototype.setRotationFromQuaternion=function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)};Ce.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};Ce.prototype.multiplyVector3=function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ce.prototype.multiplyVector4=function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ce.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};Ce.prototype.rotateAxis=function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)};Ce.prototype.crossVector=function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ce.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};Ce.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};Ce.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};Ce.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};Ce.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};Ce.prototype.applyToBufferAttribute=function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)};Ce.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};Ce.prototype.makeFrustum=function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)};Ce.prototype.getInverse=function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()};mi.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};jt.prototype.multiplyVector3=function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)};jt.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};ba.prototype.isIntersectionBox=function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)};ba.prototype.isIntersectionPlane=function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)};ba.prototype.isIntersectionSphere=function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)};Nt.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};Nt.prototype.barycoordFromPoint=function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)};Nt.prototype.midpoint=function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)};Nt.prototypenormal=function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)};Nt.prototype.plane=function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)};Nt.barycoordFromPoint=function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Nt.getBarycoord(n,e,t,i,r)};Nt.normal=function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Nt.getNormal(n,e,t,i)};ml.prototype.extractAllPoints=function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)};ml.prototype.extrude=function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ta(this,n)};ml.prototype.makeGeometry=function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ep(this,n)};ye.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};ye.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};ye.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};C.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};C.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};C.prototype.getPositionFromMatrix=function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)};C.prototype.getScaleFromMatrix=function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)};C.prototype.getColumnFromMatrix=function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)};C.prototype.applyProjection=function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)};C.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};C.prototype.distanceToManhattan=function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)};C.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};st.prototype.fromAttribute=function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)};st.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};tt.prototype.getChildByName=function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)};tt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};tt.prototype.translate=function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)};tt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};tt.prototype.applyMatrix=function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(tt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});tn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(tn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),c2},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});vp.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};qt.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(ei.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(Et.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Xc},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Xc)}}});Et.prototype.setDynamic=function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Xc:zo),this};Et.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Et.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};mt.prototype.addIndex=function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)};mt.prototype.addAttribute=function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new Et(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)};mt.prototype.addDrawCall=function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)};mt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};mt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};mt.prototype.removeAttribute=function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)};mt.prototype.applyMatrix=function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)};Object.defineProperties(mt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Sa.prototype.setDynamic=function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?Xc:zo),this};Sa.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Ta.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Ta.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Ta.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};gp.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Dt.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ae}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===bx}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(es.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});rt.prototype.clearTarget=function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)};rt.prototype.animate=function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)};rt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};rt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};rt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};rt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};rt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};rt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};rt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};rt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};rt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};rt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};rt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};rt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};rt.prototype.enableScissorTest=function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)};rt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};rt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};rt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};rt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};rt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};rt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};rt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};rt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};rt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};rt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(rt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?Qn:Zt}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(Jx.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Yn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});vO.prototype.load=function(n){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new pO().load(n,function(i){e.setBuffer(i)}),this};fp.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};fp.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};xa.crossOrigin=void 0;xa.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new vb;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};xa.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new cO;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};xa.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};xa.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:_x}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=_x);class NO extends Ii{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new kO(t)}),this.register(function(t){return new GO(t)}),this.register(function(t){return new WO(t)}),this.register(function(t){return new UO(t)}),this.register(function(t){return new BO(t)}),this.register(function(t){return new zO(t)}),this.register(function(t){return new HO(t)}),this.register(function(t){return new VO(t)}),this.register(function(t){return new OO(t)}),this.register(function(t){return new jO(t)})}load(e,t,i,r){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=or.extractUrlBase(e),this.manager.itemStart(e);const o=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Tp(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,a,function(u){t(u),s.manager.itemEnd(e)},o)}catch(u){o(u)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={};if(typeof e=="string")s=e;else if(or.decodeText(new Uint8Array(e,0,4))===Rb){try{a[$e.KHR_BINARY_GLTF]=new $O(e)}catch(f){r&&r(f);return}s=a[$e.KHR_BINARY_GLTF].content}else s=or.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new rF(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const f=this.pluginCallbacks[u](c);o[f.name]=f,a[f.name]=!0}if(l.extensionsUsed)for(let u=0;u<l.extensionsUsed.length;++u){const f=l.extensionsUsed[u],h=l.extensionsRequired||[];switch(f){case $e.KHR_MATERIALS_UNLIT:a[f]=new FO;break;case $e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[f]=new YO;break;case $e.KHR_DRACO_MESH_COMPRESSION:a[f]=new qO(l,this.dracoLoader);break;case $e.KHR_TEXTURE_TRANSFORM:a[f]=new XO;break;case $e.KHR_MESH_QUANTIZATION:a[f]=new KO;break;default:h.indexOf(f)>=0&&o[f]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}c.setExtensions(a),c.setPlugins(o),c.parse(i,r)}}function DO(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const $e={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class OO{constructor(e){this.parser=e,this.name=$e.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ae(16777215);l.color!==void 0&&u.fromArray(l.color);const f=l.range!==void 0?l.range:0;switch(l.type){case"directional":c=new Yc(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new bb(u),c.distance=f;break;case"spot":c=new _b(u),c.distance=f,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,l.intensity!==void 0&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}class FO{constructor(){this.name=$e.KHR_MATERIALS_UNLIT}getMaterialType(){return Qi}extendParams(e,t,i){const r=[];e.color=new Ae(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(r)}}class kO{constructor(e){this.parser=e,this.name=$e.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new ye(o,o)}return Promise.all(s)}}class UO{constructor(e){this.parser=e,this.name=$e.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ae(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class BO{constructor(e){this.parser=e,this.name=$e.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class zO{constructor(e){this.parser=e,this.name=$e.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Ae(o[0],o[1],o[2]),Promise.all(s)}}class HO{constructor(e){this.parser=e,this.name=$e.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class VO{constructor(e){this.parser=e,this.name=$e.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:cs}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Ae(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture).then(function(l){l.encoding=Qn})),Promise.all(s)}}class GO{constructor(e){this.parser=e,this.name=$e.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=i.images[s.source],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a,o)}}class WO{constructor(e){this.parser=e,this.name=$e.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const c=i.options.manager.getHandler(o.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class jO{constructor(e){this.name=$e.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,a.ready]).then(function(o){const l=r.byteOffset||0,c=r.byteLength||0,u=r.count,f=r.byteStride,h=new ArrayBuffer(u*f),d=new Uint8Array(o[0],l,c);return a.decodeGltfBuffer(new Uint8Array(h),u,f,d,r.mode,r.filter),h})}else return null}}const Rb="glTF",Wa=12,ny={JSON:1313821514,BIN:5130562};class $O{constructor(e){this.name=$e.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Wa);if(this.header={magic:or.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Rb)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-Wa,r=new DataView(e,Wa);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===ny.JSON){const l=new Uint8Array(e,Wa+s,a);this.content=or.decodeText(l)}else if(o===ny.BIN){const l=Wa+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class qO{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=$e.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},c={};for(const u in a){const f=Jh[u]||u.toLowerCase();o[f]=a[u]}for(const u in e.attributes){const f=Jh[u]||u.toLowerCase();if(a[u]!==void 0){const h=i.accessors[e.attributes[u]],d=qo[h.componentType];c[f]=d,l[f]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(f){r.decodeDracoFile(u,function(h){for(const d in h.attributes){const g=h.attributes[d],v=l[d];v!==void 0&&(g.normalized=v)}f(h)},o,c)})})}}class XO{constructor(){this.name=$e.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Zh extends gl{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	texelSpecular = sRGBToLinear( texelSpecular );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),o={specular:{value:new Ae().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(l){for(const c in o)l.uniforms[c]=o[c];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(l){o.specular.value=l}},specularMap:{get:function(){return o.specularMap.value},set:function(l){o.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(l){o.glossiness.value=l}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(l){o.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class YO{constructor(){this.name=$e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return Zh}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new Ae(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new Ae(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new Ae(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const a=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",a)),s.push(i.assignTexture(e,"specularMap",a))}return Promise.all(s)}createMaterial(e){const t=new Zh(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=os,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class KO{constructor(){this.name=$e.KHR_MESH_QUANTIZATION}}class ns extends Li{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}}ns.prototype.beforeStart_=ns.prototype.copySampleValue_;ns.prototype.afterEnd_=ns.prototype.copySampleValue_;ns.prototype.interpolate_=function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=a*2,l=a*3,c=i-e,u=(t-e)/c,f=u*u,h=f*u,d=n*l,g=d-l,v=-2*h+3*f,y=h-f,p=1-v,m=y-f+u;for(let _=0;_!==a;_++){const w=s[g+_+a],E=s[g+_+o]*c,A=s[d+_+a],b=s[d+_]*c;r[_]=p*w+m*E+v*A+y*b}return r};const ZO=new jt;class JO extends ns{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return ZO.fromArray(s).normalize().toArray(s),s}}const hi={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},qo={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},iy={9728:It,9729:un,9984:Hh,9985:Ex,9986:Vh,9987:_a},ry={33071:ln,33648:jc,10497:oa},sy={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jh={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},$i={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},QO={CUBICSPLINE:void 0,LINEAR:la,STEP:Bo},Zf={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function eF(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new gl({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:aa})),n.DefaultMaterial}function ja(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function kr(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function tF(n,e,t){let i=!1,r=!1;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(c.POSITION!==void 0&&(i=!0),c.NORMAL!==void 0&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(n);const s=[],a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o];if(i){const u=c.POSITION!==void 0?t.getDependency("accessor",c.POSITION):n.attributes.position;s.push(u)}if(r){const u=c.NORMAL!==void 0?t.getDependency("accessor",c.NORMAL):n.attributes.normal;a.push(u)}}return Promise.all([Promise.all(s),Promise.all(a)]).then(function(o){const l=o[0],c=o[1];return i&&(n.morphAttributes.position=l),r&&(n.morphAttributes.normal=c),n.morphTargetsRelative=!0,n})}function nF(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function iF(n){const e=n.extensions&&n.extensions[$e.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+ay(e.attributes):t=n.indices+":"+ay(n.attributes)+":"+n.mode,t}function ay(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function Qh(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class rF{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new DO,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},typeof createImageBitmap<"u"&&/Firefox/.test(navigator.userAgent)===!1?this.textureLoader=new Eb(this.options.manager):this.textureLoader=new vb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Tp(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};ja(s,o,r),kr(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[c,u]of a.children.entries())s(u,o.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[$e.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(or.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=sy[r.type],c=qo[r.componentType],u=c.BYTES_PER_ELEMENT,f=u*l,h=r.byteOffset||0,d=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let v,y;if(d&&d!==f){const p=Math.floor(h/d),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+p+":"+r.count;let _=t.cache.get(m);_||(v=new c(o,p*d,r.count*d/u),_=new Sa(v,d/u),t.cache.add(m,_)),y=new ua(_,l,h%d/u,g)}else o===null?v=new c(r.count*l):v=new c(o,h,r.count*l),y=new Et(v,l,g);if(r.sparse!==void 0){const p=sy.SCALAR,m=qo[r.sparse.indices.componentType],_=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,E=new m(a[1],_,r.sparse.count*p),A=new c(a[2],w,r.sparse.count*l);o!==null&&(y=new Et(y.array.slice(),y.itemSize,y.normalized));for(let b=0,N=E.length;b<N;b++){const K=E[b];if(y.setX(K,A[b*l]),l>=2&&y.setY(K,A[b*l+1]),l>=3&&y.setZ(K,A[b*l+2]),l>=4&&y.setW(K,A[b*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,i=this.options,r=t.textures[e],s=t.images[r.source];let a=this.textureLoader;if(s.uri){const o=i.manager.getHandler(s.uri);o!==null&&(a=o)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,a=this.options,o=s.textures[e],l=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=self.URL||self.webkitURL;let u=t.uri||"",f=!1;if(t.bufferView!==void 0)u=r.getDependency("bufferView",t.bufferView).then(function(d){f=!0;const g=new Blob([d],{type:t.mimeType});return u=c.createObjectURL(g),u});else if(t.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const h=Promise.resolve(u).then(function(d){return new Promise(function(g,v){let y=g;i.isImageBitmapLoader===!0&&(y=function(p){const m=new Ft(p);m.needsUpdate=!0,g(m)}),i.load(or.resolveURL(d,a.path),y,void 0,v)})}).then(function(d){f===!0&&c.revokeObjectURL(u),d.flipY=!1,o.name&&(d.name=o.name);const v=(s.samplers||{})[o.sampler]||{};return d.magFilter=iy[v.magFilter]||un,d.minFilter=iy[v.minFilter]||_a,d.wrapS=ry[v.wrapS]||oa,d.wrapT=ry[v.wrapT]||oa,r.associations.set(d,{textures:e}),d}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",u),null});return this.textureCache[l]=h,h}assignTexture(e,t,i){const r=this;return this.getDependency("texture",i.index).then(function(s){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),r.extensions[$e.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[$e.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const o=r.associations.get(s);s=r.extensions[$e.KHR_TEXTURE_TRANSFORM].extendTexture(s,a),r.associations.set(s,o)}}return e[t]=s,s})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new xp,Dt.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Ea,Dt.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(o,l)),i=l}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(o+="specular-glossiness:"),r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return gl}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},l=s.extensions||{},c=[];if(l[$e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const f=r[$e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=f.getMaterialType(),c.push(f.extendParams(o,s,t))}else if(l[$e.KHR_MATERIALS_UNLIT]){const f=r[$e.KHR_MATERIALS_UNLIT];a=f.getMaterialType(),c.push(f.extendParams(o,s,t))}else{const f=s.pbrMetallicRoughness||{};if(o.color=new Ae(1,1,1),o.opacity=1,Array.isArray(f.baseColorFactor)){const h=f.baseColorFactor;o.color.fromArray(h),o.opacity=h[3]}f.baseColorTexture!==void 0&&c.push(t.assignTexture(o,"map",f.baseColorTexture)),o.metalness=f.metallicFactor!==void 0?f.metallicFactor:1,o.roughness=f.roughnessFactor!==void 0?f.roughnessFactor:1,f.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(o,"metalnessMap",f.metallicRoughnessTexture)),c.push(t.assignTexture(o,"roughnessMap",f.metallicRoughnessTexture))),a=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=Qr);const u=s.alphaMode||Zf.OPAQUE;if(u===Zf.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.format=Xr,o.transparent=!1,u===Zf.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Qi&&(c.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new ye(1,1),s.normalTexture.scale!==void 0)){const f=s.normalTexture.scale;o.normalScale.set(f,f)}return s.occlusionTexture!==void 0&&a!==Qi&&(c.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Qi&&(o.emissive=new Ae().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==Qi&&c.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture)),Promise.all(c).then(function(){let f;return a===Zh?f=r[$e.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):f=new a(o),s.name&&(f.name=s.name),f.map&&(f.map.encoding=Qn),f.emissiveMap&&(f.emissiveMap.encoding=Qn),kr(f,s),t.associations.set(f,{materials:e}),s.extensions&&ja(r,f,s),f})}createUniqueName(e){const t=et.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[$e.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return oy(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=iF(c),f=r[u];if(f)a.push(f.promise);else{let h;c.extensions&&c.extensions[$e.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=oy(new mt,c,t),r[u]={primitive:c,promise:h},a.push(h)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let l=0,c=a.length;l<c;l++){const u=a[l].material===void 0?eF(this.cache):this.getDependency("material",a[l].material);o.push(u)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],f=[];for(let d=0,g=u.length;d<g;d++){const v=u[d],y=a[d];let p;const m=c[d];if(y.mode===hi.TRIANGLES||y.mode===hi.TRIANGLE_STRIP||y.mode===hi.TRIANGLE_FAN||y.mode===void 0)p=s.isSkinnedMesh===!0?new vp(v,m):new tn(v,m),p.isSkinnedMesh===!0&&!p.geometry.attributes.skinWeight.normalized&&p.normalizeSkinWeights(),y.mode===hi.TRIANGLE_STRIP?p.geometry=ly(p.geometry,u2):y.mode===hi.TRIANGLE_FAN&&(p.geometry=ly(p.geometry,Ax));else if(y.mode===hi.LINES)p=new zu(v,m);else if(y.mode===hi.LINE_STRIP)p=new Bu(v,m);else if(y.mode===hi.LINE_LOOP)p=new ib(v,m);else if(y.mode===hi.POINTS)p=new rb(v,m);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);Object.keys(p.geometry.morphAttributes).length>0&&nF(p,s),p.name=t.createUniqueName(s.name||"mesh_"+e),kr(p,s),y.extensions&&ja(r,p,y),t.assignFinalMaterial(p),f.push(p)}for(let d=0,g=f.length;d<g;d++)t.associations.set(f[d],{meshes:e,primitives:d});if(f.length===1)return f[0];const h=new er;t.associations.set(h,{meshes:e});for(let d=0,g=f.length;d<g;d++)h.add(f[d]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new qt(C2.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new ku(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),kr(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],a=[],o=[],l=[];for(let c=0,u=i.channels.length;c<u;c++){const f=i.channels[c],h=i.samplers[f.sampler],d=f.target,g=d.node!==void 0?d.node:d.id,v=i.parameters!==void 0?i.parameters[h.input]:h.input,y=i.parameters!==void 0?i.parameters[h.output]:h.output;r.push(this.getDependency("node",g)),s.push(this.getDependency("accessor",v)),a.push(this.getDependency("accessor",y)),o.push(h),l.push(d)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(c){const u=c[0],f=c[1],h=c[2],d=c[3],g=c[4],v=[];for(let p=0,m=u.length;p<m;p++){const _=u[p],w=f[p],E=h[p],A=d[p],b=g[p];if(_===void 0)continue;_.updateMatrix(),_.matrixAutoUpdate=!0;let N;switch($i[b.path]){case $i.weights:N=jo;break;case $i.rotation:N=ts;break;case $i.position:case $i.scale:default:N=$o;break}const K=_.name?_.name:_.uuid,H=A.interpolation!==void 0?QO[A.interpolation]:la,R=[];$i[b.path]===$i.weights?_.traverse(function(P){P.isMesh===!0&&P.morphTargetInfluences&&R.push(P.name?P.name:P.uuid)}):R.push(K);let J=E.array;if(E.normalized){const P=Qh(J.constructor),z=new Float32Array(J.length);for(let G=0,W=J.length;G<W;G++)z[G]=J[G]*P;J=z}for(let P=0,z=R.length;P<z;P++){const G=new N(R[P]+"."+$i[b.path],w.array,J,H);A.interpolation==="CUBICSPLINE"&&(G.createInterpolant=function(V){const Y=this instanceof ts?JO:ns;return new Y(this.times,this.values,this.getValueSize()/3,V)},G.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),v.push(G)}}const y=i.name?i.name:"animation_"+e;return new Kh(y,void 0,v)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,c=r.weights.length;l<c;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,i=this.extensions,r=this,s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"";return function(){const o=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){o.push(c)}),Promise.all(o)}().then(function(o){let l;if(s.isBone===!0?l=new yp:o.length>1?l=new er:o.length===1?l=o[0]:l=new tt,l!==o[0])for(let c=0,u=o.length;c<u;c++)l.add(o[c]);if(s.name&&(l.userData.name=s.name,l.name=a),kr(l,s),s.extensions&&ja(i,l,s),s.matrix!==void 0){const c=new Ce;c.fromArray(s.matrix),l.applyMatrix4(c)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,a=new er;r.name&&(a.name=s.createUniqueName(r.name)),kr(a,r),r.extensions&&ja(i,a,r);const o=r.nodes||[],l=[];for(let c=0,u=o.length;c<u;c++)l.push(Lb(o[c],a,t,s));return Promise.all(l).then(function(){const c=u=>{const f=new Map;for(const[h,d]of s.associations)(h instanceof Dt||h instanceof Ft)&&f.set(h,d);return u.traverse(h=>{const d=s.associations.get(h);d!=null&&f.set(h,d)}),f};return s.associations=c(a),a})}}function Lb(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(r.skin===void 0)return s;let a;return i.getDependency("skin",r.skin).then(function(o){a=o;const l=[];for(let c=0,u=a.joints.length;c<u;c++)l.push(i.getDependency("node",a.joints[c]));return Promise.all(l)}).then(function(o){return s.traverse(function(l){if(!l.isMesh)return;const c=[],u=[];for(let f=0,h=o.length;f<h;f++){const d=o[f];if(d){c.push(d);const g=new Ce;a.inverseBindMatrices!==void 0&&g.fromArray(a.inverseBindMatrices.array,f*16),u.push(g)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',a.joints[f])}l.bind(new _p(c,u),l.matrixWorld)}),s})}).then(function(s){e.add(s);const a=[];if(r.children){const o=r.children;for(let l=0,c=o.length;l<c;l++){const u=o[l];a.push(Lb(u,s,t,i))}}return Promise.all(a)})}function sF(n,e,t){const i=e.attributes,r=new mn;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,c=o.max;if(l!==void 0&&c!==void 0){if(r.set(new C(l[0],l[1],l[2]),new C(c[0],c[1],c[2])),o.normalized){const u=Qh(qo[o.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new C,l=new C;for(let c=0,u=s.length;c<u;c++){const f=s[c];if(f.POSITION!==void 0){const h=t.json.accessors[f.POSITION],d=h.min,g=h.max;if(d!==void 0&&g!==void 0){if(l.setX(Math.max(Math.abs(d[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(d[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(d[2]),Math.abs(g[2]))),h.normalized){const v=Qh(qo[h.componentType]);l.multiplyScalar(v)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new ls;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function oy(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in i){const o=Jh[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return kr(n,e),sF(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?tF(n,e.targets,t):n})}function ly(n,e){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===Ax)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const cy={type:"change"},Jf={type:"start"},Qf={type:"end"};class aF extends Sr{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new C,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:pi.ROTATE,MIDDLE:pi.DOLLY,RIGHT:pi.PAN},this.touches={ONE:us.ROTATE,TWO:us.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(I){I.addEventListener("keydown",q),this._domElementKeyEvents=I},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(cy),i.update(),s=r.NONE},this.update=function(){const I=new C,xe=new jt().setFromUnitVectors(e.up,new C(0,1,0)),Ve=xe.clone().invert(),He=new C,yt=new jt,Ue=2*Math.PI;return function(){const Ht=i.object.position;I.copy(Ht).sub(i.target),I.applyQuaternion(xe),o.setFromVector3(I),i.autoRotate&&s===r.NONE&&K(b()),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let Rn=i.minAzimuthAngle,gn=i.maxAzimuthAngle;return isFinite(Rn)&&isFinite(gn)&&(Rn<-Math.PI?Rn+=Ue:Rn>Math.PI&&(Rn-=Ue),gn<-Math.PI?gn+=Ue:gn>Math.PI&&(gn-=Ue),Rn<=gn?o.theta=Math.max(Rn,Math.min(gn,o.theta)):o.theta=o.theta>(Rn+gn)/2?Math.max(Rn,o.theta):Math.min(gn,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=c,o.radius=Math.max(i.minDistance,Math.min(i.maxDistance,o.radius)),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),I.setFromSpherical(o),I.applyQuaternion(Ve),Ht.copy(i.target).add(I),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0)),c=1,f||He.distanceToSquared(i.object.position)>a||8*(1-yt.dot(i.object.quaternion))>a?(i.dispatchEvent(cy),He.copy(i.object.position),yt.copy(i.object.quaternion),f=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",me),i.domElement.removeEventListener("pointerdown",T),i.domElement.removeEventListener("pointercancel",M),i.domElement.removeEventListener("wheel",$),i.domElement.removeEventListener("pointermove",O),i.domElement.removeEventListener("pointerup",B),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",q)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,o=new ty,l=new ty;let c=1;const u=new C;let f=!1;const h=new ye,d=new ye,g=new ye,v=new ye,y=new ye,p=new ye,m=new ye,_=new ye,w=new ye,E=[],A={};function b(){return 2*Math.PI/60/60*i.autoRotateSpeed}function N(){return Math.pow(.95,i.zoomSpeed)}function K(I){l.theta-=I}function H(I){l.phi-=I}const R=function(){const I=new C;return function(Ve,He){I.setFromMatrixColumn(He,0),I.multiplyScalar(-Ve),u.add(I)}}(),J=function(){const I=new C;return function(Ve,He){i.screenSpacePanning===!0?I.setFromMatrixColumn(He,1):(I.setFromMatrixColumn(He,0),I.crossVectors(i.object.up,I)),I.multiplyScalar(Ve),u.add(I)}}(),P=function(){const I=new C;return function(Ve,He){const yt=i.domElement;if(i.object.isPerspectiveCamera){const Ue=i.object.position;I.copy(Ue).sub(i.target);let ct=I.length();ct*=Math.tan(i.object.fov/2*Math.PI/180),R(2*Ve*ct/yt.clientHeight,i.object.matrix),J(2*He*ct/yt.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(R(Ve*(i.object.right-i.object.left)/i.object.zoom/yt.clientWidth,i.object.matrix),J(He*(i.object.top-i.object.bottom)/i.object.zoom/yt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function z(I){i.object.isPerspectiveCamera?c/=I:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*I)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(I){i.object.isPerspectiveCamera?c*=I:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/I)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function W(I){h.set(I.clientX,I.clientY)}function V(I){m.set(I.clientX,I.clientY)}function Y(I){v.set(I.clientX,I.clientY)}function oe(I){d.set(I.clientX,I.clientY),g.subVectors(d,h).multiplyScalar(i.rotateSpeed);const xe=i.domElement;K(2*Math.PI*g.x/xe.clientHeight),H(2*Math.PI*g.y/xe.clientHeight),h.copy(d),i.update()}function te(I){_.set(I.clientX,I.clientY),w.subVectors(_,m),w.y>0?z(N()):w.y<0&&G(N()),m.copy(_),i.update()}function ie(I){y.set(I.clientX,I.clientY),p.subVectors(y,v).multiplyScalar(i.panSpeed),P(p.x,p.y),v.copy(y),i.update()}function _e(I){I.deltaY<0?G(N()):I.deltaY>0&&z(N()),i.update()}function le(I){let xe=!1;switch(I.code){case i.keys.UP:P(0,i.keyPanSpeed),xe=!0;break;case i.keys.BOTTOM:P(0,-i.keyPanSpeed),xe=!0;break;case i.keys.LEFT:P(i.keyPanSpeed,0),xe=!0;break;case i.keys.RIGHT:P(-i.keyPanSpeed,0),xe=!0;break}xe&&(I.preventDefault(),i.update())}function he(){if(E.length===1)h.set(E[0].pageX,E[0].pageY);else{const I=.5*(E[0].pageX+E[1].pageX),xe=.5*(E[0].pageY+E[1].pageY);h.set(I,xe)}}function Ee(){if(E.length===1)v.set(E[0].pageX,E[0].pageY);else{const I=.5*(E[0].pageX+E[1].pageX),xe=.5*(E[0].pageY+E[1].pageY);v.set(I,xe)}}function F(){const I=E[0].pageX-E[1].pageX,xe=E[0].pageY-E[1].pageY,Ve=Math.sqrt(I*I+xe*xe);m.set(0,Ve)}function U(){i.enableZoom&&F(),i.enablePan&&Ee()}function ae(){i.enableZoom&&F(),i.enableRotate&&he()}function X(I){if(E.length==1)d.set(I.pageX,I.pageY);else{const Ve=be(I),He=.5*(I.pageX+Ve.x),yt=.5*(I.pageY+Ve.y);d.set(He,yt)}g.subVectors(d,h).multiplyScalar(i.rotateSpeed);const xe=i.domElement;K(2*Math.PI*g.x/xe.clientHeight),H(2*Math.PI*g.y/xe.clientHeight),h.copy(d)}function ne(I){if(E.length===1)y.set(I.pageX,I.pageY);else{const xe=be(I),Ve=.5*(I.pageX+xe.x),He=.5*(I.pageY+xe.y);y.set(Ve,He)}p.subVectors(y,v).multiplyScalar(i.panSpeed),P(p.x,p.y),v.copy(y)}function we(I){const xe=be(I),Ve=I.pageX-xe.x,He=I.pageY-xe.y,yt=Math.sqrt(Ve*Ve+He*He);_.set(0,yt),w.set(0,Math.pow(_.y/m.y,i.zoomSpeed)),z(w.y),m.copy(_)}function Q(I){i.enableZoom&&we(I),i.enablePan&&ne(I)}function x(I){i.enableZoom&&we(I),i.enableRotate&&X(I)}function T(I){i.enabled!==!1&&(E.length===0&&(i.domElement.setPointerCapture(I.pointerId),i.domElement.addEventListener("pointermove",O),i.domElement.addEventListener("pointerup",B)),D(I),I.pointerType==="touch"?ue(I):S(I))}function O(I){i.enabled!==!1&&(I.pointerType==="touch"?de(I):k(I))}function B(I){i.enabled!==!1&&(I.pointerType==="touch"?ge():j(),ve(I),E.length===0&&(i.domElement.releasePointerCapture(I.pointerId),i.domElement.removeEventListener("pointermove",O),i.domElement.removeEventListener("pointerup",B)))}function M(I){ve(I)}function S(I){let xe;switch(I.button){case 0:xe=i.mouseButtons.LEFT;break;case 1:xe=i.mouseButtons.MIDDLE;break;case 2:xe=i.mouseButtons.RIGHT;break;default:xe=-1}switch(xe){case pi.DOLLY:if(i.enableZoom===!1)return;V(I),s=r.DOLLY;break;case pi.ROTATE:if(I.ctrlKey||I.metaKey||I.shiftKey){if(i.enablePan===!1)return;Y(I),s=r.PAN}else{if(i.enableRotate===!1)return;W(I),s=r.ROTATE}break;case pi.PAN:if(I.ctrlKey||I.metaKey||I.shiftKey){if(i.enableRotate===!1)return;W(I),s=r.ROTATE}else{if(i.enablePan===!1)return;Y(I),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Jf)}function k(I){if(i.enabled!==!1)switch(s){case r.ROTATE:if(i.enableRotate===!1)return;oe(I);break;case r.DOLLY:if(i.enableZoom===!1)return;te(I);break;case r.PAN:if(i.enablePan===!1)return;ie(I);break}}function j(I){i.dispatchEvent(Qf),s=r.NONE}function $(I){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||(I.preventDefault(),i.dispatchEvent(Jf),_e(I),i.dispatchEvent(Qf))}function q(I){i.enabled===!1||i.enablePan===!1||le(I)}function ue(I){switch(re(I),E.length){case 1:switch(i.touches.ONE){case us.ROTATE:if(i.enableRotate===!1)return;he(),s=r.TOUCH_ROTATE;break;case us.PAN:if(i.enablePan===!1)return;Ee(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case us.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;U(),s=r.TOUCH_DOLLY_PAN;break;case us.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ae(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(Jf)}function de(I){switch(re(I),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;X(I),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;ne(I),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Q(I),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;x(I),i.update();break;default:s=r.NONE}}function ge(I){i.dispatchEvent(Qf),s=r.NONE}function me(I){i.enabled!==!1&&I.preventDefault()}function D(I){E.push(I)}function ve(I){delete A[I.pointerId];for(let xe=0;xe<E.length;xe++)if(E[xe].pointerId==I.pointerId){E.splice(xe,1);return}}function re(I){let xe=A[I.pointerId];xe===void 0&&(xe=new ye,A[I.pointerId]=xe),xe.set(I.pageX,I.pageY)}function be(I){const xe=I.pointerId===E[0].pointerId?E[1]:E[0];return A[xe.pointerId]}i.domElement.addEventListener("contextmenu",me),i.domElement.addEventListener("pointerdown",T),i.domElement.addEventListener("pointercancel",M),i.domElement.addEventListener("wheel",$,{passive:!1}),this.update()}}const oF={__name:"ProductRender",props:["modelPath"],setup(n){const e=Fe(null);let t,i,r,s,a;const o=n;ti(()=>{l()});function l(){i=new gp;const c=document.createElement("canvas"),u=c.getContext("2d");c.width=300,c.height=600;const f=u.createLinearGradient(0,0,0,c.height);f.addColorStop(1,"#010501"),u.fillStyle=f,u.fillRect(0,0,c.width,c.height);const h=new sb(c);i.background=h,t=new qt(75,c.width/c.height,.1,1e3),r=new rt({antialias:!0}),r.setSize(c.width,c.height),e.value.appendChild(r.domElement),r.domElement.classList.add("three-canvas"),s=new aF(t,r.domElement),s.enableRotate=!0,s.enablePan=!1,s.enableZoom=!0,s.mouseButtons={LEFT:pi.ROTATE,MIDDLE:pi.ROTATE,RIGHT:pi.ROTATE},s.minDistance=1,s.maxDistance=1.5,s.minPolarAngle=1,s.maxPolarAngle=2,s.update(t.position.set(5,6,100)),new NO().load(o.modelPath,y=>{a=y.scene,i.add(a),a.position.y=-1.1;const m=new mn().setFromObject(a).getSize(new C);Math.max(m.x,m.y,m.z),t.fov*(Math.PI/180);const _=new Mb(16777215,1);i.add(_);const w=new Yc(16073404,1),E=new Yc(4388284,.3);w.position.set(0,1,0),E.position.set(1,0,0),i.add(w),i.add(E)},void 0,y=>{console.error("Error loading model:",y)});const g=new Ab(50,50);g.material.opacity=.1,g.material.transparent=!0,g.position.y=-1,i.add(g);const v=()=>{requestAnimationFrame(v),a&&(a.rotation.y+=.01),r.render(i,t)};v()}return(c,u)=>(Me(),Pe("div",{ref_key:"container",ref:e,class:"three-container"},null,512))}},lF=d_(oF,[["__scopeId","data-v-7ae21843"]]),cF={class:"product-info-container"},uF={class:"product-info"},fF={class:"product-title"},hF={class:"product-category"},dF={class:"product-price"},pF={class:"product-description"},mF={class:"product-action"},gF={class:"size-container"},vF=Z("p",{class:"product-description"},"Odaberi veliinu:",-1),yF={class:"size"},_F={class:"single-size"},xF=Z("label",{for:"s"},"S",-1),bF={class:"single-size"},wF=Z("label",{for:"m"},"M",-1),MF={class:"single-size"},SF=Z("label",{for:"l"},"L",-1),EF={class:"single-size"},TF=Z("label",{for:"xl"},"XL",-1),AF={class:"quantity"},RF={key:0,type:"submit",class:"submit-button"},LF={__name:"ProductInfo",props:{item:{type:Object,required:!0}},setup(n){const e=n,t=Fe(1),i=Fe("M"),r=()=>{t.value<5&&t.value++},s=()=>{t.value>1&&t.value--},{user:a}=el(),o=async()=>{const l=e.item.ID,c=i.value,u=t.value,f=a.value.ID;try{await Ze.post("/cart/add-to-cart",{itemId:l,size:c,quantity:u,userId:f});const h=await Ze.get(`/cart/active-cart/${f}`),d=h.data.length;let g=0;for(let v=0;v<h.data.length;v++)g+=h.data[v].quantity;Ch(d,g)}catch{console.error("Adding to cart failed")}};return(l,c)=>{const u=is("RouterLink");return Me(),Pe("article",cF,[Z("div",uF,[Z("h1",fF,Ye(n.item.name),1),Z("h6",hF,Ye(n.item.category),1),Z("h3",dF,Ye(n.item.price)+"",1),Z("p",pF,Ye(n.item.description),1)]),Z("section",mF,[Z("form",{onSubmit:lu(o,["prevent"])},[Z("div",gF,[vF,Z("section",yF,[Z("div",_F,[xF,vt(Z("input",{type:"radio",name:"size",id:"s",value:"S","onUpdate:modelValue":c[0]||(c[0]=f=>i.value=f)},null,512),[[Sl,i.value]])]),Z("div",bF,[wF,vt(Z("input",{type:"radio",name:"size",id:"m",value:"M","onUpdate:modelValue":c[1]||(c[1]=f=>i.value=f)},null,512),[[Sl,i.value]])]),Z("div",MF,[SF,vt(Z("input",{type:"radio",name:"size",id:"l",value:"L","onUpdate:modelValue":c[2]||(c[2]=f=>i.value=f)},null,512),[[Sl,i.value]])]),Z("div",EF,[TF,vt(Z("input",{type:"radio",name:"size",id:"xl",value:"XL","onUpdate:modelValue":c[3]||(c[3]=f=>i.value=f)},null,512),[[Sl,i.value]])])])]),Z("section",AF,[Z("label",{type:"button",onClick:r,class:"qty-btn",for:"qty",id:"plus"},"+"),Z("label",{type:"button",onClick:s,class:"qty-btn",for:"qty",id:"minus"},"-"),vt(Z("input",{type:"number",name:"qty",id:"qty","onUpdate:modelValue":c[4]||(c[4]=f=>t.value=f),min:"1",max:"5"},null,512),[[Pt,t.value]])]),Oe(a)?(Me(),Pe("button",RF," Dodaj u koaricu ")):(Me(),Rt(u,{key:1,to:"/cart",class:"submit-button"},{default:Gt(()=>[Fn(" Dodaj u koaricu ")]),_:1}))],32)])])}}},CF={key:0,class:"single-product-container"},PF={class:"product-view-container"},IF={class:"product-visuals-container"},NF={key:1},DF=Z("p",null,"Loading...",-1),OF=[DF],FF={__name:"Product",setup(n){const e=E_(),t=Fe(null),i=Fe([]),r=Fe("");return ti(async()=>{try{const a=await Ze.get(`http://localhost:3000/items/${e.params.id}`);t.value=a.data,i.value=a.data.images,r.value=a.data.models[0],document.title=a.data.name}catch(a){console.error("Error fetching item:",a)}}),(a,o)=>t.value?(Me(),Pe("div",CF,[Z("article",PF,[Z("section",IF,[Re(lF,{modelPath:r.value},null,8,["modelPath"]),Re(UL,{images:i.value},null,8,["images"])]),Re(LF,{item:t.value},null,8,["item"])])])):(Me(),Pe("div",NF,OF))}},kF={__name:"ProductView",setup(n){return(e,t)=>(Me(),Pe(dt,null,[Re(xr),Re(FF),Re(ss)],64))}};var Cb={},Pb={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e="fas",t="xmark",i=384,r=512,s=[128473,10005,10006,10060,215,"close","multiply","remove","times"],a="f00d",o="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z";n.definition={prefix:e,iconName:t,icon:[i,r,s,a,o]},n.faXmark=n.definition,n.prefix=e,n.iconName=t,n.width=i,n.height=r,n.ligatures=s,n.unicode=a,n.svgPathData=o,n.aliases=s})(Pb);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Pb;n.definition={prefix:e.prefix,iconName:e.iconName,icon:[e.width,e.height,e.aliases,e.unicode,e.svgPathData]},n.faClose=n.definition,n.prefix=e.prefix,n.iconName=e.iconName,n.width=e.width,n.height=e.height,n.ligatures=e.aliases,n.unicode=e.unicode,n.svgPathData=e.svgPathData,n.aliases=e.aliases})(Cb);const UF={__name:"CloseIcon",setup(n){return(e,t)=>(Me(),Rt(Oe(rs),{icon:Oe(Cb.faClose)},null,8,["icon"]))}},BF={class:"cart-item-container"},zF=["src"],HF={class:"cart-item-info"},VF={class:"cart-item-info-primary"},GF={class:"cart-item-name"},WF={class:"cart-item-size"},jF={class:"cart-item-qty"},$F={class:"cart-item-info-secondary"},qF={class:"cart-item-price"},XF={__name:"CartItem",props:{item:Object,view:String},emits:["removeItem"],setup(n,{emit:e}){const t=e,i=s=>s&&s.length>0?s[0]:"/src/assets/images/placeholder.jpg",r=s=>{t("removeItem",s)};return(s,a)=>{const o=is("RouterLink");return Me(),Pe("div",BF,[Re(o,{to:{name:"ItemDetail",params:{id:n.item.item_id}},class:"cart-item"},{default:Gt(()=>[Z("img",{class:"cart-item-img",src:i(n.item.images),alt:"Item Image"},null,8,zF),Z("section",HF,[Z("div",VF,[Z("h3",GF,Ye(n.item.name),1),Z("p",WF,"Veliina: "+Ye(n.item.size),1),Z("p",jF,"Koliina: "+Ye(n.item.quantity),1)]),Z("div",$F,[Z("p",qF,Ye(n.item.price*n.item.quantity)+" ",1)])])]),_:1},8,["to"]),n.view!="checkout"?(Me(),Pe("button",{key:0,class:"remove-from-cart",onClick:a[0]||(a[0]=l=>r(n.item.ID)),"aria-label":"Remove item from cart"},[Re(UF)])):xn("",!0)])}}},YF={class:"container"},KF={class:"cart-container"},ZF={key:0,class:"cart-title"},JF={key:1,class:"cart-items-container"},QF=Z("h1",{class:"cart-title"},"Artikli u koarici:",-1),ek={key:0,class:"cart-cost-container"},tk={class:"total-cost"},nk={class:"cart-item-price"},ik={key:2,class:"cart-title"},rk={key:3,class:"cart-cost-container"},sk={class:"total-cost"},ak={class:"cart-item-price"},Ib={__name:"Cart",props:"cartView",emits:["removeItem"],setup(n,{emit:e}){const{user:t}=el(),i=E_(),r=Fe([]),s=Fe(0),a=Fe(0),o=e,l=async()=>{try{const u=await Ze.get(`/cart/active-cart/${t.value.ID}`);u.data.length===0?(r.value=[],s.value=0):(r.value=u.data,s.value=r.value[0].cost),a.value=r.value.length}catch(u){console.error("Error fetching active cart:",u),u.response&&u.response.status===404?(r.value=[],s.value=0):console.error("Failed to fetch active cart:",u)}},c=async u=>{try{await Ze.delete(`/cart/remove-item/${u}`),await l(),await L0(t.value.ID),o("removeItem")}catch(f){console.error("Failed to remove item from cart:",f)}};return ti(()=>{t.value&&l()}),(u,f)=>{const h=is("RouterLink");return Me(),Pe("div",YF,[Z("div",KF,[Oe(t)&&s.value===0?(Me(),Pe("h1",ZF,"Vaa koarica je prazna.")):Oe(t)?(Me(),Pe("div",JF,[QF,s.value!==0&&a.value>3?(Me(),Pe("section",ek,[Z("p",tk,[Fn(" Ukupno: "),Z("span",nk,Ye(s.value)+" ",1)]),Oe(i).path!=="/checkout"?(Me(),Rt(h,{key:0,class:"submit-button checkout-btn",to:"/checkout"},{default:Gt(()=>[Fn("IDI NA NAPLATU")]),_:1})):xn("",!0)])):xn("",!0),(Me(!0),Pe(dt,null,Ks(r.value,d=>(Me(),Rt(XF,{view:u.view,key:d.ID,item:d,onRemoveItem:c},null,8,["view","item"]))),128))])):(Me(),Pe("h1",ik," Prijavite se ili izradite korisniki raun kako bi pristupili koarici. ")),s.value!==0?(Me(),Pe("section",rk,[Z("p",sk,[Fn(" Ukupno: "),Z("span",ak,Ye(s.value)+" ",1)]),Oe(i).path!=="/checkout"?(Me(),Rt(h,{key:0,class:"submit-button checkout-btn",to:"/checkout"},{default:Gt(()=>[Fn("IDI NA NAPLATU")]),_:1})):xn("",!0)])):xn("",!0)])])}}},ok={__name:"CartView",setup(n){return(e,t)=>(Me(),Pe(dt,null,[Re(xr),Re(Ib),Re(ss)],64))}},lk={class:"checkout-container"},ck=Z("h1",null,"Informacije za naplatu:",-1),uk={key:0,class:"checkout-details"},fk={class:"input-container"},hk=Z("label",null,"Ime:",-1),dk={class:"input-container"},pk=Z("label",null,"Prezime:",-1),mk={class:"input-container"},gk=Z("label",null,"Adresa:",-1),vk={class:"input-container"},yk=Z("label",null,"Grad:",-1),_k={class:"input-container"},xk=Z("label",null,"Potanski broj:",-1),bk={key:1},wk={class:"input-container"},Mk=Z("label",{for:"firstName"},"Ime:",-1),Sk={class:"input-container"},Ek=Z("label",{for:"lastName"},"Prezime:",-1),Tk={class:"input-container"},Ak=Z("label",{for:"address"},"Adresa:",-1),Rk={class:"input-container"},Lk=Z("label",{for:"city"},"Grad:",-1),Ck={class:"input-container"},Pk=Z("label",{for:"postalCode"},"Potanski broj:",-1),Ik={class:"input-container"},Nk=Z("label",{for:"paymentMethod"},"Vrsta plaanja:",-1),Dk=Z("option",{value:"card"},"Kartica",-1),Ok=Z("option",{value:"pp"},"Plaanje pouzeem",-1),Fk=[Dk,Ok],kk={key:2,class:"checkout-form"},Uk={class:"input-container"},Bk=Z("label",{for:"cardNumber"},"Broj kartice:",-1),zk={class:"input-container"},Hk=Z("label",{for:"expiryDate"},"Datum isteka:",-1),Vk={class:"input-container"},Gk=Z("label",{for:"cvv"},"CVV:",-1),Wk={key:0,class:"error-message"},jk={key:1,class:"error-message"},$k={key:2,class:"error-message"},qk=Z("button",{type:"submit",class:"submit-button"},"Narui",-1),Xk={__name:"Checkout",setup(n){const e=Fe(""),t=Fe(""),i=Fe(""),r=Fe(""),s=Fe(""),a=Fe("card"),o=Fe(""),l=Fe(""),c=Fe(""),u=Fe(""),f=Fe(""),h=Fe(""),{user:d}=el(),g=fu(),v=()=>{u.value="",f.value="",h.value="";const p=o.value.replace(/\s+/g,""),m=l.value.split("/"),_=c.value;let w=!0;if(p.length!==16&&(u.value="Broj kartice mora imati 16 znamenki.",w=!1),m.length!==2||m[0].length!==2||m[1].length!==2)f.value="Datum isteka mora biti u formatu MM/YY.",w=!1;else{const E=parseInt(m[0],10),A=parseInt(`20${m[1]}`,10),b=new Date,N=b.getFullYear(),K=b.getMonth()+1;(E<1||E>12||A<N||A===N&&E<K)&&(f.value="Datum isteka nije vaei.",w=!1)}return _.length!==3&&(h.value="CVV mora imati 3 znamenke.",w=!1),w},y=async()=>{var m;if(a.value==="card"&&!v())return;const p=((m=d.value)==null?void 0:m.ID)||null;try{await Ze.post("http://localhost:3000/cart/update-status",{userId:p}),g.push("/checkout/success")}catch(_){console.error("Error updating cart:",_)}};return(p,m)=>(Me(),Pe("div",lk,[Z("form",{class:"checkout-form",onSubmit:lu(y,["prevent"])},[ck,Oe(d)?(Me(),Pe("section",uk,[Z("div",fk,[hk,Z("p",null,Ye(Oe(d).firstname),1)]),Z("div",dk,[pk,Z("p",null,Ye(Oe(d).lastname),1)]),Z("div",mk,[gk,Z("p",null,Ye(Oe(d).address),1)]),Z("div",vk,[yk,Z("p",null,Ye(Oe(d).city),1)]),Z("div",_k,[xk,Z("p",null,Ye(Oe(d).postal_code),1)])])):(Me(),Pe("section",bk,[Z("div",wk,[Mk,vt(Z("input",{type:"text",id:"firstName","onUpdate:modelValue":m[0]||(m[0]=_=>e.value=_),required:""},null,512),[[Pt,e.value]])]),Z("div",Sk,[Ek,vt(Z("input",{type:"text",id:"lastName","onUpdate:modelValue":m[1]||(m[1]=_=>t.value=_),required:""},null,512),[[Pt,t.value]])]),Z("div",Tk,[Ak,vt(Z("input",{type:"text",id:"address","onUpdate:modelValue":m[2]||(m[2]=_=>i.value=_),required:""},null,512),[[Pt,i.value]])]),Z("div",Rk,[Lk,vt(Z("input",{type:"text",id:"city","onUpdate:modelValue":m[3]||(m[3]=_=>r.value=_),required:""},null,512),[[Pt,r.value]])]),Z("div",Ck,[Pk,vt(Z("input",{type:"text",id:"postalCode","onUpdate:modelValue":m[4]||(m[4]=_=>s.value=_),required:""},null,512),[[Pt,s.value]])])])),Z("div",Ik,[Nk,vt(Z("select",{id:"paymentMethod","onUpdate:modelValue":m[5]||(m[5]=_=>a.value=_),required:""},Fk,512),[[tS,a.value]])]),a.value==="card"?(Me(),Pe("section",kk,[Z("div",Uk,[Bk,vt(Z("input",{type:"text",id:"cardNumber","onUpdate:modelValue":m[6]||(m[6]=_=>o.value=_),required:"",placeholder:"1234 1234 1234 1234"},null,512),[[Pt,o.value]])]),Z("div",zk,[Hk,vt(Z("input",{type:"text",id:"expiryDate","onUpdate:modelValue":m[7]||(m[7]=_=>l.value=_),required:"",placeholder:"01/24"},null,512),[[Pt,l.value]])]),Z("div",Vk,[Gk,vt(Z("input",{type:"text",id:"cvv","onUpdate:modelValue":m[8]||(m[8]=_=>c.value=_),required:"",placeholder:"123"},null,512),[[Pt,c.value]])]),u.value?(Me(),Pe("p",Wk,Ye(u.value),1)):xn("",!0),f.value?(Me(),Pe("p",jk,Ye(f.value),1)):xn("",!0),h.value?(Me(),Pe("p",$k,Ye(h.value),1)):xn("",!0)])):xn("",!0),qk],32)]))}},Yk={class:"cart-checkout-container"},Kk={__name:"CheckoutView",setup(n){return(e,t)=>(Me(),Pe(dt,null,[Re(xr),Z("div",Yk,[Re(Ib,{view:"checkout"}),Re(Xk)]),Re(ss)],64))}},Zk={class:"checkout-success-container"},Jk=Z("h1",null,"Narudba zaprimljena.",-1),Qk={class:"return-button-container"},e4={__name:"CheckoutSuccessView",setup(n){return(e,t)=>{const i=is("RouterLink");return Me(),Pe(dt,null,[Re(xr),Z("div",Zk,[Jk,Z("div",Qk,[Re(i,{to:"/",class:"submit-button"},{default:Gt(()=>[Fn("Vrati se na poetnu stranicu")]),_:1})])]),Re(ss)],64)}}},t4={key:0,class:"admin-container"},n4=Z("h1",null,"admin dashboard",-1),i4={class:"admin-items"},r4=bM('<input type="name" name="item" id="name" placeholder="name" required><input type="number" name="item" id="price" placeholder="price" required><input type="name" name="item" id="category" placeholder="category" required><textarea name="item" id="imagepath" cols="30" rows="10" placeholder="image path"></textarea><textarea name="item" id="modelpath" cols="30" rows="10" placeholder="model path"></textarea>',5),s4={key:1},a4={__name:"Profile",setup(n){const{user:e}=el(),t=Fe([]),i=async()=>{try{const s=await Ze.get("http://localhost:3000/items");t.value=s.data}catch(s){console.error("Error fetching items:",s)}},r=async()=>{};return ti(i),(s,a)=>Oe(e).role==="admin"?(Me(),Pe("div",t4,[n4,Z("section",i4,[Z("div",null,[Z("form",{class:"new-item"},[r4,Z("button",{type:"submit",onClick:r},"add new")])]),(Me(!0),Pe(dt,null,Ks(t.value,o=>(Me(),Pe("div",{key:o.id},[Re(C0,{item:o},null,8,["item"])]))),128))])])):(Me(),Pe("div",s4,[Z("h1",null,"email: "+Ye(Oe(e).email),1),Z("h1",null,"firstname: "+Ye(Oe(e).firstname),1),Z("h1",null,"lastname: "+Ye(Oe(e).lastname),1),Z("h1",null,"address: "+Ye(Oe(e).address),1),Z("h1",null,"city: "+Ye(Oe(e).city),1),Z("h1",null,"postal code: "+Ye(Oe(e).postal_code),1)]))}},o4={__name:"ProfileView",setup(n){return(e,t)=>(Me(),Pe(dt,null,[Re(xr),Re(a4)],64))}},l4=[{path:"/",component:sR,meta:{title:"SBL SHOP"}},{path:"/login",component:uR,meta:{title:"Prijavi se"}},{path:"/register",component:gR,meta:{title:"Izradi raun"}},{path:"/item/:id",component:kF,name:"ItemDetail",props:!0,meta:{title:"Proizvod"}},{path:"/cart",component:ok,name:"Cart",meta:{title:"Koarica"}},{path:"/checkout",component:Kk,name:"Checkout",meta:{title:"Naplata"}},{path:"/profile",component:o4,name:"Profile",meta:{title:"Profile"}},{path:"/checkout/success",component:e4,name:"CheckoutSuccess",meta:{title:"Narudba zaprimljena"}}],Nb=d1({history:GS(),routes:l4,scrollBehavior(n,e,t){return n.hash?{el:n.hash,behavior:"smooth"}:t||{top:0,behavior:"smooth"}}});Nb.beforeEach((n,e,t)=>{n.meta&&n.meta.title?document.title=n.meta.title:document.title="SBL",t()});const Pp=aS(fS);Pp.use(Nb);Pp.use(DL);Pp.mount("#app");
